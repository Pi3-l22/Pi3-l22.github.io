<!doctype html><html lang=zh-cn><head><script>(function(){const e=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",e)})()</script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=author content="LiuChao"><meta name=description content="Go 语言入门基础学习笔记之 Go 语言的切片"><link rel=icon href=https://blog.pi3.fun/favicon.ico><meta name=keywords content=" study  latex  life  academic "><meta property="og:url" content="https://blog.pi3.fun/post/2024/go-beginner-notes/slices/"><meta property="og:site_name" content="Pi3's Notes"><meta property="og:title" content="Go语言入门11：切片"><meta property="og:description" content="Go 语言入门基础学习笔记之 Go 语言的切片"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-11-16T00:00:00+00:00"><meta property="article:modified_time" content="2024-11-16T00:00:00+00:00"><meta property="article:tag" content="技术"><meta property="article:tag" content="Golang"><meta property="article:tag" content="Go 入门笔记"><link rel=canonical href=https://blog.pi3.fun/post/2024/go-beginner-notes/slices/><meta itemprop=name content="Go语言入门11：切片"><meta itemprop=description content="Go 语言入门基础学习笔记之 Go 语言的切片"><meta itemprop=datePublished content="2024-11-16T00:00:00+00:00"><meta itemprop=dateModified content="2024-11-16T00:00:00+00:00"><meta itemprop=wordCount content="1972"><meta itemprop=keywords content="技术,Golang,Go 入门笔记"><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/common.css><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/content.css><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/theme.css><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/iconfont/iconfont.css><link rel=stylesheet href=https://blog.pi3.fun/css/syntax/xcode.css data-theme-style=light media="(prefers-color-scheme: light)"><link rel=stylesheet href=https://blog.pi3.fun/css/syntax/catppuccin-mocha.css data-theme-style=dark media="not all"><title>Go语言入门11：切片 - Pi3's Notes</title>
<link rel=stylesheet href=https://blog.pi3.fun/css/single.css><link href=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-100-y/KaTeX/0.15.2/katex.min.css rel=stylesheet><script defer src=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-100-y/KaTeX/0.15.2/katex.min.js></script><script defer src=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-100-y/KaTeX/0.15.2/contrib/auto-render.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}],ignoredTags:["script","noscript","style","textarea","pre","code","option"],throwOnError:!1})})</script></head><body><div id=wrapper><header id=header><link rel=stylesheet href=https://chinese-fonts-cdn.deno.dev/packages/lxgwwenkaibright/dist/LXGWBright-Regular/result.css><link rel=stylesheet href=https://chinese-fonts-cdn.deno.dev/packages/lxgwwenkaibright/dist/LXGWBright-Italic/result.css><link rel=stylesheet href=https://chinese-fonts-cdn.deno.dev/packages/maple-mono-cn/dist/MapleMono-CN-Regular/result.css><h1><a href=https://blog.pi3.fun/>Pi3's Notes</a></h1><nav><span class=nav-bar-item><a class=link href=/>文章</a>
</span><span class=nav-bar-item><a class=link href=https://www.boyouquan.com/planet-shuttle>穿梭</a>
</span><span class=nav-bar-item><a class=link href=/about/>关于</a>
</span><span class=nav-bar-item><a class=link href=/links/>友链</a>
</span><span class=nav-bar-item><a class="link theme-toggle" href=javascript:void(0);>黑暗</a></span></nav></header><main id=main class=post><h1>Go语言入门11：切片</h1><div><b>Keywords: </b><a class=link href=https://blog.pi3.fun/tags/%E6%8A%80%E6%9C%AF>#技术</a>
<a class=link href=https://blog.pi3.fun/tags/golang>#Golang</a>
<a class=link href=https://blog.pi3.fun/tags/go-%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0>#Go 入门笔记</a></div><div><b>Release Date: </b><span>2024-11-16</span></div><details><summary><b>Table of Contents</b></summary><div class=toc><nav id=TableOfContents><ul><li><a href=#切片-slice>切片 Slice</a><ul><li><a href=#定义切片>定义切片</a></li><li><a href=#初始化切片>初始化切片</a></li><li><a href=#len-和-cap-函数>len 和 cap 函数</a></li><li><a href=#空切片>空切片</a></li><li><a href=#截取切片>截取切片</a></li><li><a href=#append-和-copy-函数>append 和 copy 函数</a></li></ul></li></ul></nav></div></details><article class=content><p>Go 语言入门基础学习笔记之 Go 语言的切片</p><p><img src=https://cdn.pi3.fun/blog/golang.png alt=golang></p><h2 id=切片-slice>切片 Slice</h2><p>Go 语言切片是对<strong class=chinese>数组</strong>的<strong class=chinese>抽象</strong>，即<strong class=chinese>引用</strong>了一个数组，是一种<strong class=chinese>引用数据类型</strong>。</p><blockquote><p>这一点与数组完全不一样，虽然数组类型为 <code>[10]int</code> 而切片类型为 <code>[]int</code>，但是它们相差很大，是两个完全不同的数据类型，其中最大的区别就是<strong class=chinese>数组是值类型</strong>，而<strong class=chinese>切片是引用数据类型</strong>。也就是说，<strong class=chinese>数组</strong>在传递进函数中<strong class=chinese>不会被修改</strong>，而<strong class=chinese>切片</strong>传递进函数后<strong class=chinese>可以被修改</strong>。</p></blockquote><p>Go 数组的<strong class=chinese>长度不可改变</strong>，在特定场景中这样的集合就不太适用，Go 中提供了一种灵活，功能强悍的内置类型，<strong class=chinese>切片</strong>（动态数组），与数组相比<strong class=chinese>切片</strong>的长度是<strong class=chinese>不固定</strong>的，可以<strong class=chinese>追加元素</strong>，在追加时可能使切片的<strong class=chinese>容量增大</strong>。</p><h3 id=定义切片>定义切片</h3><ol><li>直接声明一个切片，这时并不会分配空间，还需要 <code>make</code> 函数来创建空间。<a href=#%E7%A9%BA%E5%88%87%E7%89%87>空切片</a></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>var</span> <span class=nx>identifier</span> <span class=p>[]</span><span class=kd>type</span>
</span></span></code></pre></div><blockquote><p>切片不需要说明长度。<code>[]int</code> 就是一个 int 类型切片的数据类型。</p></blockquote><ol start=2><li>使用 <code>make()</code> 函数来创建切片</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>var</span> <span class=nx>slice1</span> <span class=p>[]</span><span class=kd>type</span> <span class=p>=</span> <span class=nb>make</span><span class=p>([]</span><span class=kd>type</span><span class=p>,</span> <span class=nx>len</span><span class=p>,</span> <span class=nx>cap</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>// 或者
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>slice1</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=kd>type</span><span class=p>,</span> <span class=nx>len</span><span class=p>)</span>
</span></span></code></pre></div><p>也可以指定<strong class=chinese>容量</strong>，其中 <code>capacity</code> 指切片的<strong class=chinese>最大容量</strong>，为可选参数，<code>len</code> 是<strong class=chinese>数组的长度</strong>并且也是<strong class=chinese>切片的初始长度</strong>。元素为被赋值为默认值。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nb>make</span><span class=p>([]</span><span class=nx>T</span><span class=p>,</span> <span class=nx>length</span><span class=p>,</span> <span class=nx>capacity</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=初始化切片>初始化切片</h3><ol><li><strong class=chinese>直接初始化切片</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>var</span> <span class=nx>s</span> <span class=p>=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>// 或者
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>s</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>int</span> <span class=p>{</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span> <span class=p>}</span> 
</span></span></code></pre></div><p><code>[]</code> 表示是切片类型，<code>{1,2,3}</code> 初始化值依次是 <code>1,2,3</code>，其 <code>cap=len=3</code>。</p><ol start=2><li><strong class=chinese>引用数组</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>s</span> <span class=o>:=</span> <span class=nx>arr</span><span class=p>[:]</span> 
</span></span></code></pre></div><p>切片 <code>s</code> 是数组 <code>arr</code> 的引用。</p><ol start=3><li><strong class=chinese>引用部分数组</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>s</span> <span class=o>:=</span> <span class=nx>arr</span><span class=p>[</span><span class=nx>startIndex</span><span class=p>:</span><span class=nx>endIndex</span><span class=p>]</span>
</span></span></code></pre></div><p>将 <code>arr</code> 中从下标 <code>startIndex</code> 到 <code>endIndex-1</code> 下的元素创建为一个新的切片。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>s</span> <span class=o>:=</span> <span class=nx>arr</span><span class=p>[</span><span class=nx>startIndex</span><span class=p>:]</span> 
</span></span></code></pre></div><p>默认 <code>endIndex</code> 时将表示一直到 <code>arr</code> 的最后一个元素。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>s</span> <span class=o>:=</span> <span class=nx>arr</span><span class=p>[:</span><span class=nx>endIndex</span><span class=p>]</span> 
</span></span></code></pre></div><p>默认 <code>startIndex</code> 时将表示从 <code>arr</code> 的第一个元素开始。</p><ol start=4><li><strong class=chinese>引用另一个切片</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>s1</span> <span class=o>:=</span> <span class=nx>s</span><span class=p>[</span><span class=nx>startIndex</span><span class=p>:</span><span class=nx>endIndex</span><span class=p>]</span> 
</span></span></code></pre></div><p>与引用数组的情况类似。</p><ol start=5><li><strong>通过 <code>make ()</code> 函数</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>s</span> <span class=o>:=</span><span class=nb>make</span><span class=p>([]</span><span class=kt>int</span><span class=p>,</span><span class=nx>len</span><span class=p>,</span><span class=nx>cap</span><span class=p>)</span> 
</span></span></code></pre></div><p>通过内置函数 <code>make()</code> 初始化切片 <code>s</code>，<code>[]int</code> 标识为其元素类型为 <code>int</code> 的切片。</p><hr><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>arr</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>int</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span> <span class=c1>// 切片指向一个int数组，长度为3，容量为5
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=nx>arr</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=nx>arr</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=p>=</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>7</span>  <span class=c1>// 给切片元素赋值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>brr</span> <span class=o>:=</span> <span class=nx>arr</span>  <span class=c1>// 切片的赋值拷贝
</span></span></span></code></pre></div><p>在上面这个例子中，需要注意 <code>brr := arr</code>，Go 语言中的所有等号赋值都会发生拷贝，由于切片是一个包含 3 个成员变量的结构体，进行等号拷贝时，实际上拷贝的是那 3 个成员变量，也就是说并没有拷贝底层的数组，而只是拷贝了底层数组的指针。因此 <code>brr</code> 实际上也是指向原来的底层数组。这也就是为什么，当使用 <code>brr[0] = 3</code> 把底层数组的首元素改成了 3，此时使用 <code>arr[0]</code> 访问首元素也变成了 3，他们指向同一个数组。</p><p><img src=https://cdn.pi3.fun/blog/202411161127212.png alt=image.png></p><blockquote><p>这也是由于切片为<strong class=chinese>引用</strong>数据类型决定的。因此，同理<a href=#%E6%88%AA%E5%8F%96%E5%88%87%E7%89%87>截取切片</a>中也会发生相同的情况。如果想要拷贝后不互相影响，Go 语言提供了一个 <code>copy</code> 函数，用于完成“<strong class=chinese>深拷贝</strong>”， <a href=#append%20%E5%92%8C%20copy%20%E5%87%BD%E6%95%B0>append 和 copy 函数</a></p></blockquote><h3 id=len-和-cap-函数>len 和 cap 函数</h3><p>切片是<strong class=chinese>可索引</strong>的，并且可以由 <code>len()</code> 方法获取长度。</p><p>切片提供了<strong class=chinese>计算容量</strong>的方法 <code>cap()</code> 可以测量切片<strong class=chinese>最长</strong>可以达到多少。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=kd>var</span> <span class=nx>numbers</span> <span class=p>=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>int</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=nf>printSlice</span><span class=p>(</span><span class=nx>numbers</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>printSlice</span><span class=p>(</span><span class=nx>x</span> <span class=p>[]</span><span class=kt>int</span><span class=p>){</span>
</span></span><span class=line><span class=cl>   <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;len=%d cap=%d slice=%v\n&#34;</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=nx>x</span><span class=p>),</span><span class=nb>cap</span><span class=p>(</span><span class=nx>x</span><span class=p>),</span><span class=nx>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 输出结果
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>len</span><span class=p>=</span><span class=mi>3</span> <span class=nx>cap</span><span class=p>=</span><span class=mi>5</span> <span class=nx>slice</span><span class=p>=[</span><span class=mi>0</span> <span class=mi>0</span> <span class=mi>0</span><span class=p>]</span>
</span></span></code></pre></div><p>如果切片不断增加元素，超过了容量大小，系统会自动申请一个更大内存空间，增加容量，一般是原来的<strong class=chinese>两倍</strong>大小。这时系统就会将原先的元素数据全部拷贝到新的内存空间，因此不会修改原先的数组元素，也就不会发现上面 <code>arr</code> 和 <code>brr</code> 相会影响的情况了。</p><p><img src=https://cdn.pi3.fun/blog/202411161127317.png alt=image.png></p><h3 id=空切片>空切片</h3><p>一个切片在<strong class=chinese>未初始化之前</strong>默认为 <code>nil</code>，长度为 <code>0</code>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=kd>var</span> <span class=nx>numbers</span> <span class=p>[]</span><span class=kt>int</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=nf>printSlice</span><span class=p>(</span><span class=nx>numbers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=k>if</span><span class=p>(</span><span class=nx>numbers</span> <span class=o>==</span> <span class=kc>nil</span><span class=p>){</span>
</span></span><span class=line><span class=cl>      <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;切片是空的&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>printSlice</span><span class=p>(</span><span class=nx>x</span> <span class=p>[]</span><span class=kt>int</span><span class=p>){</span>
</span></span><span class=line><span class=cl>   <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;len=%d cap=%d slice=%v\n&#34;</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=nx>x</span><span class=p>),</span><span class=nb>cap</span><span class=p>(</span><span class=nx>x</span><span class=p>),</span><span class=nx>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 输出结果
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>len</span><span class=p>=</span><span class=mi>0</span> <span class=nx>cap</span><span class=p>=</span><span class=mi>0</span> <span class=nx>slice</span><span class=p>=[]</span>
</span></span><span class=line><span class=cl><span class=nx>切片是空的</span>
</span></span></code></pre></div><blockquote><p><code>%v</code> 可以打印任何数据类型的详细信息，在这里是把切片中的所有数据打印出来。</p></blockquote><p><code>var numbers []int</code> 它只声明一个切片，但是没有分配内存空间，并且不能直接给其中一个位置赋值，比如使用 <code>numbers[0] = 1</code> 会报错，这时需要使用 <code>make</code> 来开辟一个空间。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>var</span> <span class=nx>numbers</span> <span class=p>[]</span><span class=kt>int</span>
</span></span><span class=line><span class=cl><span class=nx>numbers</span> <span class=p>=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>int</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span></span></code></pre></div><p>这时，会给 <code>numbers</code> 开辟大小为 3 的空间，并给其赋默认值，<code>numbers=[0,0,0]</code>，注意此时的 <code>numbers</code> 并不是<strong class=chinese>空切片</strong>，使用 <code>numbers[0] = 1</code> 就可以修改切片的值。</p><h3 id=截取切片>截取切片</h3><p>可以通过设置下限及上限来设置截取切片。与 python 类似。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=cm>/* 创建切片 */</span>
</span></span><span class=line><span class=cl>   <span class=nx>numbers</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>}</span>   
</span></span><span class=line><span class=cl>   <span class=nf>printSlice</span><span class=p>(</span><span class=nx>numbers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=cm>/* 打印原始切片 */</span>
</span></span><span class=line><span class=cl>   <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;numbers ==&#34;</span><span class=p>,</span> <span class=nx>numbers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=cm>/* 打印子切片从索引1(包含) 到索引4(不包含)*/</span>
</span></span><span class=line><span class=cl>   <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;numbers[1:4] ==&#34;</span><span class=p>,</span> <span class=nx>numbers</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>4</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=cm>/* 默认下限为 0*/</span>
</span></span><span class=line><span class=cl>   <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;numbers[:3] ==&#34;</span><span class=p>,</span> <span class=nx>numbers</span><span class=p>[:</span><span class=mi>3</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=cm>/* 默认上限为 len(s)*/</span>
</span></span><span class=line><span class=cl>   <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;numbers[4:] ==&#34;</span><span class=p>,</span> <span class=nx>numbers</span><span class=p>[</span><span class=mi>4</span><span class=p>:])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=nx>numbers1</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>int</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=nf>printSlice</span><span class=p>(</span><span class=nx>numbers1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=cm>/* 打印子切片从索引  0(包含) 到索引 2(不包含) */</span>
</span></span><span class=line><span class=cl>   <span class=nx>number2</span> <span class=o>:=</span> <span class=nx>numbers</span><span class=p>[:</span><span class=mi>2</span><span class=p>]</span>
</span></span><span class=line><span class=cl>   <span class=nf>printSlice</span><span class=p>(</span><span class=nx>number2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=cm>/* 打印子切片从索引 2(包含) 到索引 5(不包含) */</span>
</span></span><span class=line><span class=cl>   <span class=nx>number3</span> <span class=o>:=</span> <span class=nx>numbers</span><span class=p>[</span><span class=mi>2</span><span class=p>:</span><span class=mi>5</span><span class=p>]</span>
</span></span><span class=line><span class=cl>   <span class=nf>printSlice</span><span class=p>(</span><span class=nx>number3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>printSlice</span><span class=p>(</span><span class=nx>x</span> <span class=p>[]</span><span class=kt>int</span><span class=p>){</span>
</span></span><span class=line><span class=cl>   <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;len=%d cap=%d slice=%v\n&#34;</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=nx>x</span><span class=p>),</span><span class=nb>cap</span><span class=p>(</span><span class=nx>x</span><span class=p>),</span><span class=nx>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 输出结果
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>len</span><span class=p>=</span><span class=mi>9</span> <span class=nx>cap</span><span class=p>=</span><span class=mi>9</span> <span class=nx>slice</span><span class=p>=[</span><span class=mi>0</span> <span class=mi>1</span> <span class=mi>2</span> <span class=mi>3</span> <span class=mi>4</span> <span class=mi>5</span> <span class=mi>6</span> <span class=mi>7</span> <span class=mi>8</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>numbers</span> <span class=o>==</span> <span class=p>[</span><span class=mi>0</span> <span class=mi>1</span> <span class=mi>2</span> <span class=mi>3</span> <span class=mi>4</span> <span class=mi>5</span> <span class=mi>6</span> <span class=mi>7</span> <span class=mi>8</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>numbers</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>4</span><span class=p>]</span> <span class=o>==</span> <span class=p>[</span><span class=mi>1</span> <span class=mi>2</span> <span class=mi>3</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>numbers</span><span class=p>[:</span><span class=mi>3</span><span class=p>]</span> <span class=o>==</span> <span class=p>[</span><span class=mi>0</span> <span class=mi>1</span> <span class=mi>2</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>numbers</span><span class=p>[</span><span class=mi>4</span><span class=p>:]</span> <span class=o>==</span> <span class=p>[</span><span class=mi>4</span> <span class=mi>5</span> <span class=mi>6</span> <span class=mi>7</span> <span class=mi>8</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>len</span><span class=p>=</span><span class=mi>0</span> <span class=nx>cap</span><span class=p>=</span><span class=mi>5</span> <span class=nx>slice</span><span class=p>=[]</span>
</span></span><span class=line><span class=cl><span class=nx>len</span><span class=p>=</span><span class=mi>2</span> <span class=nx>cap</span><span class=p>=</span><span class=mi>9</span> <span class=nx>slice</span><span class=p>=[</span><span class=mi>0</span> <span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>len</span><span class=p>=</span><span class=mi>3</span> <span class=nx>cap</span><span class=p>=</span><span class=mi>7</span> <span class=nx>slice</span><span class=p>=[</span><span class=mi>2</span> <span class=mi>3</span> <span class=mi>4</span><span class=p>]</span>
</span></span></code></pre></div><h3 id=append-和-copy-函数>append 和 copy 函数</h3><p>如果想增加切片的容量，我们必须<strong class=chinese>创建</strong>一个<strong class=chinese>新</strong>的更大的切片并把原分片的内容都拷贝过来。</p><p>下面的代码描述了从拷贝切片的 copy 方法和向切片追加新元素的 append 方法。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=kd>var</span> <span class=nx>numbers</span> <span class=p>[]</span><span class=kt>int</span>
</span></span><span class=line><span class=cl>   <span class=nf>printSlice</span><span class=p>(</span><span class=nx>numbers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=cm>/* 允许追加空切片 */</span>
</span></span><span class=line><span class=cl>   <span class=nx>numbers</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>numbers</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=nf>printSlice</span><span class=p>(</span><span class=nx>numbers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=cm>/* 向切片添加一个元素 */</span>
</span></span><span class=line><span class=cl>   <span class=nx>numbers</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>numbers</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=nf>printSlice</span><span class=p>(</span><span class=nx>numbers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=cm>/* 同时添加多个元素 */</span>
</span></span><span class=line><span class=cl>   <span class=nx>numbers</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>numbers</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=nf>printSlice</span><span class=p>(</span><span class=nx>numbers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=cm>/* 创建切片 numbers1 是之前切片的两倍容量*/</span>
</span></span><span class=line><span class=cl>   <span class=nx>numbers1</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>int</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=nx>numbers</span><span class=p>),</span> <span class=p>(</span><span class=nb>cap</span><span class=p>(</span><span class=nx>numbers</span><span class=p>))</span><span class=o>*</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=cm>/* 拷贝 numbers 的内容到 numbers1 */</span>
</span></span><span class=line><span class=cl>   <span class=nb>copy</span><span class=p>(</span><span class=nx>numbers1</span><span class=p>,</span><span class=nx>numbers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=nf>printSlice</span><span class=p>(</span><span class=nx>numbers1</span><span class=p>)</span>   
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>printSlice</span><span class=p>(</span><span class=nx>x</span> <span class=p>[]</span><span class=kt>int</span><span class=p>){</span>
</span></span><span class=line><span class=cl>   <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;len=%d cap=%d slice=%v\n&#34;</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=nx>x</span><span class=p>),</span><span class=nb>cap</span><span class=p>(</span><span class=nx>x</span><span class=p>),</span><span class=nx>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 输出结果
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>len</span><span class=p>=</span><span class=mi>0</span> <span class=nx>cap</span><span class=p>=</span><span class=mi>0</span> <span class=nx>slice</span><span class=p>=[]</span>
</span></span><span class=line><span class=cl><span class=nx>len</span><span class=p>=</span><span class=mi>1</span> <span class=nx>cap</span><span class=p>=</span><span class=mi>1</span> <span class=nx>slice</span><span class=p>=[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>len</span><span class=p>=</span><span class=mi>2</span> <span class=nx>cap</span><span class=p>=</span><span class=mi>2</span> <span class=nx>slice</span><span class=p>=[</span><span class=mi>0</span> <span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>len</span><span class=p>=</span><span class=mi>5</span> <span class=nx>cap</span><span class=p>=</span><span class=mi>6</span> <span class=nx>slice</span><span class=p>=[</span><span class=mi>0</span> <span class=mi>1</span> <span class=mi>2</span> <span class=mi>3</span> <span class=mi>4</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>len</span><span class=p>=</span><span class=mi>5</span> <span class=nx>cap</span><span class=p>=</span><span class=mi>12</span> <span class=nx>slice</span><span class=p>=[</span><span class=mi>0</span> <span class=mi>1</span> <span class=mi>2</span> <span class=mi>3</span> <span class=mi>4</span><span class=p>]</span>
</span></span></code></pre></div><blockquote><p><code>append</code> 函数不会修改原始的切片，因为没有传递指针，但是它会返回一个新的操作后的切片。</p><p><code>copy</code> 函数避免了切片的截取和赋值时指向了同一个底层的数组，<code>copy</code> 实现了“<strong class=chinese>深拷贝</strong>”，即拷贝了一个副本，开辟了一个新空间。</p></blockquote><hr><p>参考课程：</p><ol><li><a href=https://www.bilibili.com/video/BV1gf4y1r79E>8小时转职Golang工程师</a></li><li><a href=https://www.runoob.com/go/go-tutorial.html>Go语言教程 | 菜鸟教程</a></li></ol></article><div class=paginator><a class=link href=https://blog.pi3.fun/post/2024/go-beginner-notes/arrays/>← prev</a>
<a class=link href=https://blog.pi3.fun/post/2024/go-beginner-notes/collections/>next →</a></div><div class=comment><div id=tcomment></div><script src=https://registry.npmmirror.com/twikoo/1.6.39/files/dist/twikoo.min.js></script><script async>twikoo.init({envId:"https://twikoo.pi3.fun/.netlify/functions/twikoo",el:"#tcomment",lang:"zh-CN"})</script></div></main><footer id=footer><div><span style=display:flex;align-items:center><span style=margin-right:.5rem>© 2021 - 2025</span><img src=https://cdn.pi3.fun/static/rainbow.gif loading=lazy width=20 alt=rainbow><span style=margin-left:.5rem>By Liu Chao</span></span></div><div class=footnote><span><a href=https://www.foreverblog.cn/ target=_blank><img src=https://img.foreverblog.cn/logo_en_default.png style=width:auto;height:16px></a> | <a data-accent-color href=https://www.boyouquan.com/ style="font-size:16px;background-image:linear-gradient(to right,#14100f,#d55b5b,#4d14e6);background-clip:text;color:transparent">博友圈</a><br><a class=link href=/index.xml><span class="iconfont icon-RSS"></span></a> | <a class=link href=https://github.com/Pi3-l22 target=_ blank><span class="iconfont icon-GitHub"></span></a> | <a class=link href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel=noopener><span class="iconfont icon-creative-commons-fill"></span></a></span></div><div class=blog-icon></div></footer></div><script>document.addEventListener("DOMContentLoaded",function(){const n=localStorage.getItem("theme")||"light",e=document.querySelector('link[data-theme-style="light"]'),t=document.querySelector('link[data-theme-style="dark"]'),i=window.matchMedia("(prefers-color-scheme: dark)");i.addListener(function(n){if(!localStorage.getItem("theme")){const s=n.matches?"dark":"light";document.documentElement.setAttribute("data-theme",s),localStorage.setItem("theme",s),s==="light"?(e.media="all",t.media="not all"):(e.media="not all",t.media="all");const o=document.querySelector("iframe.giscus-frame");if(o){const e=s==="light"?"light_tritanopia":"dark_tritanopia";o.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}}}),n==="light"?(e.media="all",t.media="not all"):(e.media="not all",t.media="all");function o(){const e=document.querySelector("iframe.giscus-frame");if(e){const t=n==="light"?"light_tritanopia":"dark_tritanopia";e.contentWindow.postMessage({giscus:{setConfig:{theme:t}}},"https://giscus.app")}else setTimeout(o,1e3)}o();const s=document.querySelector(".theme-toggle");s&&(s.textContent=n==="light"?"黑暗":"明亮",s.addEventListener("click",function(){const o=document.documentElement.getAttribute("data-theme"),n=o==="light"?"dark":"light";document.documentElement.setAttribute("data-theme",n),localStorage.setItem("theme",n),n==="light"?(e.media="all",t.media="not all"):(e.media="not all",t.media="all");const s=document.querySelector("iframe.giscus-frame");if(s){const e=n==="light"?"light_tritanopia":"dark_tritanopia";s.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}this.textContent=n==="light"?"黑暗":"明亮"}))})</script><script src=https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){confetti({particleCount:150,spread:100})})</script></body></html>