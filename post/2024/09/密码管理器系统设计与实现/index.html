<!doctype html><html lang=zh-cn><head><script>(function(){const e=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",e)})()</script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=author content="LiuChao"><meta name=description content="密码管理器系统设计与实现"><link rel=icon href=https://blog.pi3.fun/favicon.ico><meta name=keywords content=" study  latex  life  academic "><meta property="og:url" content="https://blog.pi3.fun/post/2024/09/%E5%AF%86%E7%A0%81%E7%AE%A1%E7%90%86%E5%99%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/"><meta property="og:site_name" content="Pi3's Notes"><meta property="og:title" content="密码管理器系统设计与实现"><meta property="og:description" content="密码管理器系统设计与实现"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-09-25T00:00:00+00:00"><meta property="article:modified_time" content="2024-09-25T00:00:00+00:00"><meta property="article:tag" content="技术"><meta property="article:tag" content="Python"><meta property="article:tag" content="Flet"><link rel=canonical href=https://blog.pi3.fun/post/2024/09/%E5%AF%86%E7%A0%81%E7%AE%A1%E7%90%86%E5%99%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/><meta itemprop=name content="密码管理器系统设计与实现"><meta itemprop=description content="密码管理器系统设计与实现"><meta itemprop=datePublished content="2024-09-25T00:00:00+00:00"><meta itemprop=dateModified content="2024-09-25T00:00:00+00:00"><meta itemprop=wordCount content="7163"><meta itemprop=keywords content="技术,Python,Flet"><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/common.css><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/content.css><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/theme.css><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/iconfont/iconfont.css><link rel=stylesheet href=https://blog.pi3.fun/css/syntax/xcode.css data-theme-style=light media="(prefers-color-scheme: light)"><link rel=stylesheet href=https://blog.pi3.fun/css/syntax/catppuccin-mocha.css data-theme-style=dark media="not all"><title>密码管理器系统设计与实现 - Pi3's Notes</title>
<link rel=stylesheet href=https://blog.pi3.fun/css/single.css><link href=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-100-y/KaTeX/0.15.2/katex.min.css rel=stylesheet><script defer src=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-100-y/KaTeX/0.15.2/katex.min.js></script><script defer src=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-100-y/KaTeX/0.15.2/contrib/auto-render.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}],ignoredTags:["script","noscript","style","textarea","pre","code","option"],throwOnError:!1})})</script></head><body><div id=wrapper><header id=header><h1><a href=https://blog.pi3.fun/>Pi3's Notes</a></h1><nav><span class=nav-bar-item><a class=link href=/>文章</a>
</span><span class=nav-bar-item><a class=link href=/post/>归档</a>
</span><span class=nav-bar-item><a class=link href=/about/>关于</a>
</span><span class=nav-bar-item><a class=link href=/links/>友链</a>
</span><span class=nav-bar-item><a class="link theme-toggle" href=javascript:void(0);>黑暗</a></span></nav></header><main id=main class=post><h1>密码管理器系统设计与实现</h1><div><b>Keywords: </b><a class=link href=https://blog.pi3.fun/tags/%E6%8A%80%E6%9C%AF>#技术</a>
<a class=link href=https://blog.pi3.fun/tags/python>#Python</a>
<a class=link href=https://blog.pi3.fun/tags/flet>#Flet</a></div><details><summary><b>Table of Contents</b></summary><div class=toc><nav id=TableOfContents><ul><li><a href=#项目概述>项目概述</a><ul><li><a href=#概述>概述</a></li><li><a href=#术语>术语</a></li></ul></li><li><a href=#项目任务需求>项目任务需求</a><ul><li><a href=#安全性需求>安全性需求</a></li><li><a href=#功能性需求>功能性需求</a></li><li><a href=#性能需求>性能需求</a></li><li><a href=#可用性需求>可用性需求</a></li></ul></li><li><a href=#概要设计>概要设计</a><ul><li><a href=#项目部署图>项目部署图</a></li><li><a href=#系统架构图>系统架构图</a></li><li><a href=#工作流程>工作流程</a></li><li><a href=#数据结构设计>数据结构设计</a></li></ul></li><li><a href=#详细设计>详细设计</a><ul><li><a href=#图形界面模块设计>图形界面模块设计</a></li><li><a href=#数据加密模块设计>数据加密模块设计</a></li><li><a href=#数据库模块设计>数据库模块设计</a></li></ul></li><li><a href=#实验结果与截图>实验结果与截图</a><ul><li><a href=#实验配置>实验配置</a></li><li><a href=#功能测试>功能测试</a></li><li><a href=#项目测试>项目测试</a></li></ul></li><li><a href=#项目总结>项目总结</a></li></ul></nav></div></details><article class=content><p>大学课程设计项目</p><h2 id=项目概述>项目概述</h2><h3 id=概述>概述</h3><p>本项目使用Python语言编写，图形化界面使用Flet框架，实现了Windows和Web平台的多端跨平台特性，后续还会增加更多的平台。本项目使用的Python第三方库包括：</p><ul><li>Flet，用于实现图形化界面</li><li>Pyperclip，用于实现Windows平台的复制功能</li><li>Gvcode，用于实现验证码的生成</li><li>Pycryptodomex，用于实现多种加密算法</li><li>Mysql-connector，用于连接数据库并执行数据库操作</li><li>Pysm4，用于实现SM4国密加密算法</li></ul><h3 id=术语>术语</h3><table><thead><tr><th><strong>术语/缩略词</strong></th><th><strong class=chinese>解释</strong></th></tr></thead><tbody><tr><td>One-time Pad (OTP)</td><td>一次性密码本，一种理论上不可破解的加密算法</td></tr><tr><td>AES-256</td><td>高级加密标准，256位密钥</td></tr><tr><td>ChaCha20</td><td>一种高效安全的流加密算法，256位密钥</td></tr><tr><td>Xchacha20</td><td>ChaCha20的一个变种，增加了密钥流的安全性</td></tr><tr><td>SM4</td><td>一种高安全性和高效率的国密对称加密算法</td></tr><tr><td>PBKDF2</td><td>生成加密密钥的密码派生函数，多轮迭代哈希实现</td></tr><tr><td>ECB</td><td>一种块加密模式，每个块的加密都是独立的</td></tr></tbody></table><h2 id=项目任务需求>项目任务需求</h2><h3 id=安全性需求>安全性需求</h3><ol><li><strong class=chinese>主密钥哈希</strong>：采用SHA3-256算法对主密码进行Hash操作，确保主密码的安全性。</li><li><strong class=chinese>数据加密</strong>：使用AES-256、ChaCha20、Xchacha20以及SM4算法对存储的密码数据进行加密，确保数据的机密性和完整性。</li><li><strong class=chinese>密钥生成</strong>：加密密钥为主密钥通过SHA-256加盐Hash算法利用PBKDF2迭代生成，并混合随机数，保证每次加密都是One-time Pad模式，提高密钥的安全性。</li><li><strong class=chinese>国密算法集成</strong>：在符合国家密码管理局要求的前提下，支持SM4国密算法，后续还支持SM3作为哈希函数。</li></ol><h3 id=功能性需求>功能性需求</h3><ol><li><strong class=chinese>软件界面</strong>：提供一个直观易用的用户界面，支持用户注册、登录、密码管理等功能。</li><li><strong class=chinese>数据条目管理</strong>：实现对密码库中的数据条目（如网站、银行卡、信用卡等）进行增加、删除和搜索的功能。</li><li><strong class=chinese>数据分类</strong>：支持用户自定义数据条目的备注，便于管理和检索。</li><li><strong class=chinese>数据同步</strong>：实现跨设备的数据同步功能，确保用户在不同设备上能够访问到最新的数据。</li><li><strong class=chinese>密码生成器</strong>：提供密码生成器，帮助用户创建复杂且安全的密码。</li><li><strong class=chinese>数据加密</strong>：实现密码的加密和解密功能，确保用户密码以加密形式存储和传输。</li><li><strong class=chinese>数据库设计</strong>：设计并实现数据库结构，以安全地存储用户密码信息和同步数据。</li></ol><h3 id=性能需求>性能需求</h3><ol><li><strong class=chinese>响应时间</strong>：确保在正常网络条件下，用户操作的响应时间不超过 2 秒。</li><li><strong class=chinese>数据同步效率</strong>：数据同步操作应在 2 秒内完成，不影响用户体验。</li><li><strong class=chinese>资源消耗</strong>：应用程序应优化资源使用，避免过度消耗系统资源。</li></ol><h3 id=可用性需求>可用性需求</h3><ol><li><strong class=chinese>多平台支持</strong>：至少在一种平台上实现基本功能，如网页、小程序、浏览器插件、iOS、Android、Windows 等。</li><li><strong class=chinese>用户界面</strong>：提供直观、易用的用户界面，确保用户能够轻松管理和使用密码库。</li><li><strong class=chinese>软件稳定</strong>：提供稳定的服务，确保高可用性，减少系统故障和停机时间。</li></ol><h2 id=概要设计>概要设计</h2><h3 id=项目部署图>项目部署图</h3><p><img src=https://cdn.pi3.fun/blog/%E5%AF%86%E7%A0%81%E7%AE%A1%E7%90%86%E5%99%A8%E9%83%A8%E7%BD%B2%E5%9B%BE.png alt=密码管理器部署图.png></p><h3 id=系统架构图>系统架构图</h3><p><img src=https://cdn.pi3.fun/blog/%E5%AF%86%E7%A0%81%E7%AE%A1%E7%90%86%E5%99%A8%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%9B%BE.png alt=密码管理器系统架构图.png></p><h3 id=工作流程>工作流程</h3><ol><li>用户通过入口页面发起登录或注册请求。</li><li>经过数据加密验证模块验证用户信息，与数据库交互进行身份验证。</li><li>认证成功后，用户进入主界面可以管理密码，包括添加、查询和删除密码信息。同时还支持强密码生成，批量导入导出密码以及切换明暗主题的功能。</li><li>密码信息在数据加密模块通过用户自行选择的加密方式进行加密，加密后的密码信息存储在数据库中。</li><li>用户查询密码时，服务从数据库中检索并解密密码信息，返回给前端页面。</li></ol><h3 id=数据结构设计>数据结构设计</h3><h4 id=关键数据结构>关键数据结构</h4><ol><li>全局系统变量</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 全局主题变量</span>
</span></span><span class=line><span class=cl><span class=n>BGCOLOR</span> <span class=o>=</span> <span class=s1>&#39;#f0f0f0&#39;</span>
</span></span><span class=line><span class=cl><span class=n>THEME</span> <span class=o>=</span> <span class=n>ft</span><span class=o>.</span><span class=n>ThemeMode</span><span class=o>.</span><span class=n>LIGHT</span>
</span></span><span class=line><span class=cl><span class=c1># 状态码</span>
</span></span><span class=line><span class=cl><span class=n>OK</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>ERROR</span> <span class=o>=</span> <span class=o>-</span><span class=mi>1</span>
</span></span></code></pre></div><ol start=2><li>登录页面类</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>LoginPage</span><span class=p>(</span><span class=n>ft</span><span class=o>.</span><span class=n>Column</span><span class=p>)</span>
</span></span></code></pre></div><ol start=3><li>注册页面类</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>RegisterPage</span><span class=p>(</span><span class=n>ft</span><span class=o>.</span><span class=n>Column</span><span class=p>)</span>
</span></span></code></pre></div><ol start=4><li>添加密码信息弹窗类</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>AddPwdDialog</span> <span class=p>(</span><span class=n>ft</span><span class=o>.</span> <span class=n>AlertDialog</span><span class=p>)</span>
</span></span></code></pre></div><ol start=5><li>密码信息类</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>PwdRow</span> <span class=p>(</span><span class=n>ft</span><span class=o>.</span> <span class=n>DataRow</span><span class=p>)</span>
</span></span></code></pre></div><ol start=6><li>主页面类</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>MainPage</span> <span class=p>(</span><span class=n>ft</span><span class=o>.</span> <span class=n>Column</span><span class=p>)</span>
</span></span></code></pre></div><ol start=7><li>页面配置</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>main_page</span> <span class=p>(</span><span class=n>page</span><span class=p>:</span> <span class=p>{</span><span class=n>clean</span><span class=p>,</span> <span class=n>window</span><span class=p>,</span> <span class=n>add</span><span class=p>,</span> <span class=n>update</span><span class=p>,</span> <span class=n>on_disconnect</span><span class=p>},</span>
</span></span><span class=line><span class=cl>	<span class=n>current_user</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=n>current_key</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</span></span></code></pre></div><h4 id=数据库设计>数据库设计</h4><ol><li>用户表设计</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>username</span><span class=w> </span><span class=nb>VARCHAR</span><span class=w> </span><span class=p>(</span><span class=mi>255</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>password_hash</span><span class=w> </span><span class=nb>VARCHAR</span><span class=w> </span><span class=p>(</span><span class=mi>255</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>created_at</span><span class=w> </span><span class=k>TIMESTAMP</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=k>CURRENT_TIMESTAMP</span><span class=w>
</span></span></span></code></pre></div><ol start=2><li>密码信息表设计</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>username</span><span class=w> </span><span class=nb>VARCHAR</span><span class=w> </span><span class=p>(</span><span class=mi>255</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>website_name</span><span class=w> </span><span class=nb>VARCHAR</span><span class=w> </span><span class=p>(</span><span class=mi>150</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>website</span><span class=w> </span><span class=nb>VARCHAR</span><span class=w> </span><span class=p>(</span><span class=mi>150</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>account</span><span class=w> </span><span class=nb>VARCHAR</span><span class=w> </span><span class=p>(</span><span class=mi>150</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>password_encrypted</span><span class=w> </span><span class=nb>VARCHAR</span><span class=w> </span><span class=p>(</span><span class=mi>255</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>encrypted_method</span><span class=w> </span><span class=nb>VARCHAR</span><span class=w> </span><span class=p>(</span><span class=mi>50</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>note</span><span class=w> </span><span class=nb>TEXT</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>created_at</span><span class=w> </span><span class=k>TIMESTAMP</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=k>CURRENT_TIMESTAMP</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>username</span><span class=p>,</span><span class=w> </span><span class=n>website_name</span><span class=p>,</span><span class=w> </span><span class=n>account</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>username</span><span class=p>)</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=k>user</span><span class=w> </span><span class=p>(</span><span class=n>username</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><h2 id=详细设计>详细设计</h2><h3 id=图形界面模块设计>图形界面模块设计</h3><h4 id=模块概述>模块概述</h4><p>在这一部分，主要是详细描述密码管理器应用程序的图形用户界面（GUI）设计，包括模块内详细算法设计、伪代码、流程图和详细接口。</p><p>我们设计这个图形化界面的原则是用户友好的，界面简洁直观，易于新用户学习和使用。</p><h4 id=伪代码>伪代码</h4><ol><li>登录页面类</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 登录页面类</span>
</span></span><span class=line><span class=cl><span class=n>LoginPage</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>初始化</span><span class=err>：</span><span class=n>设置标题</span><span class=err>、</span><span class=n>用户名和密码输入框</span><span class=err>、</span><span class=n>登录和注册按钮</span><span class=err>、</span><span class=n>错误弹窗</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>登录按钮点击事件</span><span class=err>：</span><span class=n>检查用户名和密码</span><span class=err>，</span><span class=n>验证成功后进入主页面</span><span class=err>，</span><span class=n>失败则显示错误弹窗</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>注册按钮点击事件</span><span class=err>：</span><span class=n>跳转到注册页面</span>
</span></span></code></pre></div><ol start=2><li>注册页面类</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 注册页面类</span>
</span></span><span class=line><span class=cl><span class=n>RegisterPage</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>初始化</span><span class=err>：</span><span class=n>设置标题</span><span class=err>、</span><span class=n>用户名和密码输入框</span><span class=err>、</span><span class=n>验证码</span><span class=err>、</span><span class=n>注册和取消按钮</span><span class=err>、</span><span class=n>各种错误弹窗和成功弹窗</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>注册按钮点击事件</span><span class=err>：</span><span class=n>验证输入信息和验证码</span><span class=err>，</span><span class=n>成功后添加用户到数据库并跳转到登录页面</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>取消按钮点击事件</span><span class=err>：</span><span class=n>返回到主页面</span>
</span></span></code></pre></div><ol start=3><li>添加密码信息弹窗类</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 添加密码信息弹窗类</span>
</span></span><span class=line><span class=cl><span class=n>AddPwdDialog</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>初始化</span><span class=err>：</span><span class=n>设置标题</span><span class=err>、</span><span class=n>密码信息输入框</span><span class=err>、</span><span class=n>保存和取消按钮</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>随机生成密码</span><span class=err>：</span><span class=n>生成一个强密码</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>保存按钮点击事件</span><span class=err>：</span><span class=n>验证输入信息</span><span class=err>，</span><span class=n>加密密码后保存到数据库</span><span class=err>，</span><span class=n>更新密码列表</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>取消按钮点击事件</span><span class=err>：</span><span class=n>关闭弹窗</span>
</span></span></code></pre></div><ol start=4><li>密码信息类</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 密码信息类</span>
</span></span><span class=line><span class=cl><span class=n>PwdRow</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>初始化</span><span class=err>：</span><span class=n>设置密码信息的显示</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>删除按钮点击事件</span><span class=err>：</span><span class=n>显示删除确认弹窗</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>删除确认弹窗确定按钮</span><span class=err>：</span><span class=n>从数据库和界面上删除密码信息</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>删除确认弹窗取消按钮</span><span class=err>：</span><span class=n>关闭删除确认弹窗</span>
</span></span></code></pre></div><ol start=5><li>主页面类</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 主页面类</span>
</span></span><span class=line><span class=cl><span class=n>MainPage</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>初始化</span><span class=err>：</span><span class=n>设置添加密码按钮</span><span class=err>、</span><span class=n>搜索框</span><span class=err>、</span><span class=n>批量导入导出按钮</span><span class=err>、</span><span class=n>密码信息表</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>添加密码按钮点击事件</span><span class=err>：</span><span class=n>打开添加密码信息弹窗</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>搜索框提交事件</span><span class=err>：</span><span class=n>根据关键词搜索密码信息并更新列表</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>删除密码表格信息</span><span class=err>：</span><span class=n>从数据库和界面上删除密码信息</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>复制单元格内容</span><span class=err>：</span><span class=n>复制选中的单元格内容到剪贴板</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>导出密码点击事件</span><span class=err>：</span><span class=n>打开导出密码信息弹窗</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>导入密码点击事件</span><span class=err>：</span><span class=n>打开导入密码信息弹窗</span>
</span></span></code></pre></div><ol start=6><li>切换明暗主题函数</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 切换明暗主题函数</span>
</span></span><span class=line><span class=cl><span class=n>change_theme</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>切换应用程序的主题模式和背景颜色</span>
</span></span></code></pre></div><ol start=7><li>主页面函数</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 主页面函数</span>
</span></span><span class=line><span class=cl><span class=n>main_page</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>设置页面属性</span><span class=err>，</span><span class=n>如大小</span><span class=err>、</span><span class=n>位置</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>添加主页面对象到页面</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>更新页面</span>
</span></span></code></pre></div><ol start=8><li>注册页面函数</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 注册页面函数</span>
</span></span><span class=line><span class=cl><span class=n>Register_page</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>设置页面属性</span><span class=err>，</span><span class=n>如大小</span><span class=err>、</span><span class=n>位置</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>添加注册页面对象到页面</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>更新页面</span>
</span></span></code></pre></div><ol start=9><li>登录页面函数</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 登录页面函数</span>
</span></span><span class=line><span class=cl><span class=n>main</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>设置页面属性</span><span class=err>，</span><span class=n>如大小</span><span class=err>、</span><span class=n>位置</span><span class=err>、</span><span class=n>标题</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>添加登录页面对象到页面</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=n>更新页面</span>
</span></span></code></pre></div><h4 id=流程图>流程图</h4><p>登录逻辑流程图</p><p><img src=https://cdn.pi3.fun/blog/export.png alt=export.png></p><p>注册逻辑流程图</p><p><img src=https://cdn.pi3.fun/blog/export1.png alt=export1.png></p><p>添加密码信息流程图</p><p><img src=https://cdn.pi3.fun/blog/export%20(2).png alt="export (2).png"></p><p>删除密码信息流程图</p><p><img src=https://cdn.pi3.fun/blog/export5.png alt=export5.png></p><p>导入数据流程图</p><p><img src=https://cdn.pi3.fun/blog/export6.png alt=export6.png></p><p>导出数据流程图</p><p><img src=https://cdn.pi3.fun/blog/export5.png alt></p><h3 id=数据加密模块设计>数据加密模块设计</h3><h4 id=模块概述-1>模块概述</h4><p>密码模块是密码管理器的核心部分，负责加密、解密、生成和验证密码。该模块确保用户数据的安全性和隐私性。</p><p>本项目的密码模块支持多种加密算法，同时还集成由国密算法，并且实现了哈希函数以及密钥派生函数，使得整个系统具有十分高的安全性。</p><p>支持的密码算法：AES-256、ChaCha20、Xchacha20、SM4-ECB。</p><p>支持的哈希和派生算法：SHA-256、SHA3-256、PBKDF2。</p><p>后续还会支持更多的密码学算法，以进一步加强软件的安全性。</p><p>在这个模块中我们把用户登录软件的密钥作为整个密码存储库的主密钥，所有的密码信息都是靠这个主密钥进行加解密，这样使用户在使用我们软件的时候对于后端的数据加解密操作是无感的，因为他登录进软件后，不需要再次输入加解密的密钥，这也符合我们软件的设计原则：用户友好的。</p><p>为了解决整个密码库都使用同一个主密钥使得安全性不高的问题，我们进行了如下的设计：</p><ol><li>用户的主密钥使用SHA3-256哈希处理后放入数据库中，保护主密钥。</li><li>用于加密密码信息的密钥是通过主密钥使用PBKDF2密钥派生函数，以加盐的SHA-256作为其中的哈希函数，迭代10000轮后生成的。</li><li>在本项目支持的密码算法中，AES-256、ChaCha20和Xchacha20在实际过程中会混合进随机数，相当于每次加密都使用不同的密钥，因此即使是使用相同明文加密多次，每次生成的密文都会不同，通过这种方式，我们软件实现了接近一次一密(One-time Pad)的加密方式，使得整个系统的安全性大幅提升。</li></ol><p>用户可以自定义选择密码信息使用的加密算法。但我们更推荐AES-256、ChaCha20和Xchacha20作为加密算法。</p><h4 id=伪代码-1>伪代码</h4><ol><li>SHA 3-256</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 使用 SHA 3-256 哈希算法对数据进行哈希</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>sha</span> <span class=mi>3_256</span> <span class=p>(</span><span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>data</span> <span class=n>的</span> <span class=n>SHA</span> <span class=mi>3</span><span class=o>-</span><span class=mi>256</span> <span class=n>哈希值</span>
</span></span></code></pre></div><ol start=2><li>PKBDF 2</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 使用 PBKDF 2 算法和 SHA 256 哈希函数生成密钥</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>pbkdf</span> <span class=mi>2</span> <span class=p>(</span><span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>salt</span> <span class=o>=</span> <span class=n>固定的盐值</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>data</span> <span class=n>使用</span> <span class=n>SHA</span> <span class=mi>256</span> <span class=n>和</span> <span class=n>salt</span> <span class=n>进行</span> <span class=n>PBKDF</span> <span class=mi>2</span> <span class=n>迭代</span> <span class=mi>10000</span> <span class=n>次的哈希值</span>
</span></span></code></pre></div><ol start=3><li>AES-256</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 使用 AES-256 算法加密数据</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>aes_encrypt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>key</span> <span class=o>=</span> <span class=n>将</span> <span class=n>key</span> <span class=n>转换为字节</span>
</span></span><span class=line><span class=cl>    <span class=n>cipher</span> <span class=o>=</span> <span class=n>创建</span> <span class=n>AES</span> <span class=n>加密器</span>
</span></span><span class=line><span class=cl>    <span class=n>nonce</span> <span class=o>=</span> <span class=n>cipher</span> <span class=n>的随机数</span>
</span></span><span class=line><span class=cl>    <span class=n>ciphertext</span><span class=p>,</span> <span class=n>tag</span> <span class=o>=</span> <span class=n>cipher</span> <span class=n>加密</span> <span class=n>data</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>nonce</span> <span class=o>+</span> <span class=n>tag</span> <span class=o>+</span> <span class=n>ciphertext</span> <span class=n>的十六进制字符串</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 使用 AES-256 算法解密数据</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>aes_decrypt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>key</span> <span class=o>=</span> <span class=n>将</span> <span class=n>key</span> <span class=n>转换为字节</span>
</span></span><span class=line><span class=cl>    <span class=n>nonce</span> <span class=o>=</span> <span class=n>从</span> <span class=n>data</span> <span class=n>中提取</span> <span class=n>nonce</span>
</span></span><span class=line><span class=cl>    <span class=n>tag</span> <span class=o>=</span> <span class=n>从</span> <span class=n>data</span> <span class=n>中提取</span> <span class=n>tag</span>
</span></span><span class=line><span class=cl>    <span class=n>ciphertext</span> <span class=o>=</span> <span class=n>从</span> <span class=n>data</span> <span class=n>中提取</span> <span class=n>ciphertext</span>
</span></span><span class=line><span class=cl>    <span class=n>cipher</span> <span class=o>=</span> <span class=n>创建</span> <span class=n>AES</span> <span class=n>解密器</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>cipher</span> <span class=n>解密</span> <span class=n>ciphertext</span> <span class=n>并验证</span> <span class=n>tag</span> <span class=n>得到的原始数据</span>
</span></span></code></pre></div><ol start=4><li>ChaCha 20</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 使用 ChaCha 20 算法加密数据</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>chacha</span> <span class=mi>20</span><span class=n>_encrypt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>key</span> <span class=o>=</span> <span class=n>将</span> <span class=n>key</span> <span class=n>转换为字节</span>
</span></span><span class=line><span class=cl>    <span class=n>nonce</span> <span class=o>=</span> <span class=n>生成</span> <span class=mi>12</span> <span class=n>字节随机数</span>
</span></span><span class=line><span class=cl>    <span class=n>cipher</span> <span class=o>=</span> <span class=n>创建</span> <span class=n>ChaCha</span> <span class=mi>20</span> <span class=n>加密器</span>
</span></span><span class=line><span class=cl>    <span class=n>ciphertext</span> <span class=o>=</span> <span class=n>cipher</span> <span class=n>加密</span> <span class=n>data</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>nonce</span> <span class=o>+</span> <span class=n>ciphertext</span> <span class=n>的十六进制字符串</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 使用 ChaCha 20 算法解密数据</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>chacha</span> <span class=mi>20</span><span class=n>_decrypt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>key</span> <span class=o>=</span> <span class=n>将</span> <span class=n>key</span> <span class=n>转换为字节</span>
</span></span><span class=line><span class=cl>    <span class=n>nonce</span> <span class=o>=</span> <span class=n>从</span> <span class=n>data</span> <span class=n>中提取</span> <span class=n>nonce</span>
</span></span><span class=line><span class=cl>    <span class=n>ciphertext</span> <span class=o>=</span> <span class=n>从</span> <span class=n>data</span> <span class=n>中提取</span> <span class=n>ciphertext</span>
</span></span><span class=line><span class=cl>    <span class=n>cipher</span> <span class=o>=</span> <span class=n>创建</span> <span class=n>ChaCha</span> <span class=mi>20</span> <span class=n>解密器</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>cipher</span> <span class=n>解密</span> <span class=n>ciphertext</span> <span class=n>得到的原始数据</span>
</span></span></code></pre></div><ol start=5><li>Xchacha 20</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 使用 XChaCha 20 算法加密数据（与 ChaCha 20 类似，但使用 24 字节的 nonce）</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>xchacha</span> <span class=mi>20</span><span class=n>_encrypt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=o>...</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 使用 XChaCha 20 算法解密数据（与 ChaCha 20 类似，但使用 24 字节的 nonce）</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>xchacha</span> <span class=mi>20</span><span class=n>_decrypt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=o>...</span>
</span></span></code></pre></div><ol start=6><li>SM 4-ECB</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 使用 SM 4 算法加密数据</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>sm</span> <span class=mi>4</span><span class=n>_encrypt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>如果</span> <span class=n>key</span> <span class=n>超过</span> <span class=mi>16</span> <span class=n>字节</span><span class=err>，</span><span class=n>则截断</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>使用</span> <span class=n>ECB</span> <span class=n>模式加密</span> <span class=n>data</span> <span class=n>得到的十六进制字符串</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 使用 SM 4 算法解密数据</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>sm</span> <span class=mi>4</span><span class=n>_decrypt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>如果</span> <span class=n>key</span> <span class=n>超过</span> <span class=mi>16</span> <span class=n>字节</span><span class=err>，</span><span class=n>则截断</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>使用</span> <span class=n>ECB</span> <span class=n>模式解密</span> <span class=n>data</span> <span class=n>得到的原始数据</span>
</span></span></code></pre></div><ol start=7><li>随机生成强密码</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 随机生成强密码</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>random_password</span> <span class=p>(</span><span class=n>length</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>alphabet</span> <span class=o>=</span> <span class=n>字母</span><span class=o>+</span><span class=n>数字</span><span class=o>+</span><span class=n>特殊字符</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>随机选择</span> <span class=n>alphabet</span> <span class=n>中的字符生成指定长度的密码</span>
</span></span></code></pre></div><ol start=8><li>导入数据</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 从 JSON 文件导入密码信息</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>import_password_from_json</span> <span class=p>(</span><span class=n>username</span><span class=p>,</span> <span class=n>file_path</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>尝试从</span> <span class=n>JSON</span> <span class=n>文件读取数据并过滤出</span> <span class=n>username</span> <span class=n>匹配的数据</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 从 CSV 文件导入密码信息</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>import_password_from_csv</span> <span class=p>(</span><span class=n>username</span><span class=p>,</span> <span class=n>file_path</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>尝试从</span> <span class=n>CSV</span> <span class=n>文件读取数据并过滤出</span> <span class=n>username</span> <span class=n>匹配的数据</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 从 TXT 文件导入密码信息</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>import_password_from_txt</span> <span class=p>(</span><span class=n>username</span><span class=p>,</span> <span class=n>file_path</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>尝试从</span> <span class=n>TXT</span> <span class=n>文件读取数据并过滤出</span> <span class=n>username</span> <span class=n>匹配的数据</span>
</span></span></code></pre></div><ol start=9><li>导出数据</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 将密码信息导出为 JSON 格式</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>export_password_to_json</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>username</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>dir_path</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>key</span> <span class=o>=</span> <span class=n>使用</span> <span class=n>PBKDF</span> <span class=mi>2</span> <span class=n>算法生成密钥</span>
</span></span><span class=line><span class=cl>    <span class=n>尝试将</span> <span class=n>data</span> <span class=n>转换为</span> <span class=n>JSON</span> <span class=n>格式并保存到文件</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 将密码信息导出为 CSV 格式</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>export_password_to_csv</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>username</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>dir_path</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>key</span> <span class=o>=</span> <span class=n>使用</span> <span class=n>PBKDF</span> <span class=mi>2</span> <span class=n>算法生成密钥</span>
</span></span><span class=line><span class=cl>    <span class=n>尝试将</span> <span class=n>data</span> <span class=n>转换为</span> <span class=n>CSV</span> <span class=n>格式并保存到文件</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 将密码信息导出为 TXT 格式</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>export_password_to_txt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>username</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>dir_path</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>key</span> <span class=o>=</span> <span class=n>使用</span> <span class=n>PBKDF</span> <span class=mi>2</span> <span class=n>算法生成密钥</span>
</span></span><span class=line><span class=cl>    <span class=n>尝试将</span> <span class=n>data</span> <span class=n>转换为</span> <span class=n>TXT</span> <span class=n>格式并保存到文件</span>
</span></span></code></pre></div><h4 id=流程图-1>流程图</h4><p><img src=https://cdn.pi3.fun/blog/20240928175129.png alt=image.png></p><h4 id=详细接口>详细接口</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 数据加密接口</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>data_encrypt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>algorithm</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>algorithm</span> <span class=o>==</span> <span class=s1>&#39;AES-256&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>aes_encrypt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>algorithm</span> <span class=o>==</span> <span class=s1>&#39;ChaCha 20&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>chacha</span> <span class=mi>20</span><span class=n>_encrypt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>algorithm</span> <span class=o>==</span> <span class=s1>&#39;XChaCha 20&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>xchacha</span> <span class=mi>20</span><span class=n>_encrypt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>algorithm</span> <span class=o>==</span> <span class=s1>&#39;SM 4-ECB&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>sm</span> <span class=mi>4</span><span class=n>_encrypt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 数据解密接口</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>data_decrypt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>algorithm</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>algorithm</span> <span class=o>==</span> <span class=s1>&#39;AES-256&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>aes_decrypt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>algorithm</span> <span class=o>==</span> <span class=s1>&#39;ChaCha 20&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>chacha</span> <span class=mi>20</span><span class=n>_decrypt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>algorithm</span> <span class=o>==</span> <span class=s1>&#39;XChaCha 20&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>xchacha</span> <span class=mi>20</span><span class=n>_decrypt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>algorithm</span> <span class=o>==</span> <span class=s1>&#39;SM 4-ECB&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>sm</span> <span class=mi>4</span><span class=n>_decrypt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 导出数据接口</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>export_password</span> <span class=p>(</span><span class=n>data</span><span class=p>:</span> <span class=nb>list</span><span class=p>,</span> <span class=n>username</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>dir_path</span><span class=p>,</span> <span class=n>export_format</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>export_format</span> <span class=o>==</span> <span class=s1>&#39;JSON&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>export_password_to_json</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>username</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>dir_path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>export_format</span> <span class=o>==</span> <span class=s1>&#39;CSV&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>export_password_to_csv</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>username</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>dir_path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>export_format</span> <span class=o>==</span> <span class=s1>&#39;TXT&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>export_password_to_txt</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>username</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>dir_path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>ERROR</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 导入数据接口</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>import_password</span> <span class=p>(</span><span class=n>username</span><span class=p>,</span> <span class=n>file_path</span><span class=p>,</span> <span class=n>import_format</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>import_format</span> <span class=o>==</span> <span class=s1>&#39;JSON&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>import_password_from_json</span> <span class=p>(</span><span class=n>username</span><span class=p>,</span> <span class=n>file_path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>import_format</span> <span class=o>==</span> <span class=s1>&#39;CSV&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>import_password_from_csv</span> <span class=p>(</span><span class=n>username</span><span class=p>,</span> <span class=n>file_path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>import_format</span> <span class=o>==</span> <span class=s1>&#39;TXT&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>import_password_from_txt</span> <span class=p>(</span><span class=n>username</span><span class=p>,</span> <span class=n>file_path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>ERROR</span>
</span></span></code></pre></div><h3 id=数据库模块设计>数据库模块设计</h3><h4 id=模块概述-2>模块概述</h4><p>数据库模块负责安全存储用户的敏感信息，用户名、密码信息。在本项目中，数据库模块的操作较少，相较数据加密模块来说更为简单，但是为了实现跨平台的多端同步，我们将数据库部署在远程服务器上，因此需要注意数据库的本身的防护，设置强密码，开启权限控制，提高数据库的安全性。而在数据库之内，由于数据都是加密处理过后的，因此数据都比较安全，数据库模块设计的重点在于数据库表的设计，以及数据库的操作。</p><p>用户表</p><table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>username</td><td>varchar(255)</td><td>主键，不能为空</td></tr><tr><td>password_hash</td><td>varchar(255)</td><td>不能为空</td></tr><tr><td>created_at</td><td>datetime</td><td>自动填入当前时间</td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>username</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>255</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>password_hash</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>255</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>created_at</span><span class=w> </span><span class=k>TIMESTAMP</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=k>CURRENT_TIMESTAMP</span><span class=w>
</span></span></span></code></pre></div><p>密码表</p><table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>username</td><td>varchar(255)</td><td>外键连接用户表，不能为空</td></tr><tr><td>website_name</td><td>varchar(255)</td><td>不能为空</td></tr><tr><td>website</td><td>varchar(255)</td><td></td></tr><tr><td>account</td><td>varchar(255)</td><td>不能为空</td></tr><tr><td>password_encrypted</td><td>varchar(255)</td><td>不能为空</td></tr><tr><td>encrypted_method</td><td>varchar(50)</td><td>不能为空</td></tr><tr><td>note</td><td>text</td><td></td></tr><tr><td>created_at</td><td>datetime</td><td>自动填入当前时间</td></tr><tr><td>(username, website_name, account)为主键</td><td></td><td></td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>username</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>255</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>website_name</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>255</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>website</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>255</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>account</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>255</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>password_encrypted</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>255</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>encrypted_method</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>note</span><span class=w> </span><span class=nb>TEXT</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>created_at</span><span class=w> </span><span class=k>TIMESTAMP</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=k>CURRENT_TIMESTAMP</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>username</span><span class=p>,</span><span class=w> </span><span class=n>website_name</span><span class=p>,</span><span class=w> </span><span class=n>account</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>username</span><span class=p>)</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=k>user</span><span class=p>(</span><span class=n>username</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><h4 id=详细接口-1>详细接口</h4><ol><li>创建数据库连接</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>create_connection</span> <span class=p>(</span><span class=n>HOST_NAME</span><span class=p>,</span> <span class=n>USER_NAME</span><span class=p>,</span> <span class=n>USER_PASSWORD</span><span class=p>,</span> <span class=n>DB_NAME</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>尝试连接到数据库</span>
</span></span><span class=line><span class=cl>    <span class=n>如果连接成功</span>
</span></span><span class=line><span class=cl>	<span class=n>记录日志信息</span> <span class=s2>&#34;Connection to DB successful&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>否则</span>
</span></span><span class=line><span class=cl>	<span class=n>记录错误日志</span> <span class=s2>&#34;Create connection error: </span><span class=si>{错误信息}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>返回连接对象</span>
</span></span></code></pre></div><ol start=2><li>关闭数据库连接</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>close_connection</span> <span class=p>(</span><span class=n>连接对象</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>如果连接对象不为空</span>
</span></span><span class=line><span class=cl>        <span class=n>关闭连接</span>
</span></span><span class=line><span class=cl>        <span class=n>记录日志信息</span> <span class=s2>&#34;Connection closed&#34;</span>
</span></span></code></pre></div><ol start=3><li>根据用户名查询用户信息</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>query_user</span> <span class=p>(</span><span class=n>连接对象</span><span class=p>,</span> <span class=n>用户名</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>创建游标</span>
</span></span><span class=line><span class=cl>    <span class=n>尝试执行查询语句</span>
</span></span><span class=line><span class=cl>    <span class=n>如果查询结果为空</span>
</span></span><span class=line><span class=cl>        <span class=n>返回</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=n>否则</span>
</span></span><span class=line><span class=cl>        <span class=n>返回查询到的第一个结果的密码</span>
</span></span><span class=line><span class=cl>    <span class=n>捕获异常并记录错误日志</span>
</span></span><span class=line><span class=cl>    <span class=n>关闭游标</span>
</span></span></code></pre></div><ol start=4><li>插入用户信息</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>insert_user</span> <span class=p>(</span><span class=n>连接对象</span><span class=p>,</span> <span class=n>用户名</span><span class=p>,</span> <span class=n>密码哈希</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>创建游标</span>
</span></span><span class=line><span class=cl>    <span class=n>尝试执行插入语句</span>
</span></span><span class=line><span class=cl>    <span class=n>提交事务</span>
</span></span><span class=line><span class=cl>    <span class=n>如果成功</span>
</span></span><span class=line><span class=cl>        <span class=n>返回</span> <span class=n>OK</span>
</span></span><span class=line><span class=cl>    <span class=n>否则</span>
</span></span><span class=line><span class=cl>        <span class=n>记录错误日志</span>
</span></span><span class=line><span class=cl>        <span class=n>返回</span> <span class=n>ERROR</span>
</span></span><span class=line><span class=cl>    <span class=n>关闭游标</span>
</span></span></code></pre></div><ol start=5><li>查询用户的密码信息</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>query_password</span> <span class=p>(</span><span class=n>连接对象</span><span class=p>,</span> <span class=n>用户名</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>创建游标</span>
</span></span><span class=line><span class=cl>    <span class=n>尝试执行查询语句</span>
</span></span><span class=line><span class=cl>    <span class=n>如果查询结果为空</span>
</span></span><span class=line><span class=cl>        <span class=n>返回</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=n>否则</span>
</span></span><span class=line><span class=cl>        <span class=n>将查询结果转换为字典列表</span>
</span></span><span class=line><span class=cl>        <span class=n>返回字典列表</span>
</span></span><span class=line><span class=cl>    <span class=n>捕获异常并记录错误日志</span>
</span></span><span class=line><span class=cl>    <span class=n>关闭游标</span>
</span></span></code></pre></div><ol start=6><li>插入用户的密码信息</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>insert_password</span> <span class=p>(</span><span class=n>连接对象</span><span class=p>,</span> <span class=n>用户名</span><span class=p>,</span> <span class=n>网站名称</span><span class=p>,</span> <span class=n>网站</span><span class=p>,</span> <span class=n>账号</span><span class=p>,</span> <span class=n>加密密码</span><span class=p>,</span> <span class=n>加密方法</span><span class=p>,</span> <span class=n>备注</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>创建游标</span>
</span></span><span class=line><span class=cl>    <span class=n>尝试执行插入语句</span>
</span></span><span class=line><span class=cl>    <span class=n>提交事务</span>
</span></span><span class=line><span class=cl>    <span class=n>如果成功</span>
</span></span><span class=line><span class=cl>        <span class=n>返回</span> <span class=n>OK</span>
</span></span><span class=line><span class=cl>    <span class=n>否则</span>
</span></span><span class=line><span class=cl>        <span class=n>记录错误日志</span>
</span></span><span class=line><span class=cl>        <span class=n>返回</span> <span class=n>ERROR</span>
</span></span><span class=line><span class=cl>    <span class=n>关闭游标</span>
</span></span></code></pre></div><ol start=7><li>根据用户名、网站名和账号查询密码创建时间</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>query_password_created_at</span> <span class=p>(</span><span class=n>连接对象</span><span class=p>,</span> <span class=n>用户名</span><span class=p>,</span> <span class=n>网站名称</span><span class=p>,</span> <span class=n>账号</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>创建游标</span>
</span></span><span class=line><span class=cl>    <span class=n>尝试执行查询语句</span>
</span></span><span class=line><span class=cl>    <span class=n>如果查询结果为空</span>
</span></span><span class=line><span class=cl>        <span class=n>返回</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=n>否则</span>
</span></span><span class=line><span class=cl>        <span class=n>返回查询到的第一个结果的创建时间</span>
</span></span><span class=line><span class=cl>    <span class=n>捕获异常并记录错误日志</span>
</span></span><span class=line><span class=cl>    <span class=n>关闭游标</span>
</span></span></code></pre></div><ol start=8><li>删除用户的密码信息</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>delete_password</span> <span class=p>(</span><span class=n>连接对象</span><span class=p>,</span> <span class=n>用户名</span><span class=p>,</span> <span class=n>网站名称</span><span class=p>,</span> <span class=n>账号</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>创建游标</span>
</span></span><span class=line><span class=cl>    <span class=n>尝试执行删除语句</span>
</span></span><span class=line><span class=cl>    <span class=n>提交事务</span>
</span></span><span class=line><span class=cl>    <span class=n>如果成功</span>
</span></span><span class=line><span class=cl>        <span class=n>返回</span> <span class=n>OK</span>
</span></span><span class=line><span class=cl>    <span class=n>否则</span>
</span></span><span class=line><span class=cl>        <span class=n>记录错误日志</span>
</span></span><span class=line><span class=cl>        <span class=n>返回</span> <span class=n>ERROR</span>
</span></span><span class=line><span class=cl>    <span class=n>关闭游标</span>
</span></span></code></pre></div><ol start=9><li>根据关键词搜索密码信息</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>search_password</span> <span class=p>(</span><span class=n>连接对象</span><span class=p>,</span> <span class=n>用户名</span><span class=p>,</span> <span class=n>关键词</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>如果关键词为空</span>
</span></span><span class=line><span class=cl>        <span class=n>调用</span> <span class=n>query_password</span> <span class=n>函数</span>
</span></span><span class=line><span class=cl>    <span class=n>否则</span>
</span></span><span class=line><span class=cl>        <span class=n>分割关键词</span>
</span></span><span class=line><span class=cl>        <span class=n>构建</span> <span class=n>SQL</span> <span class=n>查询语句</span>
</span></span><span class=line><span class=cl>        <span class=n>执行查询</span>
</span></span><span class=line><span class=cl>        <span class=n>如果查询结果为空</span>
</span></span><span class=line><span class=cl>            <span class=n>返回</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>        <span class=n>否则</span>
</span></span><span class=line><span class=cl>            <span class=n>将查询结果转换为字典列表</span>
</span></span><span class=line><span class=cl>            <span class=n>返回字典列表</span>
</span></span><span class=line><span class=cl>    <span class=n>捕获异常并记录错误日志</span>
</span></span></code></pre></div><h2 id=实验结果与截图>实验结果与截图</h2><h3 id=实验配置>实验配置</h3><ul><li>Windows 平台<ul><li>机器型号：CPU AMD Ryzen 7 5700 U with Radeon Graphics 1.80 GHz, RAM 16 GB</li><li>操作系统：Windows 10 64 位企业版 22 H 2 19045.4894</li></ul></li><li>Web 平台<ul><li>机器型号：阿里云 ECS CPU 2 核心 RAM 2 GB</li><li>操作系统：Debian 11.9 64 位</li></ul></li><li>远程数据库<ul><li>10.5.23-MariaDB-0+deb11u1</li></ul></li></ul><h3 id=功能测试>功能测试</h3><h4 id=windows-平台>Windows 平台</h4><p>软件详细信息</p><p><img src=https://cdn.pi3.fun/blog/20240928190911.png alt=image.png></p><p>登录界面</p><p><img src=https://cdn.pi3.fun/blog/20240928190925.png alt=image.png></p><p>注册界面</p><p><img src=https://cdn.pi3.fun/blog/20240928190935.png alt=image.png></p><p>主界面</p><p><img src=https://cdn.pi3.fun/blog/20240928190943.png alt=image.png></p><p>暗色主题</p><p><img src=https://cdn.pi3.fun/blog/20240928191035.png alt=image.png></p><p>点击单元格复制信息</p><p><img src=https://cdn.pi3.fun/blog/20240928191048.png alt=image.png></p><p>添加密码信息界面</p><p><img src=https://cdn.pi3.fun/blog/20240928191058.png alt=image.png></p><p>新添加的密码信息</p><p><img src=https://cdn.pi3.fun/blog/20240928191115.png alt=image.png></p><p>删除密码信息弹窗</p><p><img src=https://cdn.pi3.fun/blog/20240928191128.png alt=image.png></p><p>搜索功能展示</p><p><img src=https://cdn.pi3.fun/blog/20240928191137.png alt=image.png></p><p>导出功能弹窗</p><p><img src=https://cdn.pi3.fun/blog/20240928191149.png alt=image.png></p><p>导出 Json 格式的数据</p><p><img src=https://cdn.pi3.fun/blog/20240928191201.png alt=image.png></p><p>导入功能弹窗</p><p><img src=https://cdn.pi3.fun/blog/20240928191210.png alt=image.png></p><p>导入信息提示</p><p><img src=https://cdn.pi3.fun/blog/20240928191219.png alt=image.png></p><h4 id=web-端>Web 端</h4><p>网页端登录界面</p><p><img src=https://cdn.pi3.fun/blog/20240928191236.png alt=image.png></p><p>网页端注册界面</p><p><img src=https://cdn.pi3.fun/blog/20240928191246.png alt=image.png></p><p>网页端主界面</p><p><img src=https://cdn.pi3.fun/blog/20240928191255.png alt=image.png></p><p>网页端的所有功能均与Windows平台的功能完全一致。这里不再进行详细的展示和阐述。</p><h3 id=项目测试>项目测试</h3><h4 id=性能测试>性能测试</h4><p>完整测试代码：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>data_encrypt</span> <span class=k>as</span> <span class=nn>de</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>database_op</span> <span class=k>as</span> <span class=nn>db</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 各部分性能测试</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 数据加密性能测试</span>
</span></span><span class=line><span class=cl><span class=c1># SHA3-256</span>
</span></span><span class=line><span class=cl><span class=n>time_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>hash_sha3</span> <span class=o>=</span> <span class=n>de</span><span class=o>.</span><span class=n>sha3_256</span><span class=p>(</span><span class=s1>&#39;123456&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;SHA3-256 time: </span><span class=si>{</span><span class=n>time_end</span> <span class=o>-</span> <span class=n>time_start</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># PBKDF2</span>
</span></span><span class=line><span class=cl><span class=n>time_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>hash_pbkdf2</span> <span class=o>=</span> <span class=n>de</span><span class=o>.</span><span class=n>pbkdf2</span><span class=p>(</span><span class=s1>&#39;123456&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;PBKDF2 time: </span><span class=si>{</span><span class=n>time_end</span> <span class=o>-</span> <span class=n>time_start</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># AES-256</span>
</span></span><span class=line><span class=cl><span class=n>time_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>aes_encrypted</span> <span class=o>=</span> <span class=n>de</span><span class=o>.</span><span class=n>data_encrypt</span><span class=p>(</span><span class=s1>&#39;123456&#39;</span><span class=p>,</span> <span class=n>de</span><span class=o>.</span><span class=n>pbkdf2</span><span class=p>(</span><span class=s1>&#39;123456&#39;</span><span class=p>),</span> <span class=s1>&#39;AES-256&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;AES-256 encryption time: </span><span class=si>{</span><span class=n>time_end</span> <span class=o>-</span> <span class=n>time_start</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>aes_decrypted</span> <span class=o>=</span> <span class=n>de</span><span class=o>.</span><span class=n>data_decrypt</span><span class=p>(</span><span class=n>aes_encrypted</span><span class=p>,</span> <span class=n>de</span><span class=o>.</span><span class=n>pbkdf2</span><span class=p>(</span><span class=s1>&#39;123456&#39;</span><span class=p>),</span> <span class=s1>&#39;AES-256&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;AES-256 decryption time: </span><span class=si>{</span><span class=n>time_end</span> <span class=o>-</span> <span class=n>time_start</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ChaCha20</span>
</span></span><span class=line><span class=cl><span class=n>time_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>chacha20_encrypted</span> <span class=o>=</span> <span class=n>de</span><span class=o>.</span><span class=n>data_encrypt</span><span class=p>(</span><span class=s1>&#39;123456&#39;</span><span class=p>,</span> <span class=n>de</span><span class=o>.</span><span class=n>pbkdf2</span><span class=p>(</span><span class=s1>&#39;123456&#39;</span><span class=p>),</span> <span class=s1>&#39;ChaCha20&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;ChaCha20 encryption time: </span><span class=si>{</span><span class=n>time_end</span> <span class=o>-</span> <span class=n>time_start</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>chacha20_decrypted</span> <span class=o>=</span> <span class=n>de</span><span class=o>.</span><span class=n>data_decrypt</span><span class=p>(</span><span class=n>chacha20_encrypted</span><span class=p>,</span> <span class=n>de</span><span class=o>.</span><span class=n>pbkdf2</span><span class=p>(</span><span class=s1>&#39;123456&#39;</span><span class=p>),</span> <span class=s1>&#39;ChaCha20&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;ChaCha20 decryption time: </span><span class=si>{</span><span class=n>time_end</span> <span class=o>-</span> <span class=n>time_start</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># XChaCha20</span>
</span></span><span class=line><span class=cl><span class=n>time_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>xchacha20_encrypted</span> <span class=o>=</span> <span class=n>de</span><span class=o>.</span><span class=n>data_encrypt</span><span class=p>(</span><span class=s1>&#39;123456&#39;</span><span class=p>,</span> <span class=n>de</span><span class=o>.</span><span class=n>pbkdf2</span><span class=p>(</span><span class=s1>&#39;123456&#39;</span><span class=p>),</span> <span class=s1>&#39;XChaCha20&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;XChaCha20 encryption time: </span><span class=si>{</span><span class=n>time_end</span> <span class=o>-</span> <span class=n>time_start</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>xchacha20_decrypted</span> <span class=o>=</span> <span class=n>de</span><span class=o>.</span><span class=n>data_decrypt</span><span class=p>(</span><span class=n>xchacha20_encrypted</span><span class=p>,</span> <span class=n>de</span><span class=o>.</span><span class=n>pbkdf2</span><span class=p>(</span><span class=s1>&#39;123456&#39;</span><span class=p>),</span> <span class=s1>&#39;XChaCha20&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;XChaCha20 decryption time: </span><span class=si>{</span><span class=n>time_end</span> <span class=o>-</span> <span class=n>time_start</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># SM4-ECB</span>
</span></span><span class=line><span class=cl><span class=n>time_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>sm4_encrypted</span> <span class=o>=</span> <span class=n>de</span><span class=o>.</span><span class=n>data_encrypt</span><span class=p>(</span><span class=s1>&#39;123456&#39;</span><span class=p>,</span> <span class=n>de</span><span class=o>.</span><span class=n>pbkdf2</span><span class=p>(</span><span class=s1>&#39;123456&#39;</span><span class=p>),</span> <span class=s1>&#39;SM4-ECB&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;SM4-ECB encryption time: </span><span class=si>{</span><span class=n>time_end</span> <span class=o>-</span> <span class=n>time_start</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>sm4_decrypted</span> <span class=o>=</span> <span class=n>de</span><span class=o>.</span><span class=n>data_decrypt</span><span class=p>(</span><span class=n>sm4_encrypted</span><span class=p>,</span> <span class=n>de</span><span class=o>.</span><span class=n>pbkdf2</span><span class=p>(</span><span class=s1>&#39;123456&#39;</span><span class=p>),</span> <span class=s1>&#39;SM4-ECB&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;SM4-ECB decryption time: </span><span class=si>{</span><span class=n>time_end</span> <span class=o>-</span> <span class=n>time_start</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 随机生成强密码</span>
</span></span><span class=line><span class=cl><span class=n>time_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>strong_password</span> <span class=o>=</span> <span class=n>de</span><span class=o>.</span><span class=n>random_password</span><span class=p>(</span><span class=mi>16</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Strong password generation time: </span><span class=si>{</span><span class=n>time_end</span> <span class=o>-</span> <span class=n>time_start</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 数据库操作性能测试</span>
</span></span><span class=line><span class=cl><span class=c1># 查询用户表</span>
</span></span><span class=line><span class=cl><span class=n>time_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>db</span><span class=o>.</span><span class=n>query_user</span><span class=p>(</span><span class=n>db</span><span class=o>.</span><span class=n>conn</span><span class=p>,</span> <span class=s1>&#39;admin&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Query user time: </span><span class=si>{</span><span class=n>time_end</span> <span class=o>-</span> <span class=n>time_start</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 插入用户表</span>
</span></span><span class=line><span class=cl><span class=n>time_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>db</span><span class=o>.</span><span class=n>insert_user</span><span class=p>(</span><span class=n>db</span><span class=o>.</span><span class=n>conn</span><span class=p>,</span> <span class=s1>&#39;test1&#39;</span><span class=p>,</span> <span class=s1>&#39;test1&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Insert user time: </span><span class=si>{</span><span class=n>time_end</span> <span class=o>-</span> <span class=n>time_start</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 查询密码表</span>
</span></span><span class=line><span class=cl><span class=n>time_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>db</span><span class=o>.</span><span class=n>query_password</span><span class=p>(</span><span class=n>db</span><span class=o>.</span><span class=n>conn</span><span class=p>,</span> <span class=s1>&#39;admin&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Query password time: </span><span class=si>{</span><span class=n>time_end</span> <span class=o>-</span> <span class=n>time_start</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 插入密码表</span>
</span></span><span class=line><span class=cl><span class=n>time_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>db</span><span class=o>.</span><span class=n>insert_password</span><span class=p>(</span><span class=n>db</span><span class=o>.</span><span class=n>conn</span><span class=p>,</span> <span class=s1>&#39;test1&#39;</span><span class=p>,</span> <span class=s1>&#39;test1&#39;</span><span class=p>,</span> <span class=s1>&#39;test1&#39;</span><span class=p>,</span> <span class=s1>&#39;test1&#39;</span><span class=p>,</span> <span class=s1>&#39;test1&#39;</span><span class=p>,</span> <span class=s1>&#39;test1&#39;</span><span class=p>,</span> <span class=s1>&#39;test1&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Insert password time: </span><span class=si>{</span><span class=n>time_end</span> <span class=o>-</span> <span class=n>time_start</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 查询密码创建时间</span>
</span></span><span class=line><span class=cl><span class=n>time_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>db</span><span class=o>.</span><span class=n>query_password_created_at</span><span class=p>(</span><span class=n>db</span><span class=o>.</span><span class=n>conn</span><span class=p>,</span> <span class=s1>&#39;test1&#39;</span><span class=p>,</span> <span class=s1>&#39;test1&#39;</span><span class=p>,</span> <span class=s1>&#39;test1&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Query password created time: </span><span class=si>{</span><span class=n>time_end</span> <span class=o>-</span> <span class=n>time_start</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 删除密码</span>
</span></span><span class=line><span class=cl><span class=n>time_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>db</span><span class=o>.</span><span class=n>delete_password</span><span class=p>(</span><span class=n>db</span><span class=o>.</span><span class=n>conn</span><span class=p>,</span> <span class=s1>&#39;test1&#39;</span><span class=p>,</span> <span class=s1>&#39;test1&#39;</span><span class=p>,</span> <span class=s1>&#39;test1&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Delete password time: </span><span class=si>{</span><span class=n>time_end</span> <span class=o>-</span> <span class=n>time_start</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 搜索关键字</span>
</span></span><span class=line><span class=cl><span class=n>time_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>db</span><span class=o>.</span><span class=n>search_password</span><span class=p>(</span><span class=n>db</span><span class=o>.</span><span class=n>conn</span><span class=p>,</span> <span class=s1>&#39;admin&#39;</span><span class=p>,</span> <span class=s1>&#39;baidu&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>time_end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Search password time: </span><span class=si>{</span><span class=n>time_end</span> <span class=o>-</span> <span class=n>time_start</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span></code></pre></div><p>测试结果汇总：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 数据加密性能测试结果</span>
</span></span><span class=line><span class=cl><span class=n>SHA3</span><span class=o>-</span><span class=mi>256</span> <span class=n>time</span><span class=p>:</span> <span class=mf>0.0</span>  <span class=c1># 精度不够</span>
</span></span><span class=line><span class=cl><span class=n>PBKDF2</span> <span class=n>time</span><span class=p>:</span> <span class=mf>0.005513906478881836</span>
</span></span><span class=line><span class=cl><span class=n>AES</span><span class=o>-</span><span class=mi>256</span> <span class=n>encryption</span> <span class=n>time</span><span class=p>:</span> <span class=mf>0.005999326705932617</span>
</span></span><span class=line><span class=cl><span class=n>AES</span><span class=o>-</span><span class=mi>256</span> <span class=n>decryption</span> <span class=n>time</span><span class=p>:</span> <span class=mf>0.004008054733276367</span>
</span></span><span class=line><span class=cl><span class=n>ChaCha20</span> <span class=n>encryption</span> <span class=n>time</span><span class=p>:</span> <span class=mf>0.00400090217590332</span>
</span></span><span class=line><span class=cl><span class=n>ChaCha20</span> <span class=n>decryption</span> <span class=n>time</span><span class=p>:</span> <span class=mf>0.0040073394775390625</span>
</span></span><span class=line><span class=cl><span class=n>XChaCha20</span> <span class=n>encryption</span> <span class=n>time</span><span class=p>:</span> <span class=mf>0.003996133804321289</span>
</span></span><span class=line><span class=cl><span class=n>XChaCha20</span> <span class=n>decryption</span> <span class=n>time</span><span class=p>:</span> <span class=mf>0.004012107849121094</span>
</span></span><span class=line><span class=cl><span class=n>SM4</span><span class=o>-</span><span class=n>ECB</span> <span class=n>encryption</span> <span class=n>time</span><span class=p>:</span> <span class=mf>0.004988908767700195</span>
</span></span><span class=line><span class=cl><span class=n>SM4</span><span class=o>-</span><span class=n>ECB</span> <span class=n>decryption</span> <span class=n>time</span><span class=p>:</span> <span class=mf>0.004006624221801758</span>
</span></span><span class=line><span class=cl><span class=n>Strong</span> <span class=n>password</span> <span class=n>generation</span> <span class=n>time</span><span class=p>:</span> <span class=mf>0.0</span>  <span class=c1># 精度不够</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 数据库操作性能测试结果</span>
</span></span><span class=line><span class=cl><span class=n>Query</span> <span class=n>user</span> <span class=n>time</span><span class=p>:</span> <span class=mf>0.13013291358947754</span>
</span></span><span class=line><span class=cl><span class=n>Insert</span> <span class=n>user</span> <span class=n>time</span><span class=p>:</span> <span class=mf>0.17148613929748535</span>
</span></span><span class=line><span class=cl><span class=n>Query</span> <span class=n>password</span> <span class=n>time</span><span class=p>:</span> <span class=mf>0.11891531944274902</span>
</span></span><span class=line><span class=cl><span class=n>Insert</span> <span class=n>password</span> <span class=n>time</span><span class=p>:</span> <span class=mf>0.16904258728027344</span>
</span></span><span class=line><span class=cl><span class=n>Query</span> <span class=n>password</span> <span class=n>created</span> <span class=n>time</span><span class=p>:</span> <span class=mf>0.12987828254699707</span>
</span></span><span class=line><span class=cl><span class=n>Delete</span> <span class=n>password</span> <span class=n>time</span><span class=p>:</span> <span class=mf>0.1889970302581787</span>
</span></span><span class=line><span class=cl><span class=n>Search</span> <span class=n>password</span> <span class=n>time</span><span class=p>:</span> <span class=mf>0.14607882499694824</span>
</span></span></code></pre></div><h2 id=项目总结>项目总结</h2><p>经过三周的努力，密码管理器系统设计与实现项目已经圆满完成。我们的项目旨在开发一款安全、高效、用户友好的密码管理工具，以帮助用户更好地管理和保护他们的密码信息。在这个项目中，我们有许多的创新点和优势，比如：</p><ul><li><strong class=chinese>多算法的支持</strong>：我们实现了包括AES-256、ChaCha20、XChaCha20以及SM4-ECB在内的多种加密算法，为用户提供了灵活的加密选项，以满足不同安全需求。同时使用SHA3-256对用户主密钥进行哈希操作，更安全。</li><li><strong class=chinese>动态密钥生成</strong>：我们通过PBKDF2算法和SHA-256哈希函数，我们确保了密钥的安全性和随机性，每次加密都使用了接近一次一次（One-time Pad）的策略，极大提升了安全性。</li><li><strong class=chinese>多平台兼容性</strong>： 我们的系统支持Windows和Web平台，未来计划扩展到iOS、Android以及Linux等更多平台，实现了跨平台的数据同步。</li><li><strong class=chinese>用户界面友好</strong>： 我们设计了直观易用的用户界面，包括明暗主题切换、密码信息的批量导入导出等功能，提升了用户体验。</li></ul><p>在本次的项目中，数据加解密模块是整个密码管理器系统的核心部分，它直接影响到用户数据的安全性和可信度。本模块采用了SHA-256、AES-256、ChaCha20以及XChaCha20等多种加密算法，为用户提供多样化的加密策略，确保了密码信息在存储和传输过程中的保密性。同时，模块支持将数据导出为JSON、CSV和TXT格式，满足用户在不同应用场景下的便捷操作需求。在整个设计和实施过程中，我们严格遵循行业安全标准，致力于打造既安全又用户友好的接口，以简化操作流程并提升用户体验。</p><p>数据库模块也是密码管理器系统的重要组成部分，负责安全存储用户账户和加密后的密码数据。它通过参数化查询防止SQL注入，并在数据传输中采用加密措施，保障用户敏感信息的安全。由于使用云端数据库，使得我们的项目支持多端同步，确保用户在不同设备上访问一致的数据。我们还增加了高效的查询功能，如模糊搜索和字段查询，提升了操作的便捷性。此模块设计灵活，支持未来扩展，确保系统的高安全性和稳定性。</p><p>此外，我们也进行了整个项目的测试，其中包含性能测试和安全性测试，从测试结果来看，我们的项目响应迅速，系统在正常网络条件下，用户操作的响应时间均不超过2秒，保证了流畅的用户体验。同时我们的应用程序优化了资源使用，避免了系统资源的过度消耗。我们的项目也通过安全性测试，我们验证了加密算法的有效性，确保了数据在存储和传输过程中的安全性。我们对数据库进行了加固，包括使用强密码、开启权限控制等措施，防止了未授权访问，避免我们的核心数据库被黑客攻击。</p><p>最后，对于未来升级改造，我们计划引入更多的加密算法，以提供更全面的安全保护。并且我们将继续优化用户界面，如在Android平台上增加生物识别验证等新功能。我们最终的目标是将系统部署到更多的操作系统和设备上，实现更广泛的覆盖，让用户随时随地安全高效地管理自己的密码信息。</p></article><div class=paginator><a class=link href=https://blog.pi3.fun/post/2024/09/%E5%86%99%E4%BD%9C%E6%96%B9%E6%B3%95%E8%AE%BA%E7%AC%94%E8%AE%B0/>← prev</a>
<a class=link href=https://blog.pi3.fun/post/2024/09/obsidian%E4%B8%ADquickadd%E6%8F%92%E4%BB%B6%E7%9A%84%E5%A6%99%E7%94%A8/>next →</a></div><div class=comment><div id=tcomment></div><script src=https://registry.npmmirror.com/twikoo/1.6.39/files/dist/twikoo.min.js></script><script async>twikoo.init({envId:"https://twikoo.pi3.fun/.netlify/functions/twikoo",el:"#tcomment",lang:"zh-CN"})</script></div></main><footer id=footer><div><span style=display:flex;align-items:center><span style=margin-right:.5rem>© 2021 - 2025</span><img src=https://cdn.pi3.fun/static/rainbow.gif loading=lazy width=20 alt=rainbow><span style=margin-left:.5rem>By Liu Chao</span></span></div><div class=footnote><span><a href=https://www.foreverblog.cn/ target=_blank><img src=https://img.foreverblog.cn/logo_en_default.png style=width:auto;height:16px></a> | <a class=link href=https://blogscn.fun/ target=_blank><img src=https://photo.xiangming.site/img/blogscn.png style=width:auto;height:15px></a><br><a class=link href=/index.xml><span class="iconfont icon-RSS"></span></a> | <a class=link href=https://github.com/Pi3-l22 target=_ blank><span class="iconfont icon-GitHub"></span></a> | <a class=link href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel=noopener><span class="iconfont icon-creative-commons-fill"></span></a></span></div><div class=blog-icon></div></footer></div><script>document.addEventListener("DOMContentLoaded",function(){const n=localStorage.getItem("theme")||"light",e=document.querySelector('link[data-theme-style="light"]'),t=document.querySelector('link[data-theme-style="dark"]'),i=window.matchMedia("(prefers-color-scheme: dark)");i.addListener(function(n){if(!localStorage.getItem("theme")){const s=n.matches?"dark":"light";document.documentElement.setAttribute("data-theme",s),localStorage.setItem("theme",s),s==="light"?(e.media="all",t.media="not all"):(e.media="not all",t.media="all");const o=document.querySelector("iframe.giscus-frame");if(o){const e=s==="light"?"light_tritanopia":"dark_tritanopia";o.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}}}),n==="light"?(e.media="all",t.media="not all"):(e.media="not all",t.media="all");function o(){const e=document.querySelector("iframe.giscus-frame");if(e){const t=n==="light"?"light_tritanopia":"dark_tritanopia";e.contentWindow.postMessage({giscus:{setConfig:{theme:t}}},"https://giscus.app")}else setTimeout(o,1e3)}o();const s=document.querySelector(".theme-toggle");s&&(s.textContent=n==="light"?"黑暗":"明亮",s.addEventListener("click",function(){const o=document.documentElement.getAttribute("data-theme"),n=o==="light"?"dark":"light";document.documentElement.setAttribute("data-theme",n),localStorage.setItem("theme",n),n==="light"?(e.media="all",t.media="not all"):(e.media="not all",t.media="all");const s=document.querySelector("iframe.giscus-frame");if(s){const e=n==="light"?"light_tritanopia":"dark_tritanopia";s.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}this.textContent=n==="light"?"黑暗":"明亮"}))})</script></body></html>