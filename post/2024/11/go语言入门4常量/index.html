<!doctype html><html lang=zh-cn><head><script>(function(){const e=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",e)})()</script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=author content="LiuChao"><meta name=description content="Go 语言入门基础学习笔记之 Go 语言的常量"><link rel=icon href=https://blog.pi3.fun/favicon.ico><meta name=keywords content=" study  latex  life  academic "><meta property="og:url" content="https://blog.pi3.fun/post/2024/11/go%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A84%E5%B8%B8%E9%87%8F/"><meta property="og:site_name" content="Pi3's Notes"><meta property="og:title" content="Go语言入门4：常量"><meta property="og:description" content="Go 语言入门基础学习笔记之 Go 语言的常量"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-11-08T00:00:00+00:00"><meta property="article:modified_time" content="2024-11-08T00:00:00+00:00"><meta property="article:tag" content="技术"><meta property="article:tag" content="Golang"><link rel=canonical href=https://blog.pi3.fun/post/2024/11/go%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A84%E5%B8%B8%E9%87%8F/><meta itemprop=name content="Go语言入门4：常量"><meta itemprop=description content="Go 语言入门基础学习笔记之 Go 语言的常量"><meta itemprop=datePublished content="2024-11-08T00:00:00+00:00"><meta itemprop=dateModified content="2024-11-08T00:00:00+00:00"><meta itemprop=wordCount content="1266"><meta itemprop=keywords content="技术,Golang"><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/common.css><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/content.css><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/theme.css><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/iconfont/iconfont.css><link rel=stylesheet href=https://blog.pi3.fun/css/syntax/xcode.css data-theme-style=light media="(prefers-color-scheme: light)"><link rel=stylesheet href=https://blog.pi3.fun/css/syntax/catppuccin-mocha.css data-theme-style=dark media="not all"><title>Go语言入门4：常量 - Pi3's Notes</title>
<link rel=stylesheet href=https://blog.pi3.fun/css/single.css><link href=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-100-y/KaTeX/0.15.2/katex.min.css rel=stylesheet><script defer src=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-100-y/KaTeX/0.15.2/katex.min.js></script><script defer src=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-100-y/KaTeX/0.15.2/contrib/auto-render.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}],ignoredTags:["script","noscript","style","textarea","pre","code","option"],throwOnError:!1})})</script></head><body><div id=wrapper><header id=header><h1><a href=https://blog.pi3.fun/>Pi3's Notes</a></h1><nav><span class=nav-bar-item><a class=link href=/>文章</a>
</span><span class=nav-bar-item><a class=link href=/post/>归档</a>
</span><span class=nav-bar-item><a class=link href=/about/>关于</a>
</span><span class=nav-bar-item><a class=link href=/links/>友链</a>
</span><span class=nav-bar-item><a class="link theme-toggle" href=javascript:void(0);>黑暗</a></span></nav></header><main id=main class=post><h1>Go语言入门4：常量</h1><div><b>Keywords: </b><a class=link href=https://blog.pi3.fun/tags/%E6%8A%80%E6%9C%AF>#技术</a>
<a class=link href=https://blog.pi3.fun/tags/golang>#Golang</a></div><details><summary><b>Table of Contents</b></summary><div class=toc><nav id=TableOfContents><ul><li><a href=#常量>常量</a><ul><li><a href=#常量定义>常量定义</a></li><li><a href=#iota>iota</a></li></ul></li></ul></nav></div></details><article class=content><p>Go 语言入门基础学习笔记之 Go 语言的常量</p><p><img src=https://image.pi3.fun/blog/202411072308986.png alt=image.png></p><h2 id=常量>常量</h2><h3 id=常量定义>常量定义</h3><p>常量是一个简单值的标识符，在程序运行时，不会被修改的量。</p><p>常量中的数据类型只可以是<strong class=chinese>布尔型</strong>、<strong class=chinese>数字型</strong>（整数型、浮点型和复数）和<strong class=chinese>字符串型</strong>。</p><p>常量的定义格式：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>const</span> <span class=nx>identifier</span> <span class=p>[</span><span class=kd>type</span><span class=p>]</span> <span class=p>=</span> <span class=nx>value</span>
</span></span></code></pre></div><p>同样，在这里可以省略类型说明符 <code>type</code>，因为编译器会根据常量值来自动推断类型。这样就分为了<strong class=chinese>显式类型定义</strong>和<strong class=chinese>隐式类型定义</strong>。</p><p>多个相同类型的声明可以简写为：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>const</span> <span class=nx>c_name1</span><span class=p>,</span> <span class=nx>c_name2</span> <span class=p>=</span> <span class=nx>value1</span><span class=p>,</span> <span class=nx>value2</span>
</span></span></code></pre></div><p>常量还可以用作定义<strong class=chinese>枚举</strong>类型：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>const</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nx>Unknown</span> <span class=p>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=nx>Female</span> <span class=p>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=nx>Male</span> <span class=p>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><blockquote><p>由于如果枚举类型很多，一个个赋值十分麻烦，于是 Go 语言提供了一个关键字 <a href=#iota>iota</a></p></blockquote><p>常量可以用 <code>len()</code>, <code>cap()</code>, <code>unsafe.Sizeof()</code> 函数<strong class=chinese>计算表达式</strong>的值。常量表达式中，函数必须是<strong class=chinese>内置函数</strong>，否则编译不通过。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;unsafe&#34;</span>
</span></span><span class=line><span class=cl><span class=kd>const</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nx>a</span> <span class=p>=</span> <span class=s>&#34;abc&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>b</span> <span class=p>=</span> <span class=nb>len</span><span class=p>(</span><span class=nx>a</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>c</span> <span class=p>=</span> <span class=nx>unsafe</span><span class=p>.</span><span class=nf>Sizeof</span><span class=p>(</span><span class=nx>a</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=nb>println</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span><span class=p>,</span> <span class=nx>c</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 输出结果
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>abc</span> <span class=mi>3</span> <span class=mi>16</span>
</span></span></code></pre></div><p><strong class=chinese>补充</strong>：</p><p><code>unsafe.Sizeof(a)</code> 返回 a 类型在内存中占用的字节数。对于字符串类型，<code>unsafe.Sizeof()</code> 返回的是指向字符串的内部结构的大小，而不是字符串内容的大小。</p><p>在 Go 中，字符串是一个包含两个字段的结构体：</p><ol><li><strong class=chinese>指针</strong>：指向字符串内容的内存地址。</li><li><strong class=chinese>长度</strong>：表示字符串内容的长度（以字节为单位）。</li></ol><p>对于一个字符串类型，该结构体通常占用 16 字节（在 64 位系统上）。具体来说：</p><ul><li><strong class=chinese>指针</strong>：8 字节（在 64 位系统上）</li><li><strong class=chinese>长度</strong>：8 字节（在 64 位系统上）</li></ul><p>因此，字符串的总大小为 8 + 8 = 16 字节。</p><h3 id=iota>iota</h3><p>iota 是一个<strong class=chinese>特殊常量</strong>，可以认为是一个可以<strong class=chinese>被编译器修改</strong>的常量，只能出现在 <code>const</code> 中。可以在常量声明中用于生成一系列相关的常量值。</p><p>iota 在 const 关键字<strong class=chinese>出现</strong>时将被重置为 0 (const 内部的<strong class=chinese>第一行</strong>之前)，const 中每新增一行常量声明将使 iota 计数一次 (iota 可理解为 const 语句块中的<strong class=chinese>行索引</strong>)，即 <code>iota=行数-1</code>。</p><p>iota 可以被用作枚举值：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>const</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nx>a</span> <span class=p>=</span> <span class=kc>iota</span>  <span class=c1>// 0
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>b</span> <span class=p>=</span> <span class=kc>iota</span>  <span class=c1>// 1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>c</span> <span class=p>=</span> <span class=kc>iota</span>  <span class=c1>// 2
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>)</span>
</span></span></code></pre></div><p>第一个 iota 等于 0，每当 iota 在新的一行被使用时，它的值都会自动加 1；所以 a=0, b=1, c=2 可以简写为如下形式：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>const</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nx>a</span> <span class=p>=</span> <span class=kc>iota</span>
</span></span><span class=line><span class=cl>    <span class=nx>b</span>
</span></span><span class=line><span class=cl>    <span class=nx>c</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><p><strong class=chinese>注意</strong>：<code>iota</code> 是按<strong class=chinese>行</strong>递增的，因此只要是同一行的，<code>iota</code> 就相同。并且接下来的 <code>iota</code> 公式都应该与上方最近的公式一致。比如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>const</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nx>a</span><span class=p>,</span> <span class=nx>b</span> <span class=p>=</span> <span class=kc>iota</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=kc>iota</span> <span class=o>+</span> <span class=mi>2</span>  <span class=c1>// iota=0  a=1  b=2
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>c</span><span class=p>,</span> <span class=nx>d</span>  <span class=c1>// iota=1  c=iota+1  d=iota+2
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>e</span><span class=p>,</span> <span class=nx>f</span> <span class=p>=</span> <span class=kc>iota</span> <span class=o>*</span> <span class=mi>2</span><span class=p>,</span> <span class=kc>iota</span> <span class=o>*</span> <span class=mi>3</span>  <span class=c1>// iota=2  e=4  f=6
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>g</span><span class=p>,</span> <span class=nx>h</span>  <span class=c1>// iota=3  g=iota*2  f=iota*3
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>)</span>
</span></span></code></pre></div><p><strong>iota 用法</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>const</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>a</span> <span class=p>=</span> <span class=kc>iota</span>   <span class=c1>//0
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>b</span>          <span class=c1>//1
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>c</span>          <span class=c1>//2
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>d</span> <span class=p>=</span> <span class=s>&#34;ha&#34;</span>   <span class=c1>//独立值，iota += 1
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>e</span>          <span class=c1>//&#34;ha&#34;   iota += 1
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>f</span> <span class=p>=</span> <span class=mi>100</span>    <span class=c1>//iota +=1
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>g</span>          <span class=c1>//100  iota +=1
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>h</span> <span class=p>=</span> <span class=kc>iota</span>   <span class=c1>//7,恢复计数
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>i</span>          <span class=c1>//8
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span><span class=nx>b</span><span class=p>,</span><span class=nx>c</span><span class=p>,</span><span class=nx>d</span><span class=p>,</span><span class=nx>e</span><span class=p>,</span><span class=nx>f</span><span class=p>,</span><span class=nx>g</span><span class=p>,</span><span class=nx>h</span><span class=p>,</span><span class=nx>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 输出结果
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=mi>0</span> <span class=mi>1</span> <span class=mi>2</span> <span class=nx>ha</span> <span class=nx>ha</span> <span class=mi>100</span> <span class=mi>100</span> <span class=mi>7</span> <span class=mi>8</span>
</span></span></code></pre></div><p>在 Go 中，常量声明中连续的<strong class=chinese>未显式赋值</strong>常量会取<strong class=chinese>前一个</strong>常量的值。<code>e</code> 没有显式赋值，因此它会继承前一个常量 <code>d</code> 的值（即 <code>"ha"</code>）。同理，<code>g</code> 没有显式赋值，因此它会继承前一个常量 <code>f</code> 的值（即 <code>100</code>）。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=kd>const</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nx>i</span><span class=p>=</span><span class=mi>1</span><span class=o>&lt;&lt;</span><span class=kc>iota</span>
</span></span><span class=line><span class=cl>    <span class=nx>j</span><span class=p>=</span><span class=mi>3</span><span class=o>&lt;&lt;</span><span class=kc>iota</span>
</span></span><span class=line><span class=cl>    <span class=nx>k</span>
</span></span><span class=line><span class=cl>    <span class=nx>l</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;i=&#34;</span><span class=p>,</span><span class=nx>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;j=&#34;</span><span class=p>,</span><span class=nx>j</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;k=&#34;</span><span class=p>,</span><span class=nx>k</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;l=&#34;</span><span class=p>,</span><span class=nx>l</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 输出结果
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>i</span><span class=p>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=nx>j</span><span class=p>=</span> <span class=mi>6</span>
</span></span><span class=line><span class=cl><span class=nx>k</span><span class=p>=</span> <span class=mi>12</span>
</span></span><span class=line><span class=cl><span class=nx>l</span><span class=p>=</span> <span class=mi>24</span>
</span></span></code></pre></div><p>在上面这个实例中，iota 表示从 0 开始自动加 1，所以 <code>i=1&lt;&lt;0</code>, <code>j=3&lt;&lt;1</code>（<strong><code>&lt;&lt;</code></strong> 表示<strong class=chinese>左移</strong>的意思，即 <code>&lt;&lt;n==*(2^n)</code>），因此 <code>i=1</code>、<code>j=6</code>、<code>k=12</code>、<code>l=24</code>。</p><ul><li><strong>i=1</strong>：左移 0 位，不变仍为 1。</li><li><strong>j=3</strong>：左移 1 位，变为二进制 <strong>110</strong>，即 6。</li><li><strong>k=3</strong>：左移 2 位，变为二进制 <strong>1100</strong>，即 12。</li><li><strong>l=3</strong>：左移 3 位，变为二进制 <strong>11000</strong>，即 24。</li></ul><hr><p>参考课程：</p><ol><li><a href=https://www.bilibili.com/video/BV1gf4y1r79E>8小时转职Golang工程师</a></li><li><a href=https://www.runoob.com/go/go-tutorial.html>Go语言教程 | 菜鸟教程</a></li></ol></article><div class=paginator><a class=link href=https://blog.pi3.fun/post/2024/11/go%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8%E4%B9%8B%E6%A0%B8%E5%BF%83%E7%94%9F%E6%80%81/>← prev</a>
<a class=link href=https://blog.pi3.fun/post/2024/11/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8fyne%E6%A1%86%E6%9E%B6%E5%9F%BA%E7%A1%80%E7%AF%87/>next →</a></div><div class=comment><div id=tcomment></div><script src=https://registry.npmmirror.com/twikoo/1.6.39/files/dist/twikoo.min.js></script><script async>twikoo.init({envId:"https://twikoo.pi3.fun/.netlify/functions/twikoo",el:"#tcomment",lang:"zh-CN"})</script></div></main><footer id=footer><div><span style=display:flex;align-items:center><span style=margin-right:.5rem>© 2021 - 2024</span><img src=https://image.pi3.fun/static/rainbow.gif loading=lazy width=20 alt=rainbow><span style=margin-left:.5rem>By Liu Chao</span></span></div><div class=footnote><span><a class=link href=/index.xml><span class="iconfont icon-RSS"></span></a> | <a class=link href=https://github.com/Pi3-l22 target=_ blank><span class="iconfont icon-GitHub"></span></a> | <a class=link href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel=noopener><span class="iconfont icon-creative-commons-fill"></span></a></span></div><div class=blog-icon></div></footer></div><script>document.addEventListener("DOMContentLoaded",function(){const n=localStorage.getItem("theme")||"light",e=document.querySelector('link[data-theme-style="light"]'),t=document.querySelector('link[data-theme-style="dark"]'),i=window.matchMedia("(prefers-color-scheme: dark)");i.addListener(function(n){if(!localStorage.getItem("theme")){const s=n.matches?"dark":"light";document.documentElement.setAttribute("data-theme",s),localStorage.setItem("theme",s),s==="light"?(e.media="all",t.media="not all"):(e.media="not all",t.media="all");const o=document.querySelector("iframe.giscus-frame");if(o){const e=s==="light"?"light_tritanopia":"dark_tritanopia";o.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}}}),n==="light"?(e.media="all",t.media="not all"):(e.media="not all",t.media="all");function o(){const e=document.querySelector("iframe.giscus-frame");if(e){const t=n==="light"?"light_tritanopia":"dark_tritanopia";e.contentWindow.postMessage({giscus:{setConfig:{theme:t}}},"https://giscus.app")}else setTimeout(o,1e3)}o();const s=document.querySelector(".theme-toggle");s&&(s.textContent=n==="light"?"黑暗":"明亮",s.addEventListener("click",function(){const o=document.documentElement.getAttribute("data-theme"),n=o==="light"?"dark":"light";document.documentElement.setAttribute("data-theme",n),localStorage.setItem("theme",n),n==="light"?(e.media="all",t.media="not all"):(e.media="not all",t.media="all");const s=document.querySelector("iframe.giscus-frame");if(s){const e=n==="light"?"light_tritanopia":"dark_tritanopia";s.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}this.textContent=n==="light"?"黑暗":"明亮"}))})</script></body></html>