<!doctype html><html lang=zh-cn><head><script>(function(){const e=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",e)})()</script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=author content="LiuChao"><meta name=description content="使用 Python MCP SDK 以及 mcp-go ，来学习 MCP 服务的开发流程"><link rel=icon href=https://blog.pi3.fun/favicon.ico><meta name=keywords content=" study  latex  life  academic "><meta property="og:url" content="https://blog.pi3.fun/post/2025/06/how-to-write-an-mcp-service/"><meta property="og:site_name" content="Pi3's Notes"><meta property="og:title" content="如何编写一个MCP服务"><meta property="og:description" content="使用 Python MCP SDK 以及 mcp-go ，来学习 MCP 服务的开发流程"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2025-06-08T00:00:00+00:00"><meta property="article:modified_time" content="2025-06-08T00:00:00+00:00"><meta property="article:tag" content="技术"><meta property="article:tag" content="MCP"><meta property="article:tag" content="Golang"><meta property="article:tag" content="Python"><link rel=canonical href=https://blog.pi3.fun/post/2025/06/how-to-write-an-mcp-service/><meta itemprop=name content="如何编写一个MCP服务"><meta itemprop=description content="使用 Python MCP SDK 以及 mcp-go ，来学习 MCP 服务的开发流程"><meta itemprop=datePublished content="2025-06-08T00:00:00+00:00"><meta itemprop=dateModified content="2025-06-08T00:00:00+00:00"><meta itemprop=wordCount content="2115"><meta itemprop=keywords content="技术,MCP,Golang,Python"><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/common.css><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/content.css><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/theme.css><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/iconfont/iconfont.css><link rel=stylesheet href=https://blog.pi3.fun/css/syntax/xcode.css data-theme-style=light media="(prefers-color-scheme: light)"><link rel=stylesheet href=https://blog.pi3.fun/css/syntax/catppuccin-mocha.css data-theme-style=dark media="not all"><title>如何编写一个MCP服务 - Pi3's Notes</title>
<link rel=stylesheet href=https://blog.pi3.fun/css/single.css><link href=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-100-y/KaTeX/0.15.2/katex.min.css rel=stylesheet><script defer src=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-100-y/KaTeX/0.15.2/katex.min.js></script><script defer src=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-100-y/KaTeX/0.15.2/contrib/auto-render.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}],ignoredTags:["script","noscript","style","textarea","pre","code","option"],throwOnError:!1})})</script></head><body><div id=wrapper><header id=header><link rel=stylesheet href=https://chinese-fonts-cdn.deno.dev/packages/lxgwwenkaibright/dist/LXGWBright-Regular/result.css><link rel=stylesheet href=https://chinese-fonts-cdn.deno.dev/packages/lxgwwenkaibright/dist/LXGWBright-Italic/result.css><link rel=stylesheet href=https://chinese-fonts-cdn.deno.dev/packages/maple-mono-cn/dist/MapleMono-CN-Regular/result.css><h1><a href=https://blog.pi3.fun/>Pi3's Notes</a></h1><nav><span class=nav-bar-item><a class=link href=/>文章</a>
</span><span class=nav-bar-item><a class=link href=https://www.boyouquan.com/planet-shuttle>穿梭</a>
</span><span class=nav-bar-item><a class=link href=/about/>关于</a>
</span><span class=nav-bar-item><a class=link href=/links/>友链</a>
</span><span class=nav-bar-item><a class="link theme-toggle" href=javascript:void(0);>黑暗</a></span></nav></header><main id=main class=post><h1>如何编写一个MCP服务</h1><div><b>Keywords: </b><a class=link href=https://blog.pi3.fun/tags/%E6%8A%80%E6%9C%AF>#技术</a>
<a class=link href=https://blog.pi3.fun/tags/mcp>#MCP</a>
<a class=link href=https://blog.pi3.fun/tags/golang>#Golang</a>
<a class=link href=https://blog.pi3.fun/tags/python>#Python</a></div><div><b>Release Date: </b><span>2025-06-08</span></div><details><summary><b>Table of Contents</b></summary><div class=toc><nav id=TableOfContents><ul><li><a href=#什么是-mcp>什么是 MCP</a></li><li><a href=#python-mcp-服务>Python MCP 服务</a></li><li><a href=#go-mcp-服务>Go MCP 服务</a></li></ul></nav></div></details><article class=content><p>使用 Python MCP SDK 以及 mcp-go ，来学习 MCP 服务的开发流程。</p><h2 id=什么是-mcp>什么是 MCP</h2><p>MCP（Model Context Protocol），即<a href=https://modelcontextprotocol.io/introduction>模型上下文协议</a>，是一种开放协议，它标准化了应用程序如何为 LLM 提供上下文。将 MCP 想象成 AI 应用程序的 USB-C 端口。正如 USB-C 提供了一种将设备连接到各种外围设备和配件的标准化方式一样，MCP 也提供了一种将 AI 模型连接到不同数据源和工具的标准化方式。</p><p>MCP 官方提供了多种编程语言的 SDK，方便开发者进行 MCP 服务的开发。</p><ul><li><a href=https://github.com/modelcontextprotocol/typescript-sdk>Typescript MCP SDK</a> </li><li><a href=https://github.com/modelcontextprotocol/python-sdk>Python MCP SDK</a> </li><li><a href=https://github.com/modelcontextprotocol/csharp-sdk>C# MCP SDK</a></li><li><a href=https://github.com/modelcontextprotocol/java-sdk>Java MCP SDK</a></li><li><a href=https://github.com/modelcontextprotocol/kotlin-sdk>Kotlin MCP SDK</a></li><li><a href=https://github.com/modelcontextprotocol/ruby-sdk>Ruby MCP SDK</a></li><li><a href=https://github.com/modelcontextprotocol/swift-sdk>Swift MCP SDK</a></li></ul><p>由于 MCP 协议是公开的，因此社区中也有不少开发者自行开发了其他编程语言的 MCP 服务 SDK，比如 Go 语言版本 MCP 工具：<a href=https://github.com/mark3labs/mcp-go>mark3labs/mcp-go</a>。</p><p>下面的笔记将使用 Python MCP SDK 以及 Go MCP SDK ，来学习 MCP 服务的开发流程。</p><h2 id=python-mcp-服务>Python MCP 服务</h2><p>MCP 官方推荐使用 uv 来管理 Python 的 MCP 项目，因此需要先安装 <a href=https://docs.astral.sh/uv/>uv</a>，uv 的安装和使用具体可以参考我之前写的笔记：<a href=https://blog.pi3.fun/post/2025/05/python%E9%A1%B9%E7%9B%AE%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7uv/>Python项目环境管理工具：uv</a>。</p><p>先使用 uv 创建一个 MCP 项目文件夹：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>uv init mcp-server-demo
</span></span><span class=line><span class=cl><span class=nb>cd</span> mcp-server-demo
</span></span></code></pre></div><p>再添加 MCP 服务所需要的 Python 依赖包：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>uv add <span class=s2>&#34;mcp[cli]&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># 等同于</span>
</span></span><span class=line><span class=cl>pip install <span class=s2>&#34;mcp[cli]&#34;</span>
</span></span></code></pre></div><p>接着就可以在项目文件夹中的 <code>main.py</code> 中编写相关的 MCP 代码。比如下面一个简单的加法工具例子：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># server.py</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>mcp.server.fastmcp</span> <span class=kn>import</span> <span class=n>FastMCP</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create an MCP server</span>
</span></span><span class=line><span class=cl><span class=n>mcp</span> <span class=o>=</span> <span class=n>FastMCP</span><span class=p>(</span><span class=s2>&#34;Demo&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Add an addition tool</span>
</span></span><span class=line><span class=cl><span class=nd>@mcp.tool</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>add</span><span class=p>(</span><span class=n>a</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>b</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Add two numbers&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Add a dynamic greeting resource</span>
</span></span><span class=line><span class=cl><span class=nd>@mcp.resource</span><span class=p>(</span><span class=s2>&#34;greeting://</span><span class=si>{name}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_greeting</span><span class=p>(</span><span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Get a personalized greeting&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=sa>f</span><span class=s2>&#34;Hello, </span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>!&#34;</span>
</span></span></code></pre></div><p>其中有两处关键点。</p><p>一是 <code>@mcp.tool()</code> 向 LLM 添加一个工具，即 LLM 可以使用这个工具完成这个函数指定的功能，那么 LLM 是怎么知道这个函数具体的功能以及什么时候可以调用呢？</p><p>这就是该功能函数下面的 <code>"""Add two numbers"""</code> 多行注释的作用，通过它可以告诉 LLM 这个功能函数有什么作用，也可以再具体申明功能函数的参数和返回值的意义和类型。</p><p>二是 <code>@mcp.resource()</code> 向 LLM 公开一些资源数据，它类似于 REST API 中的 GET 请求处理，LLM 向 MCP 服务请求它时，它只向 LLM 提供一些只读数据，而不做其他操作。</p><p>同样，该函数下面的多行注释，也是向 LLM 说明这个函数提供的数据有什么意义，是什么数据，有哪些类型，有什么作用，方便 LLM 理解并在合适的时机读取它。</p><p>最后就是启动这个 MCP 服务。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>mcp</span><span class=o>.</span><span class=n>run</span><span class=p>()</span>
</span></span></code></pre></div><p>启动这个 MCP 服务有三种方式：</p><ol><li><code>stdio</code> 标准输入输出</li><li><code>sse</code> 服务器发送事件（逐渐被 <code>streamable-http</code> 替代）</li><li><code>streamable-http</code> 可流式传输的 HTTP</li></ol><p>可以通过 <code>mcp.run(transport="模式")</code> 指定，比如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>mcp</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>transport</span><span class=o>=</span><span class=s2>&#34;stdio&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p>其中 <code>sse</code> 与 <code>streamable-http</code> 类似，都是启动一个服务器，通过暴露调用地址和端口，供 LLM 调用，因此可以部署在云端服务器中，实现远程调用。而 <code>stdio</code> 则是通过系统的标准输入输出通道与 LLM 进行通信，这种方式不需要启动服务程序，只需要向 MCP 客户端提供程序的路径或使用命令即可。</p><hr><p>因为 <a href=https://www.cherry-ai.com/>Cherry Studio</a> 这个 AI 客户端中集成了 MCP 客户端并且拥有友好的配置界面，因此接下来尝试在其中配置 MCP 服务，让 LLM 可以调用自己编写的 MCP 服务。</p><p>打开 Cherry Studio 的设置，找到 MCP 服务器，先点击上方的红色感叹号，先安装 Cherry Studio 内置的 uv 和 bun。安装成功重启后，红色感叹号变为绿色对勾则安装成功。</p><p>选择添加服务器（快速创建），类型选择 <code>标准输入/输出stdio</code>，命令使用 uv，参数中填入：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>--directory
</span></span><span class=line><span class=cl>D:<span class=se>\D</span>esktop<span class=se>\m</span>cp-server-demo
</span></span><span class=line><span class=cl>run
</span></span><span class=line><span class=cl>main.py
</span></span></code></pre></div><p><code>D:\Desktop\mcp-server-demo</code> 是 MCP 项目的本地路径，<code>main.py</code> 是 MCP 的程序名。</p><p>其他选项默认即可。</p><p><img src=https://cdn.pi3.fun/blog/202506081451001.png alt=image.png></p><p>接下来就可以在模型对话界面使用 MCP 服务进行对话，比如我问它一个加法问题，它会自行调用 MCP 服务完成这个功能，并回答。</p><p><img src=https://cdn.pi3.fun/blog/202506081451124.png alt=image.png></p><h2 id=go-mcp-服务>Go MCP 服务</h2><p>学习了如何使用 Python 编写一个 MCP 服务，那么 Go 语言也是类似的流程。Go 语言版本的 MCP 服务基于第三方的 <a href=https://github.com/mark3labs/mcp-go>mark3labs/mcp-go</a> 库。</p><p>同样首先创建一个 <code>mcp-server-demo</code> 项目文件夹，并在其中初始化 Go 项目。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>mkdir mcp-server-demo
</span></span><span class=line><span class=cl><span class=nb>cd</span> mcp-server-demo
</span></span><span class=line><span class=cl>go mod init mcpserverdemo
</span></span><span class=line><span class=cl>go get github.com/mark3labs/mcp-go
</span></span></code></pre></div><p>创建一个 <code>main.go</code> 文件，并在其中编写 MCP 服务。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;context&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;errors&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;github.com/mark3labs/mcp-go/mcp&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;github.com/mark3labs/mcp-go/server&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Create a new MCP server
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>s</span> <span class=o>:=</span> <span class=nx>server</span><span class=p>.</span><span class=nf>NewMCPServer</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=s>&#34;MCP Server Demo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s>&#34;1.0.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>server</span><span class=p>.</span><span class=nf>WithToolCapabilities</span><span class=p>(</span><span class=kc>false</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Add an addition tool
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>tool</span> <span class=o>:=</span> <span class=nx>mcp</span><span class=p>.</span><span class=nf>NewTool</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=s>&#34;Add two numbers&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>mcp</span><span class=p>.</span><span class=nf>WithDescription</span><span class=p>(</span><span class=s>&#34;This tool adds two int numbers together&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=nx>mcp</span><span class=p>.</span><span class=nf>WithNumber</span><span class=p>(</span><span class=s>&#34;x&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>mcp</span><span class=p>.</span><span class=nf>Required</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=nx>mcp</span><span class=p>.</span><span class=nf>Description</span><span class=p>(</span><span class=s>&#34;The first int number to add&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=nx>mcp</span><span class=p>.</span><span class=nf>WithNumber</span><span class=p>(</span><span class=s>&#34;y&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>mcp</span><span class=p>.</span><span class=nf>Required</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=nx>mcp</span><span class=p>.</span><span class=nf>Description</span><span class=p>(</span><span class=s>&#34;The second int number to add&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Add tool handler
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>s</span><span class=p>.</span><span class=nf>AddTool</span><span class=p>(</span><span class=nx>tool</span><span class=p>,</span> <span class=nx>addHandler</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Start the stdio server
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>server</span><span class=p>.</span><span class=nf>ServeStdio</span><span class=p>(</span><span class=nx>s</span><span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;Server error: %v\n&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>这里同样使用了 <code>stdio</code> 模式，如果要使用其他模式，则可以使用 <code>server.ServeSSE</code> 和 <code>server.ServeHTTP</code>（需要指定端口）</p><p>以上就向 LLM 注册了两个整数相加的工具，而这个工具实现的功能则编写在 <code>addHandler</code> 函数中。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>addHandler</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span> <span class=nx>request</span> <span class=nx>mcp</span><span class=p>.</span><span class=nx>CallToolRequest</span><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>mcp</span><span class=p>.</span><span class=nx>CallToolResult</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>x</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>request</span><span class=p>.</span><span class=nf>RequireInt</span><span class=p>(</span><span class=s>&#34;x&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>mcp</span><span class=p>.</span><span class=nf>NewToolResultError</span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nf>Error</span><span class=p>()),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>y</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>request</span><span class=p>.</span><span class=nf>RequireInt</span><span class=p>(</span><span class=s>&#34;y&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>mcp</span><span class=p>.</span><span class=nf>NewToolResultError</span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nf>Error</span><span class=p>()),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>result</span> <span class=o>:=</span> <span class=nx>x</span> <span class=o>+</span> <span class=nx>y</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>mcp</span><span class=p>.</span><span class=nf>NewToolResultText</span><span class=p>(</span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=nx>result</span><span class=p>)),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>编写完完整代码后，整理 Go Mod。最后使用 <code>go install</code> 将编写好的 MCP 程序编译成可执行文件（<code>mcpserverdemo.exe</code>）。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>go mod tidy
</span></span><span class=line><span class=cl>go install .
</span></span></code></pre></div><blockquote><p>这里不使用 <code>go build</code> 的原因在于，<code>go install</code> 会将编译后的可执行文件直接放入 <code>GOPATH/bin</code> 文件夹中，由于 <code>GOPATH</code> 配置了系统环境变量，因此可以在任何地方使用这个工具，方便 MCP 客户端调用这个工具。</p><p>可以使用 <code>go clean -i</code> 来清除 <code>go install</code> 生成的可执行文件。</p></blockquote><hr><p>同样使用 Cherry Studio 作为 MCP 客户端。配置方式与 Python 几乎一致，只不过<strong class=chinese>命令</strong>填入 <code>mcpserverdemo.exe</code>（编译后的可执行文件名），<strong class=chinese>参数</strong>不用填。</p><p><img src=https://cdn.pi3.fun/blog/202506081451849.png alt=image.png></p><p>同样在模型对话界面问模型一个两个整数相加问题，它自动调用了 MCP 服务。</p><p><img src=https://cdn.pi3.fun/blog/202506081451295.png alt=image.png></p><p>以上便完成了 Go 语言版本的 MCP 服务开发。</p><p>当然以上 Python 和 Go 版本都只是实现了一个很简单的整数加法 MCP 功能，实际上 MCP 能够实现的功能十分强大。因为它可以调用编程语言提供的工具，理论上来说 AI 可以通过 MCP 服务完成所有编程语言可以完成的功能。</p><p>学习了如何编写一个 MCP 服务，也可以尝试自己编写一些工具，比如<strong class=chinese>爬虫服务</strong>：让 AI 自行爬取你所需要的数据。又或者是<strong class=chinese>操作本地电脑</strong>：让 AI 可以通过编程语言操作本地电脑的 Shell 命令行，完成本地电脑的所有操作，比如办公自动化，系统设置等等，让 AI 真正能够操作你的电脑。</p><blockquote><p>AI + MCP，一切皆有可能。</p></blockquote></article><div class=paginator><a class=link href=https://blog.pi3.fun/post/2025/06/github-api-usage/>← prev</a>
<a class=link href=https://blog.pi3.fun/post/2025/07/how-to-submit-pr-to-github/>next →</a></div><div class=comment><div id=tcomment></div><script src=https://registry.npmmirror.com/twikoo/1.6.39/files/dist/twikoo.min.js></script><script async>twikoo.init({envId:"https://twikoo.pi3.fun/.netlify/functions/twikoo",el:"#tcomment",lang:"zh-CN"})</script></div></main><footer id=footer><div><span style=display:flex;align-items:center><span style=margin-right:.5rem>© 2021 - 2025</span><img src=https://cdn.pi3.fun/static/rainbow.gif loading=lazy width=20 alt=rainbow><span style=margin-left:.5rem>By Liu Chao</span></span></div><div class=footnote><span><a href=https://foreverblog.cn/go.html target=_blank><img src=https://img.foreverblog.cn/logo_en_default.png style=width:auto;height:16px></a> |
<a href=https://www.boyouquan.com/planet-shuttle style="font-size:16px;background-image:linear-gradient(to right,#d55b5b,#4d14e6);background-clip:text;color:transparent;target=" _blank"">博友圈·星球穿梭</a><br><a class=link href=/index.xml><span class="iconfont icon-RSS"></span></a> | <a class=link href=https://github.com/Pi3-l22 target=_ blank><span class="iconfont icon-GitHub"></span></a> | <a class=link href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel=noopener><span class="iconfont icon-creative-commons-fill"></span></a></span></div><div class=blog-icon></div></footer></div><script>document.addEventListener("DOMContentLoaded",function(){const n=localStorage.getItem("theme")||"light",e=document.querySelector('link[data-theme-style="light"]'),t=document.querySelector('link[data-theme-style="dark"]'),i=window.matchMedia("(prefers-color-scheme: dark)");i.addListener(function(n){if(!localStorage.getItem("theme")){const s=n.matches?"dark":"light";document.documentElement.setAttribute("data-theme",s),localStorage.setItem("theme",s),s==="light"?(e.media="all",t.media="not all"):(e.media="not all",t.media="all");const o=document.querySelector("iframe.giscus-frame");if(o){const e=s==="light"?"light_tritanopia":"dark_tritanopia";o.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}}}),n==="light"?(e.media="all",t.media="not all"):(e.media="not all",t.media="all");function o(){const e=document.querySelector("iframe.giscus-frame");if(e){const t=n==="light"?"light_tritanopia":"dark_tritanopia";e.contentWindow.postMessage({giscus:{setConfig:{theme:t}}},"https://giscus.app")}else setTimeout(o,1e3)}o();const s=document.querySelector(".theme-toggle");s&&(s.textContent=n==="light"?"黑暗":"明亮",s.addEventListener("click",function(){const o=document.documentElement.getAttribute("data-theme"),n=o==="light"?"dark":"light";document.documentElement.setAttribute("data-theme",n),localStorage.setItem("theme",n),n==="light"?(e.media="all",t.media="not all"):(e.media="not all",t.media="all");const s=document.querySelector("iframe.giscus-frame");if(s){const e=n==="light"?"light_tritanopia":"dark_tritanopia";s.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}this.textContent=n==="light"?"黑暗":"明亮"}))})</script><script src=https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){confetti({particleCount:150,spread:100})})</script></body></html>