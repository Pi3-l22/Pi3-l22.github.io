<!DOCTYPE html>
<html lang="zh-cn">

<head>
  <meta charset="UTF-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  
  <meta name="author" content="LiuChao">

  
  
  <meta name="description" content="A personal notebook to record my studies and life">
  

  
  <link rel="icon" href="https://blog.pi3.fun/favicon.ico">

  
  
  <meta name="keywords" content=" study  latex  life  academic ">
  

  
  
  
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true,
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code', 'option'],
        }
  };
</script>
<script async defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script"></script>


  

  
  <meta property="og:url" content="https://blog.pi3.fun/post/2023/11/shell%E5%9F%BA%E7%A1%80/">
  <meta property="og:site_name" content="Pi3&#39;s Notes">
  <meta property="og:title" content="Shell基础">
  <meta property="og:description" content="A personal notebook to record my studies and life">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2023-11-24T00:00:00+00:00">
    <meta property="article:modified_time" content="2023-11-24T00:00:00+00:00">
    <meta property="article:tag" content="技术">
    <meta property="article:tag" content="Shell">
    <meta property="article:tag" content="Linux">


  
  <link rel="canonical" href="https://blog.pi3.fun/post/2023/11/shell%E5%9F%BA%E7%A1%80/">

  
  
  
  <meta itemprop="name" content="Shell基础">
  <meta itemprop="description" content="A personal notebook to record my studies and life">
  <meta itemprop="datePublished" content="2023-11-24T00:00:00+00:00">
  <meta itemprop="dateModified" content="2023-11-24T00:00:00+00:00">
  <meta itemprop="wordCount" content="13218">
  <meta itemprop="keywords" content="技术,Shell,Linux">

  
  <link media="screen" rel="stylesheet" href='https://blog.pi3.fun/css/common.css'>
  <link media="screen" rel="stylesheet" href='https://blog.pi3.fun/css/content.css'>

  
  
  <title>Shell基础 - Pi3&#39;s Notes</title>
  

  
  

  
<link rel="stylesheet" href='https://blog.pi3.fun/css/single.css'>

</head>

<body>
  <div id="wrapper">
    <header id="header">
  <h1>
    <a href="https://blog.pi3.fun/">Pi3&#39;s Notes</a>
  </h1>

  <nav>
    
    <span class="nav-bar-item">
      <a class="link" href="/">主页</a>
    </span>
    
    <span class="nav-bar-item">
      <a class="link" href="/articles/">文章</a>
    </span>
    
    <span class="nav-bar-item">
      <a class="link" href="/post/">归档</a>
    </span>
    
    <span class="nav-bar-item">
      <a class="link" href="/about/">关于</a>
    </span>
    
  </nav>
</header>

    
<main id="main" class="post">
  
  
  <h1>Shell基础</h1>
  
  <div>
    <b>Keywords: </b>
    
    <a class="link" href='https://blog.pi3.fun/tags/%E6%8A%80%E6%9C%AF'>#技术</a>
    
    <a class="link" href='https://blog.pi3.fun/tags/shell'>#Shell</a>
    
    <a class="link" href='https://blog.pi3.fun/tags/linux'>#Linux</a>
    
  </div>
  
  
  
  <details>
    <summary>
      <b>Table of Contents</b>
    </summary>
    <div class="toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#简介">简介</a></li>
    <li><a href="#第一个shell脚本">第一个shell脚本</a></li>
    <li><a href="#shell变量">shell变量</a>
      <ul>
        <li><a href="#使用变量">使用变量</a></li>
        <li><a href="#只读变量">只读变量</a></li>
        <li><a href="#删除变量">删除变量</a></li>
        <li><a href="#变量类型">变量类型</a></li>
        <li><a href="#shell字符串">shell字符串</a></li>
      </ul>
    </li>
    <li><a href="#shell数组">shell数组</a>
      <ul>
        <li><a href="#定义数组">定义数组</a></li>
        <li><a href="#读取数组">读取数组</a></li>
        <li><a href="#获取数组长度">获取数组长度</a></li>
        <li><a href="#关联数组">关联数组</a></li>
      </ul>
    </li>
    <li><a href="#shell基本运算符">shell基本运算符</a>
      <ul>
        <li><a href="#算数运算符">算数运算符</a></li>
        <li><a href="#关系运算符">关系运算符</a></li>
        <li><a href="#布尔运算符">布尔运算符</a></li>
        <li><a href="#逻辑运算符">逻辑运算符</a></li>
        <li><a href="#字符串运算符">字符串运算符</a></li>
        <li><a href="#文件测试运算符">文件测试运算符</a></li>
      </ul>
    </li>
    <li><a href="#echo命令">echo命令</a></li>
    <li><a href="#printf命令">printf命令</a>
      <ul>
        <li><a href="#printf转义序列">printf转义序列</a></li>
      </ul>
    </li>
    <li><a href="#test命令">test命令</a>
      <ul>
        <li><a href="#数值测试">数值测试</a></li>
        <li><a href="#字符串测试">字符串测试</a></li>
        <li><a href="#文件测试">文件测试</a></li>
      </ul>
    </li>
    <li><a href="#shell注释">shell注释</a></li>
    <li><a href="#shell的传递参数">shell的传递参数</a></li>
    <li><a href="#shell流程控制">shell流程控制</a>
      <ul>
        <li><a href="#if-then-elif-else-fi">if then elif else fi</a></li>
        <li><a href="#for循环">for循环</a></li>
        <li><a href="#while语句">while语句</a></li>
        <li><a href="#until循环">until循环</a></li>
        <li><a href="#caseesac">case&hellip;esac</a></li>
        <li><a href="#跳出循环">跳出循环</a></li>
      </ul>
    </li>
    <li><a href="#shell函数">shell函数</a>
      <ul>
        <li><a href="#函数的参数">函数的参数</a></li>
      </ul>
    </li>
    <li><a href="#输入输出重定向">输入输出重定向</a>
      <ul>
        <li><a href="#输出重定向">输出重定向</a></li>
        <li><a href="#输入重定向">输入重定向</a></li>
        <li><a href="#重定向深入理解">重定向深入理解</a></li>
        <li><a href="#here-document">Here Document</a></li>
        <li><a href="#devnull-文件">/dev/null 文件</a></li>
      </ul>
    </li>
    <li><a href="#shell文件包含">shell文件包含</a></li>
  </ul>
</nav></div>
  </details>
  
  
  <article class="content">
    
    <h2 id="简介">简介</h2>
<p>Shell 是一个用 C 语言编写的程序，它是用户使用 Linux 的桥梁。Shell 既是一种命令语言，又是一种程序设计语言。</p>
<p>Shell 是指一种应用程序，这个应用程序提供了一个界面，用户通过这个界面访问操作系统内核的服务。</p>
<p>Shell 脚本（shell script），是一种为 shell 编写的脚本程序。</p>
<p>Shell 编程跟 JavaScript、php 编程一样，只要有一个能编写代码的文本编辑器和一个能解释执行的脚本解释器就可以了。</p>
<p>Linux 的 Shell 种类众多，常见的有：</p>
<ul>
<li>Bourne Shell（/usr/bin/sh或/bin/sh）</li>
<li>Bourne Again Shell（/bin/bash）</li>
<li>C Shell（/usr/bin/csh）</li>
<li>K Shell（/usr/bin/ksh）</li>
<li>Shell for Root（/sbin/sh）</li>
</ul>
<p>我们主要学习bash，也就是Bourne Again Shell，Linux默认的shell</p>
<p>在一般情况下，人们并不区分 Bourne Shell 和 Bourne Again Shell，所以，像 <strong>#!/bin/sh</strong>，它同样也可以改为 <strong>#!/bin/bash</strong>。</p>
<p><strong>#!</strong> 告诉系统其后路径所指定的程序即是解释此脚本文件的 Shell 程序。</p>
<h2 id="第一个shell脚本">第一个shell脚本</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;Hello World!&#34;</span>
</span></span></code></pre></div><p><strong>#!</strong> 是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行，即使用哪一种 Shell。</p>
<p>echo 命令用于向窗口输出文本。</p>
<p>两种运行方式：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 将代码保存为test.sh</span>
</span></span><span style="display:flex;"><span>chmod +x ./test.sh <span style="color:#177500"># 增加执行权限</span>
</span></span><span style="display:flex;"><span>./test.sh <span style="color:#177500"># 执行脚本</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 直接运行解释器 不需要在脚本第一行写`#!/bin/bash`</span>
</span></span><span style="display:flex;"><span>/bin/sh test.sh <span style="color:#177500"># </span>
</span></span><span style="display:flex;"><span>/bin/bash test.sh
</span></span><span style="display:flex;"><span>/bin/php test.php
</span></span></code></pre></div><h2 id="shell变量">shell变量</h2>
<p>定义变量时，变量名不用加<code>$</code>，（PHP中的变量需要加$）</p>
<p><code>my_name=&quot;lc622&quot;</code></p>
<p>PS：变量名和等于号之间不能用空格！！！这跟其他语言有很大的不一样</p>
<p>变量的命名规则：</p>
<ul>
<li>只能使用英文字母，数字，下划线，首字符不能以数字开头</li>
<li>中间不能有空格，可以使用下划线</li>
<li>不能使用标点符号</li>
<li>不能使用bash中的关键字（help查看关键字）</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 有效命名举例</span>
</span></span><span style="display:flex;"><span>RUNOOB
</span></span><span style="display:flex;"><span>LD_LIBRARY_PATH
</span></span><span style="display:flex;"><span>_var
</span></span><span style="display:flex;"><span>var2
</span></span><span style="display:flex;"><span><span style="color:#177500"># 无效命名举例</span>
</span></span><span style="display:flex;"><span>?var<span style="color:#000">=</span><span style="color:#1c01ce">123</span>
</span></span><span style="display:flex;"><span>user*name<span style="color:#000">=</span>runoob
</span></span></code></pre></div><p>除了显式地直接赋值，还可以用语句给变量赋值</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 将 /etc 下目录的文件名循环出来</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">for</span> file in <span style="color:#c41a16">`</span>ls /etc<span style="color:#c41a16">`</span>
</span></span><span style="display:flex;"><span>或
</span></span><span style="display:flex;"><span><span style="color:#a90d91">for</span> file in <span style="color:#a90d91">$(</span>ls /etc<span style="color:#a90d91">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># $()和``</span>
</span></span></code></pre></div><h3 id="使用变量">使用变量</h3>
<p>使用一个定义过的变量，在变量名前面加上<code>$</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">my_name</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;lc622&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#000">$my_name</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">${</span><span style="color:#000">my_name</span><span style="color:#c41a16">}</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># {}是可选的 {}是为了帮助解释器识别变量的边界</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">for</span> skill in Ada Coffe Action Java; <span style="color:#a90d91">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;I am good at </span><span style="color:#c41a16">${</span><span style="color:#000">skill</span><span style="color:#c41a16">}</span><span style="color:#c41a16">Script&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">done</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 如果不给skill变量加花括号，写成echo &#34;I am good at $skillScript&#34;，解释器就会把$skillScript当成一个变量（其值为空），代码执行结果就不是我们期望的样子了。</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 推荐给所有变量加上花括号，这是个好的编程习惯。</span>
</span></span></code></pre></div><p>已经定义使用过的变量，可以被重新定义</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">my_name</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;lc622&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#000">$my_name</span>
</span></span><span style="display:flex;"><span><span style="color:#000">my_name</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;Pi3_l22&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#000">$my_name</span>
</span></span></code></pre></div><h3 id="只读变量">只读变量</h3>
<p>使用<code>readonly</code>命令可以将变量定义为只读变量，<strong class=chinese>只读变量的值是不能改变的</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span><span style="color:#000">myname</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;lc622&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">readonly</span> myname
</span></span><span style="display:flex;"><span><span style="color:#000">myname</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;liu&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 这样会报错</span>
</span></span><span style="display:flex;"><span>/bin/sh: NAME: This variable is <span style="color:#a90d91">read</span> only.
</span></span></code></pre></div><h3 id="删除变量">删除变量</h3>
<p>unset命令可以删除变量</p>
<p><code>unset variable_name</code></p>
<p>变量删除之后不能重复使用。<code>unset</code>命令不能删除只读变量</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/sh
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span><span style="color:#000">myname</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;lc622&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">unset</span> myUrl
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#000">$myUrl</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 没有任何输出</span>
</span></span></code></pre></div><h3 id="变量类型">变量类型</h3>
<ol>
<li>局部变量</li>
</ol>
<p>局部变量在==脚本或命令==中定义，仅在==当前shell实例中==有效，其他shell启动的程序不能访问局部变量。</p>
<ol start="2">
<li>环境变量</li>
</ol>
<p>==所有的程序==，包括shell启动的程序，都能访问环境变量，有些程序需要环境变量来保证其正常运行。必要的时候shell脚本也可以定义环境变量。</p>
<ol start="3">
<li>shell变量</li>
</ol>
<p>shell变量是由==shell程序设置的特殊变量==。shell变量中有一部分是==环境变量==，有一部分是==局部变量==，这些变量保证了shell的正常运行</p>
<h3 id="shell字符串">shell字符串</h3>
<p>字符串可以用<strong class=chinese>单引号</strong>，也可以用<strong class=chinese>双引号</strong>，也可以<strong class=chinese>不用引号</strong>。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 单引号</span>
</span></span><span style="display:flex;"><span><span style="color:#000">str</span><span style="color:#000">=</span><span style="color:#c41a16">&#39;This is a string&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 单引号的限制</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 单引号中的字符都会原样输出，字符串中的变量是无效的</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 单引号字符串中不能单独出现一个引号（使用转义符也不行）但是可以成对出现，作为字符串拼接使用</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 双引号</span>
</span></span><span style="display:flex;"><span><span style="color:#000">your_name</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;Pi3&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#000">str</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;Hello,I know you are \&#34;</span><span style="color:#000">$your_name</span><span style="color:#c41a16">\&#34;!\n&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> -e <span style="color:#000">$str</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># -e 使用转义符 不使用的话，会把转义字符原样输出</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 双引号优点</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 双引号里可以有变量</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 双引号里可以出现转义字符</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 拼接字符</span>
</span></span><span style="display:flex;"><span><span style="color:#000">your_name</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;runoob&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 使用双引号拼接</span>
</span></span><span style="display:flex;"><span><span style="color:#000">greeting</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;hello, &#34;</span><span style="color:#000">$your_name</span><span style="color:#c41a16">&#34; !&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#000">greeting_1</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;hello, </span><span style="color:#c41a16">${</span><span style="color:#000">your_name</span><span style="color:#c41a16">}</span><span style="color:#c41a16"> !&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#000">$greeting</span>  <span style="color:#000">$greeting_1</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># hello, runoob ! hello, runoob !</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 使用单引号拼接</span>
</span></span><span style="display:flex;"><span><span style="color:#000">greeting_2</span><span style="color:#000">=</span><span style="color:#c41a16">&#39;hello, &#39;</span><span style="color:#000">$your_name</span><span style="color:#c41a16">&#39; !&#39;</span> <span style="color:#177500"># 用&#39;&#39;包裹的算是字符拼接</span>
</span></span><span style="display:flex;"><span><span style="color:#000">greeting_3</span><span style="color:#000">=</span><span style="color:#c41a16">&#39;hello, ${your_name} !&#39;</span> <span style="color:#177500"># &#39;&#39;单引号的字符串是没有变量，原样输出</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#000">$greeting_2</span>  <span style="color:#000">$greeting_3</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># hello, runoob ! hello, ${your_name} !</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 获取字符串长度</span>
</span></span><span style="display:flex;"><span><span style="color:#000">string</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;abcd&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">${#</span><span style="color:#000">string</span><span style="color:#c41a16">}</span>   <span style="color:#177500"># 输出 4</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 变量为字符串时，${#string} 等价于 ${#string[0]}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">string</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;abcd&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">${#</span><span style="color:#000">string</span>[0]<span style="color:#c41a16">}</span>   <span style="color:#177500"># 输出 4</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 提取字符串</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 从第2个字符开始截取4个字符（第一个字符从0开始）</span>
</span></span><span style="display:flex;"><span><span style="color:#000">string</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;runoob is a great site&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">${</span><span style="color:#000">string</span>:<span style="color:#000">1</span>:<span style="color:#000">4</span><span style="color:#c41a16">}</span> <span style="color:#177500"># 输出 unoo</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 查找字符串</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 查找字符i或o的位置（哪个先出现，就输出哪个）</span>
</span></span><span style="display:flex;"><span><span style="color:#000">string</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;runoob is a great site&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">`</span>expr index <span style="color:#c41a16">&#34;</span><span style="color:#000">$string</span><span style="color:#c41a16">&#34;</span> io<span style="color:#c41a16">`</span>  <span style="color:#177500"># 输出 4</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># ``是反引号（esc下面那个键）</span>
</span></span></code></pre></div><h2 id="shell数组">shell数组</h2>
<p>bash支持一维数组（不支持多维数组），并且没有限定数组的大小</p>
<p>初始化时不需要定义数组大小（与 PHP 类似）</p>
<p>类似于 C 语言，数组元素的下标由 0 开始编号。获取数组中的元素要利用下标，下标可以是整数或算术表达式，其值应大于或等于 0</p>
<h3 id="定义数组">定义数组</h3>
<p>在 Shell 中，用括号来表示数组，数组元素用&quot;空格&quot;符号分割开。</p>
<p>定义数组的一般形式为</p>
<p><code>数组名=(值1 值2 ... 值n)</code></p>
<p><code>array_name=(value0 value1 value2 value3)</code></p>
<p><code>array_name=( value0 value1 value2 value3 )</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>array_name<span style="color:#000">[</span>0<span style="color:#000">]=</span>value0
</span></span><span style="display:flex;"><span>array_name<span style="color:#000">[</span>1<span style="color:#000">]=</span>value1
</span></span><span style="display:flex;"><span>array_name<span style="color:#000">[</span>n<span style="color:#000">]=</span>valuen
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">my_array</span><span style="color:#000">=(</span>A B <span style="color:#c41a16">&#34;C&#34;</span> D<span style="color:#000">)</span>
</span></span></code></pre></div><h3 id="读取数组">读取数组</h3>
<p>读取数组元素值的一般格式为</p>
<p><code>${数组名[下标]}</code></p>
<p><code>valuen=${array_name[n]}</code> 不能直接用echo输出（输出为空）</p>
<p>使用 <strong>@</strong> 或者<code>*</code>符号可以获取数组中的所有元素</p>
<p><code>echo ${array_name[@]}</code></p>
<p><code>echo ${array_name[*]}</code></p>
<h3 id="获取数组长度">获取数组长度</h3>
<p>获取数组长度的方法与字符串的相同 用<code>#</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 取得数组元素的个数</span>
</span></span><span style="display:flex;"><span><span style="color:#000">length</span><span style="color:#000">=</span><span style="color:#c41a16">${#</span><span style="color:#000">array_name</span>[@]<span style="color:#c41a16">}</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 或者</span>
</span></span><span style="display:flex;"><span><span style="color:#000">length</span><span style="color:#000">=</span><span style="color:#c41a16">${#</span><span style="color:#000">array_name</span>[*]<span style="color:#c41a16">}</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 取得数组单个元素的长度（如55的长度就是2）</span>
</span></span><span style="display:flex;"><span><span style="color:#000">lengthn</span><span style="color:#000">=</span><span style="color:#c41a16">${#</span><span style="color:#000">array_name</span>[n]<span style="color:#c41a16">}</span>
</span></span></code></pre></div><h3 id="关联数组">关联数组</h3>
<p>Bash 支持关联数组，可以使用任意的字符串、或者整数作为下标来访问数组元素。</p>
<p>关联数组使用<code>declare</code>命令来声明</p>
<p><code>declare -A array_name</code></p>
<p><strong>-A</strong> 选项就是用于声明一个关联数组。</p>
<p>关联数组的键是唯一的。</p>
<p>访问关联数组元素可以使用指定的键</p>
<p><code>array_name[&quot;index&quot;]</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 定义一个关联数组</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">declare</span> -A <span style="color:#000">site</span><span style="color:#000">=([</span><span style="color:#c41a16">&#34;google&#34;</span><span style="color:#000">]=</span><span style="color:#c41a16">&#34;www.google.com&#34;</span> <span style="color:#000">[</span><span style="color:#c41a16">&#34;runoob&#34;</span><span style="color:#000">]=</span><span style="color:#c41a16">&#34;www.runoob.com&#34;</span> <span style="color:#000">[</span><span style="color:#c41a16">&#34;taobao&#34;</span><span style="color:#000">]=</span><span style="color:#c41a16">&#34;www.taobao.com&#34;</span><span style="color:#000">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 也可以先声明一个关联数组，然后再设置键和值</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">declare</span> -A site
</span></span><span style="display:flex;"><span>site<span style="color:#000">[</span><span style="color:#c41a16">&#34;google&#34;</span><span style="color:#000">]=</span><span style="color:#c41a16">&#34;www.google.com&#34;</span>
</span></span><span style="display:flex;"><span>site<span style="color:#000">[</span><span style="color:#c41a16">&#34;runoob&#34;</span><span style="color:#000">]=</span><span style="color:#c41a16">&#34;www.runoob.com&#34;</span>
</span></span><span style="display:flex;"><span>site<span style="color:#000">[</span><span style="color:#c41a16">&#34;taobao&#34;</span><span style="color:#000">]=</span><span style="color:#c41a16">&#34;www.taobao.com&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">${</span><span style="color:#000">site</span>[<span style="color:#c41a16">&#34;runoob&#34;</span>]<span style="color:#c41a16">}</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 输出</span>
</span></span><span style="display:flex;"><span>www.runoob.com
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 关联数组也可以用@和*来获取所有元素</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;数组的元素为: </span><span style="color:#c41a16">${</span><span style="color:#000">site</span>[*]<span style="color:#c41a16">}</span><span style="color:#c41a16">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;数组的元素为: </span><span style="color:#c41a16">${</span><span style="color:#000">site</span>[@]<span style="color:#c41a16">}</span><span style="color:#c41a16">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 输出</span>
</span></span><span style="display:flex;"><span>数组的元素为: www.google.com www.runoob.com www.taobao.com
</span></span><span style="display:flex;"><span>数组的元素为: www.google.com www.runoob.com www.taobao.com
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 在数组前加上一个！可以获取数组的所有键值</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;数组的键为: </span><span style="color:#c41a16">${</span>!site[*]<span style="color:#c41a16">}</span><span style="color:#c41a16">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;数组的键为: </span><span style="color:#c41a16">${</span>!site[@]<span style="color:#c41a16">}</span><span style="color:#c41a16">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#177500">#输出</span>
</span></span><span style="display:flex;"><span>数组的键为: google runoob taobao
</span></span><span style="display:flex;"><span>数组的键为: google runoob taobao
</span></span></code></pre></div><h2 id="shell基本运算符">shell基本运算符</h2>
<p>Shell 和其他编程语言一样，支持多种运算符，包括：</p>
<ul>
<li>算数运算符</li>
<li>关系运算符</li>
<li>布尔运算符</li>
<li>字符串运算符</li>
<li>文件测试运算符</li>
</ul>
<p>原生的bash不支持简单的数学运算，但是可以通过其他命令来实现，<code>awk</code> <code>expr</code></p>
<p><code>expr</code>最常用</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span><span style="color:#000">val</span><span style="color:#000">=</span><span style="color:#c41a16">`</span>expr <span style="color:#1c01ce">2</span> + 2<span style="color:#c41a16">`</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;两数之和: </span><span style="color:#000">$val</span><span style="color:#c41a16">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>两数之和: <span style="color:#1c01ce">4</span>
</span></span></code></pre></div><p>==PS==：</p>
<ul>
<li>表达式和运算符之间要有==空格==，如2 + 2，而不能写成2+2</li>
<li>完整的表达式要被``包含，这个字符是反引号，esc下面那个键</li>
</ul>
<h3 id="算数运算符">算数运算符</h3>
<p><code>a=10 b=20</code></p>
<table>
<thead>
<tr>
<th style="text-align:left">运算符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">+</td>
<td>加法</td>
<td><code>expr $a + $b</code> 结果为 30。</td>
</tr>
<tr>
<td style="text-align:left">-</td>
<td>减法</td>
<td><code>expr $a - $b</code> 结果为 -10。</td>
</tr>
<tr>
<td style="text-align:left">*</td>
<td>乘法</td>
<td><code>expr $a \* $b</code> 结果为  200。</td>
</tr>
<tr>
<td style="text-align:left">/</td>
<td>除法</td>
<td><code>expr $b / $a</code> 结果为 2。</td>
</tr>
<tr>
<td style="text-align:left">%</td>
<td>取余</td>
<td><code>expr $b % $a</code> 结果为 0。</td>
</tr>
<tr>
<td style="text-align:left">=</td>
<td>赋值</td>
<td>a=$b 把变量 b 的值赋给 a。</td>
</tr>
<tr>
<td style="text-align:left">==</td>
<td>相等。用于比较两个数字，相同则返回 true</td>
<td>[ $a == $b ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">!=</td>
<td>不相等。用于比较两个数字，不相同则返回 true</td>
<td>[ $a != $b ] 返回 true。</td>
</tr>
</tbody>
</table>
<p><strong class=chinese>注意</strong>：==条件表达式要放在方括号之间，并且要有空格==，例如: <strong>[$a==$b]</strong> 是错误的，必须写成 <strong>[ $a == $b ]</strong>。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span><span style="color:#000">a</span><span style="color:#000">=</span><span style="color:#1c01ce">10</span>
</span></span><span style="display:flex;"><span><span style="color:#000">b</span><span style="color:#000">=</span><span style="color:#1c01ce">20</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">val</span><span style="color:#000">=</span><span style="color:#c41a16">`</span>expr <span style="color:#000">$a</span> + <span style="color:#000">$b</span><span style="color:#c41a16">`</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;a + b : </span><span style="color:#000">$val</span><span style="color:#c41a16">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">val</span><span style="color:#000">=</span><span style="color:#c41a16">`</span>expr <span style="color:#000">$a</span> - <span style="color:#000">$b</span><span style="color:#c41a16">`</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;a - b : </span><span style="color:#000">$val</span><span style="color:#c41a16">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">val</span><span style="color:#000">=</span><span style="color:#c41a16">`</span>expr <span style="color:#000">$a</span> <span style="color:#c41a16">\*</span> <span style="color:#000">$b</span><span style="color:#c41a16">`</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;a * b : </span><span style="color:#000">$val</span><span style="color:#c41a16">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">val</span><span style="color:#000">=</span><span style="color:#c41a16">`</span>expr <span style="color:#000">$b</span> / <span style="color:#000">$a</span><span style="color:#c41a16">`</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;b / a : </span><span style="color:#000">$val</span><span style="color:#c41a16">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">val</span><span style="color:#000">=</span><span style="color:#c41a16">`</span>expr <span style="color:#000">$b</span> % <span style="color:#000">$a</span><span style="color:#c41a16">`</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;b % a : </span><span style="color:#000">$val</span><span style="color:#c41a16">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> <span style="color:#000">$a</span> <span style="color:#000">==</span> <span style="color:#000">$b</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;a 等于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> <span style="color:#000">$a</span> !<span style="color:#000">=</span> <span style="color:#000">$b</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;a 不等于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>a + b : <span style="color:#1c01ce">30</span>
</span></span><span style="display:flex;"><span>a - b : -10
</span></span><span style="display:flex;"><span>a * b : <span style="color:#1c01ce">200</span>
</span></span><span style="display:flex;"><span>b / a : <span style="color:#1c01ce">2</span>
</span></span><span style="display:flex;"><span>b % a : <span style="color:#1c01ce">0</span>
</span></span><span style="display:flex;"><span>a 不等于 b
</span></span></code></pre></div><p>==注意==:</p>
<ul>
<li>乘号(*)前边必须加反斜杠()才能实现乘法运算；</li>
<li>if&hellip;then&hellip;fi 是条件语句，后续将会讲解。</li>
<li>在 MAC 中 shell 的 expr 语法是：<strong>$((表达式))</strong>，此处表达式中的 &ldquo;*&rdquo; 不需要转义符号 &ldquo;&quot; 。</li>
</ul>
<h3 id="关系运算符">关系运算符</h3>
<p>关系运算符只支持数字，不支持字符串，除非字符串的值是数字</p>
<p><code>a=10 b=20</code></p>
<table>
<thead>
<tr>
<th style="text-align:left">运算符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-eq</td>
<td>检测两个数是否相等，相等返回 true。</td>
<td>[ $a -eq $b ] 返回 false</td>
</tr>
<tr>
<td style="text-align:left">-ne</td>
<td>检测两个数是否不相等，不相等返回 true。</td>
<td>[ $a -ne $b ] 返回 true</td>
</tr>
<tr>
<td style="text-align:left">-gt</td>
<td>检测左边的数是否大于右边的，如果是，则返回 true。</td>
<td>[ $a -gt $b ] 返回 false</td>
</tr>
<tr>
<td style="text-align:left">-lt</td>
<td>检测左边的数是否小于右边的，如果是，则返回 true。</td>
<td>[ $a -lt $b ] 返回 true</td>
</tr>
<tr>
<td style="text-align:left">-ge</td>
<td>检测左边的数是否大于等于右边的，如果是，则返回 true。</td>
<td>[ $a -ge $b ] 返回 false</td>
</tr>
<tr>
<td style="text-align:left">-le</td>
<td>检测左边的数是否小于等于右边的，如果是，则返回 true。</td>
<td>[ $a -le $b ] 返回 true</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span>
</span></span><span style="display:flex;"><span><span style="color:#000">a</span><span style="color:#000">=</span><span style="color:#1c01ce">10</span>
</span></span><span style="display:flex;"><span><span style="color:#000">b</span><span style="color:#000">=</span><span style="color:#1c01ce">20</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> <span style="color:#000">$a</span> -eq <span style="color:#000">$b</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> -eq </span><span style="color:#000">$b</span><span style="color:#c41a16"> : a 等于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> -eq </span><span style="color:#000">$b</span><span style="color:#c41a16">: a 不等于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> <span style="color:#000">$a</span> -ne <span style="color:#000">$b</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> -ne </span><span style="color:#000">$b</span><span style="color:#c41a16">: a 不等于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> -ne </span><span style="color:#000">$b</span><span style="color:#c41a16"> : a 等于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> <span style="color:#000">$a</span> -gt <span style="color:#000">$b</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> -gt </span><span style="color:#000">$b</span><span style="color:#c41a16">: a 大于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> -gt </span><span style="color:#000">$b</span><span style="color:#c41a16">: a 不大于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> <span style="color:#000">$a</span> -lt <span style="color:#000">$b</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> -lt </span><span style="color:#000">$b</span><span style="color:#c41a16">: a 小于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> -lt </span><span style="color:#000">$b</span><span style="color:#c41a16">: a 不小于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> <span style="color:#000">$a</span> -ge <span style="color:#000">$b</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> -ge </span><span style="color:#000">$b</span><span style="color:#c41a16">: a 大于或等于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> -ge </span><span style="color:#000">$b</span><span style="color:#c41a16">: a 小于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> <span style="color:#000">$a</span> -le <span style="color:#000">$b</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> -le </span><span style="color:#000">$b</span><span style="color:#c41a16">: a 小于或等于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> -le </span><span style="color:#000">$b</span><span style="color:#c41a16">: a 大于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">10</span> -eq 20: a 不等于 b
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">10</span> -ne 20: a 不等于 b
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">10</span> -gt 20: a 不大于 b
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">10</span> -lt 20: a 小于 b
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">10</span> -ge 20: a 小于 b
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">10</span> -le 20: a 小于或等于 b
</span></span></code></pre></div><h3 id="布尔运算符">布尔运算符</h3>
<p><code>a=10 b=20</code></p>
<table>
<thead>
<tr>
<th style="text-align:left">运算符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">!</td>
<td>非运算，表达式为 true 则返回 false，否则返回 true</td>
<td>[ ! false ] 返回 true</td>
</tr>
<tr>
<td style="text-align:left">-o</td>
<td>或运算，有一个表达式为 true 则返回 true</td>
<td>[ $a -lt 20 -o $b -gt 100 ] 返回 true</td>
</tr>
<tr>
<td style="text-align:left">-a</td>
<td>与运算，两个表达式都为 true 才返回 true</td>
<td>[ $a -lt 20 -a $b -gt 100 ] 返回 false</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span>
</span></span><span style="display:flex;"><span><span style="color:#000">a</span><span style="color:#000">=</span><span style="color:#1c01ce">10</span>
</span></span><span style="display:flex;"><span><span style="color:#000">b</span><span style="color:#000">=</span><span style="color:#1c01ce">20</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> <span style="color:#000">$a</span> !<span style="color:#000">=</span> <span style="color:#000">$b</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> != </span><span style="color:#000">$b</span><span style="color:#c41a16"> : a 不等于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> == </span><span style="color:#000">$b</span><span style="color:#c41a16">: a 等于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> <span style="color:#000">$a</span> -lt <span style="color:#1c01ce">100</span> -a <span style="color:#000">$b</span> -gt <span style="color:#1c01ce">15</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> 小于 100 且 </span><span style="color:#000">$b</span><span style="color:#c41a16"> 大于 15 : 返回 true&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> 小于 100 且 </span><span style="color:#000">$b</span><span style="color:#c41a16"> 大于 15 : 返回 false&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> <span style="color:#000">$a</span> -lt <span style="color:#1c01ce">100</span> -o <span style="color:#000">$b</span> -gt <span style="color:#1c01ce">100</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> 小于 100 或 </span><span style="color:#000">$b</span><span style="color:#c41a16"> 大于 100 : 返回 true&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> 小于 100 或 </span><span style="color:#000">$b</span><span style="color:#c41a16"> 大于 100 : 返回 false&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> <span style="color:#000">$a</span> -lt <span style="color:#1c01ce">5</span> -o <span style="color:#000">$b</span> -gt <span style="color:#1c01ce">100</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> 小于 5 或 </span><span style="color:#000">$b</span><span style="color:#c41a16"> 大于 100 : 返回 true&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> 小于 5 或 </span><span style="color:#000">$b</span><span style="color:#c41a16"> 大于 100 : 返回 false&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">10</span> !<span style="color:#000">=</span> <span style="color:#1c01ce">20</span> : a 不等于 b
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">10</span> 小于 <span style="color:#1c01ce">100</span> 且 <span style="color:#1c01ce">20</span> 大于 <span style="color:#1c01ce">15</span> : 返回 <span style="color:#a90d91">true</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">10</span> 小于 <span style="color:#1c01ce">100</span> 或 <span style="color:#1c01ce">20</span> 大于 <span style="color:#1c01ce">100</span> : 返回 <span style="color:#a90d91">true</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">10</span> 小于 <span style="color:#1c01ce">5</span> 或 <span style="color:#1c01ce">20</span> 大于 <span style="color:#1c01ce">100</span> : 返回 <span style="color:#a90d91">false</span>
</span></span></code></pre></div><h3 id="逻辑运算符">逻辑运算符</h3>
<p><code>a=10 b=20</code></p>
<table>
<thead>
<tr>
<th style="text-align:left">运算符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">&amp;&amp;</td>
<td>逻辑的 AND</td>
<td>[[ $a -lt 100 &amp;&amp; $b -gt 100 ]] 返回 false</td>
</tr>
<tr>
<td style="text-align:left">||</td>
<td>逻辑的 OR</td>
<td>[[ $a -lt 100 || $b -gt 100]] 返回true</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span>
</span></span><span style="display:flex;"><span><span style="color:#000">a</span><span style="color:#000">=</span><span style="color:#1c01ce">10</span>
</span></span><span style="display:flex;"><span><span style="color:#000">b</span><span style="color:#000">=</span><span style="color:#1c01ce">20</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[[</span> <span style="color:#000">$a</span> -lt <span style="color:#1c01ce">100</span> <span style="color:#000">&amp;&amp;</span> <span style="color:#000">$b</span> -gt <span style="color:#1c01ce">100</span> <span style="color:#000">]]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;返回 true&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;返回 false&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[[</span> <span style="color:#000">$a</span> -lt <span style="color:#1c01ce">100</span> <span style="color:#000">||</span> <span style="color:#000">$b</span> -gt <span style="color:#1c01ce">100</span> <span style="color:#000">]]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;返回 true&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;返回 false&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>返回 <span style="color:#a90d91">false</span>
</span></span><span style="display:flex;"><span>返回 <span style="color:#a90d91">true</span>
</span></span></code></pre></div><h3 id="字符串运算符">字符串运算符</h3>
<p><code>a为abc b为efg</code></p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>检测两个字符串是否相等，相等返回 true</td>
<td>[ $a = $b ] 返回 false</td>
</tr>
<tr>
<td>!=</td>
<td>检测两个字符串是否不相等，不相等返回 true</td>
<td>[ $a != $b ] 返回 true</td>
</tr>
<tr>
<td>-z</td>
<td>检测字符串长度是否为0，为0返回 true</td>
<td>[ -z $a ] 返回 false</td>
</tr>
<tr>
<td>-n</td>
<td>检测字符串长度是否不为 0，不为 0 返回 true</td>
<td>[ -n &ldquo;$a&rdquo; ] 返回 true</td>
</tr>
<tr>
<td>$</td>
<td>检测字符串是否不为空，不为空返回 true</td>
<td>[ $a ] 返回 true</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span>
</span></span><span style="display:flex;"><span><span style="color:#000">a</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;abc&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#000">b</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;efg&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> <span style="color:#000">$a</span> <span style="color:#000">=</span> <span style="color:#000">$b</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> = </span><span style="color:#000">$b</span><span style="color:#c41a16"> : a 等于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> = </span><span style="color:#000">$b</span><span style="color:#c41a16">: a 不等于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> <span style="color:#000">$a</span> !<span style="color:#000">=</span> <span style="color:#000">$b</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> != </span><span style="color:#000">$b</span><span style="color:#c41a16"> : a 不等于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> != </span><span style="color:#000">$b</span><span style="color:#c41a16">: a 等于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> -z <span style="color:#000">$a</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;-z </span><span style="color:#000">$a</span><span style="color:#c41a16"> : 字符串长度为 0&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;-z </span><span style="color:#000">$a</span><span style="color:#c41a16"> : 字符串长度不为 0&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> -n <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16">&#34;</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;-n </span><span style="color:#000">$a</span><span style="color:#c41a16"> : 字符串长度不为 0&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;-n </span><span style="color:#000">$a</span><span style="color:#c41a16"> : 字符串长度为 0&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> <span style="color:#000">$a</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> : 字符串不为空&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16"> : 字符串为空&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span><span style="color:#000">abc</span> <span style="color:#000">=</span> efg: a 不等于 b
</span></span><span style="display:flex;"><span>abc !<span style="color:#000">=</span> efg : a 不等于 b
</span></span><span style="display:flex;"><span>-z abc : 字符串长度不为 <span style="color:#1c01ce">0</span>
</span></span><span style="display:flex;"><span>-n abc : 字符串长度不为 <span style="color:#1c01ce">0</span>
</span></span><span style="display:flex;"><span>abc : 字符串不为空
</span></span></code></pre></div><h3 id="文件测试运算符">文件测试运算符</h3>
<p>文件测试运算符用于检测 Unix 文件的各种属性</p>
<table>
<thead>
<tr>
<th style="text-align:left">操作符</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-b file</td>
<td style="text-align:left">检测文件是否是块设备文件，如果是，则返回 true。</td>
<td style="text-align:left">[ -b $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-c file</td>
<td style="text-align:left">检测文件是否是字符设备文件，如果是，则返回 true。</td>
<td style="text-align:left">[ -c $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-d file</td>
<td style="text-align:left">检测文件是否是目录，如果是，则返回 true。</td>
<td style="text-align:left">[ -d $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-f file</td>
<td style="text-align:left">检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。</td>
<td style="text-align:left">[ -f $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-g file</td>
<td style="text-align:left">检测文件是否设置了 SGID 位，如果是，则返回 true。</td>
<td style="text-align:left">[ -g $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-k file</td>
<td style="text-align:left">检测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true。</td>
<td style="text-align:left">[ -k $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-p file</td>
<td style="text-align:left">检测文件是否是有名管道，如果是，则返回 true。</td>
<td style="text-align:left">[ -p $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-u file</td>
<td style="text-align:left">检测文件是否设置了 SUID 位，如果是，则返回 true。</td>
<td style="text-align:left">[ -u $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-r file</td>
<td style="text-align:left">检测文件是否可读，如果是，则返回 true。</td>
<td style="text-align:left">[ -r $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-w file</td>
<td style="text-align:left">检测文件是否可写，如果是，则返回 true。</td>
<td style="text-align:left">[ -w $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-x file</td>
<td style="text-align:left">检测文件是否可执行，如果是，则返回 true。</td>
<td style="text-align:left">[ -x $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-s file</td>
<td style="text-align:left">检测文件是否为空（文件大小是否大于0），不为空返回 true。</td>
<td style="text-align:left">[ -s $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-e file</td>
<td style="text-align:left">检测文件（包括目录）是否存在，如果是，则返回 true。</td>
<td style="text-align:left">[ -e $file ] 返回 true。</td>
</tr>
</tbody>
</table>
<p>其他：</p>
<ul>
<li><strong>-S</strong>: 判断某文件是否 socket。</li>
<li><strong>-L</strong>: 检测文件是否存在并且是一个符号链接。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span>
</span></span><span style="display:flex;"><span><span style="color:#000">file</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;/var/www/runoob/test.sh&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> -r <span style="color:#000">$file</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;文件可读&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;文件不可读&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> -w <span style="color:#000">$file</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;文件可写&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;文件不可写&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> -x <span style="color:#000">$file</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;文件可执行&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;文件不可执行&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> -f <span style="color:#000">$file</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;文件为普通文件&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;文件为特殊文件&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> -d <span style="color:#000">$file</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;文件是个目录&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;文件不是个目录&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> -s <span style="color:#000">$file</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;文件不为空&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;文件为空&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> -e <span style="color:#000">$file</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;文件存在&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;文件不存在&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>文件可读
</span></span><span style="display:flex;"><span>文件可写
</span></span><span style="display:flex;"><span>文件可执行
</span></span><span style="display:flex;"><span>文件为普通文件
</span></span><span style="display:flex;"><span>文件不是个目录
</span></span><span style="display:flex;"><span>文件不为空
</span></span><span style="display:flex;"><span>文件存在
</span></span></code></pre></div><h2 id="echo命令">echo命令</h2>
<p>Shell 的 echo 指令与 PHP 的 echo 指令类似，都是用于字符串的输出</p>
<p><code>echo string</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 1.显示普通字符</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;It is a test&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> It is a <span style="color:#a90d91">test</span>  <span style="color:#177500"># 这里的双引号完全可以省略</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 2.显示转义字符</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;\&#34;It is a test\&#34;&#34;</span> <span style="color:#177500"># 双引号也可以省略</span>
</span></span><span style="display:flex;"><span><span style="color:#c41a16">&#34;It is a test&#34;</span>  <span style="color:#177500"># 输出</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 3.显示变量（输入）</span>
</span></span><span style="display:flex;"><span><span style="color:#177500">#!/bin/sh</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">read</span> name 
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$name</span><span style="color:#c41a16"> It is a test&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">[</span>root@www ~<span style="color:#000">]</span><span style="color:#177500"># sh test.sh</span>
</span></span><span style="display:flex;"><span>OK                     <span style="color:#177500">#标准输入</span>
</span></span><span style="display:flex;"><span>OK It is a <span style="color:#a90d91">test</span>        <span style="color:#177500">#输出</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 4.显示换行</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> -e <span style="color:#c41a16">&#34;OK! \n&#34;</span> <span style="color:#177500"># -e 开启转义</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;It is a test&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>OK!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>It is a <span style="color:#a90d91">test</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 5.显示不换行</span>
</span></span><span style="display:flex;"><span><span style="color:#177500">#!/bin/sh</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> -e <span style="color:#c41a16">&#34;OK! \c&#34;</span> <span style="color:#177500"># -e 开启转义 \c 不换行</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># echo -n &#34;OK!&#34; 也是可以的 -n 是指去掉结尾默认的换行</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;It is a test&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>OK! It is a <span style="color:#a90d91">test</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 6.显示结果定向至文件</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;It is a test&#34;</span> &gt; myfile
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 7.原样输出字符串 不进行转义或者取变量（用单引号） 但是用单引号包含变量也可以输出（拼接）</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#39;$name\&#34;&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">$name</span><span style="color:#c41a16">\&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 8.显示命令执行结果</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">`</span>date<span style="color:#c41a16">`</span>  <span style="color:#177500"># 用``反引号包裹可以执行命令</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Thu Jul <span style="color:#1c01ce">24</span> 10:08:46 CST <span style="color:#1c01ce">2014</span>
</span></span></code></pre></div><h2 id="printf命令">printf命令</h2>
<p>printf 命令模仿 C 程序库（library）里的 printf() 程序。</p>
<p>printf 由 POSIX 标准所定义，因此使用 printf 的脚本比使用 echo 移植性好。</p>
<p>printf 使用引用文本或空格分隔的参数，外面可以在 <strong>printf</strong> 中使用格式化字符串，还可以制定字符串的宽度、左右对齐方式等。默认的 printf 不会像 <strong>echo</strong> 自动添加换行符，我们可以手动添加 <strong>\n</strong></p>
<p><code>printf  format-string  [arguments...]</code></p>
<ul>
<li><strong>format-string:</strong> 为格式控制字符串</li>
<li><strong>arguments:</strong> 为参数列表。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;Hello, Shell&#34;</span>
</span></span><span style="display:flex;"><span>Hello, Shell
</span></span><span style="display:flex;"><span>$ <span style="color:#a90d91">printf</span> <span style="color:#c41a16">&#34;Hello, Shell\n&#34;</span>
</span></span><span style="display:flex;"><span>Hello, Shell
</span></span><span style="display:flex;"><span>$
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">#!/bin/bash</span>
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#a90d91">printf</span> <span style="color:#c41a16">&#34;%-10s %-8s %-4s\n&#34;</span> 姓名 性别 体重kg  
</span></span><span style="display:flex;"><span><span style="color:#a90d91">printf</span> <span style="color:#c41a16">&#34;%-10s %-8s %-4.2f\n&#34;</span> 郭靖 男 66.1234 
</span></span><span style="display:flex;"><span><span style="color:#a90d91">printf</span> <span style="color:#c41a16">&#34;%-10s %-8s %-4.2f\n&#34;</span> 杨过 男 48.6543 
</span></span><span style="display:flex;"><span><span style="color:#a90d91">printf</span> <span style="color:#c41a16">&#34;%-10s %-8s %-4.2f\n&#34;</span> 郭芙 女 47.9876
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>姓名     性别   体重kg
</span></span><span style="display:flex;"><span>郭靖     男      66.12
</span></span><span style="display:flex;"><span>杨过     男      48.65
</span></span><span style="display:flex;"><span>郭芙     女      47.99
</span></span></code></pre></div><p><strong>%s %c %d %f</strong> 都是格式替代符，<strong>％s</strong> 输出一个字符串，<strong>％d</strong> 整型输出，<strong>％c</strong> 输出一个字符，<strong>％f</strong> 输出实数，以小数形式输出。</p>
<p><strong>%-10s</strong> 指一个宽度为 10 个字符（<strong>-</strong> 表示左对齐，没有则表示右对齐），任何字符都会被显示在 10 个字符宽的字符内，如果不足则自动以空格填充，超过也会将内容全部显示出来。</p>
<p><strong>%-4.2f</strong> 指格式化为小数，其中 <strong>.2</strong> 指保留2位小数。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span> 
</span></span><span style="display:flex;"><span><span style="color:#177500"># format-string为双引号</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">printf</span> <span style="color:#c41a16">&#34;%d %s\n&#34;</span> <span style="color:#1c01ce">1</span> <span style="color:#c41a16">&#34;abc&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 单引号与双引号效果一样 </span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">printf</span> <span style="color:#c41a16">&#39;%d %s\n&#39;</span> <span style="color:#1c01ce">1</span> <span style="color:#c41a16">&#34;abc&#34;</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 没有引号也可以输出</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">printf</span> %s abcdef
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 格式只指定了一个参数，但多出的参数仍然会按照该格式输出，format-string 被重用</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">printf</span> %s abc def
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">printf</span> <span style="color:#c41a16">&#34;%s\n&#34;</span> abc def
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">printf</span> <span style="color:#c41a16">&#34;%s %s %s\n&#34;</span> a b c d e f g h i j
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 如果没有 arguments，那么 %s 用NULL代替，%d 用 0 代替</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">printf</span> <span style="color:#c41a16">&#34;%s and %d \n&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">#output</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">1</span> abc
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">1</span> abc
</span></span><span style="display:flex;"><span>abcdefabcdefabc
</span></span><span style="display:flex;"><span>def
</span></span><span style="display:flex;"><span>a b c
</span></span><span style="display:flex;"><span>d e f
</span></span><span style="display:flex;"><span>g h i
</span></span><span style="display:flex;"><span>j  
</span></span><span style="display:flex;"><span> and <span style="color:#1c01ce">0</span>
</span></span></code></pre></div><h3 id="printf转义序列">printf转义序列</h3>
<table>
<thead>
<tr>
<th style="text-align:left">序列</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">\a</td>
<td style="text-align:left">警告字符，通常为ASCII的BEL字符</td>
</tr>
<tr>
<td style="text-align:left">\b</td>
<td style="text-align:left">后退</td>
</tr>
<tr>
<td style="text-align:left">\c</td>
<td style="text-align:left">抑制（不显示）输出结果中任何结尾的换行字符（只在%b格式指示符控制下的参数字符串中有效），而且，任何留在参数里的字符、任何接下来的参数以及任何留在格式字符串中的字符，都被忽略</td>
</tr>
<tr>
<td style="text-align:left">\f</td>
<td style="text-align:left">换页（formfeed）</td>
</tr>
<tr>
<td style="text-align:left">\n</td>
<td style="text-align:left">换行</td>
</tr>
<tr>
<td style="text-align:left">\r</td>
<td style="text-align:left">回车（Carriage return）</td>
</tr>
<tr>
<td style="text-align:left">\t</td>
<td style="text-align:left">水平制表符</td>
</tr>
<tr>
<td style="text-align:left">\v</td>
<td style="text-align:left">垂直制表符</td>
</tr>
<tr>
<td style="text-align:left">\\</td>
<td style="text-align:left">一个字面上的反斜杠字符</td>
</tr>
<tr>
<td style="text-align:left">\ddd</td>
<td style="text-align:left">表示1到3位数八进制值的字符。仅在格式字符串中有效</td>
</tr>
<tr>
<td style="text-align:left">\0ddd</td>
<td style="text-align:left">表示1到3位的八进制值字符</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ <span style="color:#a90d91">printf</span> <span style="color:#c41a16">&#34;a string, no processing:&lt;%s&gt;\n&#34;</span> <span style="color:#c41a16">&#34;A\nB&#34;</span>
</span></span><span style="display:flex;"><span>a string, no processing:&lt;A<span style="color:#c41a16">\n</span>B&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ <span style="color:#a90d91">printf</span> <span style="color:#c41a16">&#34;a string, no processing:&lt;%b&gt;\n&#34;</span> <span style="color:#c41a16">&#34;A\nB&#34;</span>
</span></span><span style="display:flex;"><span>a string, no processing:&lt;A
</span></span><span style="display:flex;"><span>B&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ <span style="color:#a90d91">printf</span> <span style="color:#c41a16">&#34;www.runoob.com \a&#34;</span>
</span></span><span style="display:flex;"><span>www.runoob.com $                  <span style="color:#177500">#不换行</span>
</span></span></code></pre></div><h2 id="test命令">test命令</h2>
<p>Shell中的 test 命令用于检查某个条件是否成立，它可以进行数值、字符和文件三个方面的测试</p>
<h3 id="数值测试">数值测试</h3>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-eq</td>
<td style="text-align:left">等于则为真</td>
</tr>
<tr>
<td style="text-align:left">-ne</td>
<td style="text-align:left">不等于则为真</td>
</tr>
<tr>
<td style="text-align:left">-gt</td>
<td style="text-align:left">大于则为真</td>
</tr>
<tr>
<td style="text-align:left">-ge</td>
<td style="text-align:left">大于等于则为真</td>
</tr>
<tr>
<td style="text-align:left">-lt</td>
<td style="text-align:left">小于则为真</td>
</tr>
<tr>
<td style="text-align:left">-le</td>
<td style="text-align:left">小于等于则为真</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">num1</span><span style="color:#000">=</span><span style="color:#1c01ce">100</span>
</span></span><span style="display:flex;"><span><span style="color:#000">num2</span><span style="color:#000">=</span><span style="color:#1c01ce">100</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#a90d91">test</span> $<span style="color:#000">[</span>num1<span style="color:#000">]</span> -eq $<span style="color:#000">[</span>num2<span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#39;两个数相等！&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#39;两个数不相等！&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>两个数相等！
</span></span></code></pre></div><p>代码中的 <strong>[]</strong> 执行基本的算数运算</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span>
</span></span><span style="display:flex;"><span><span style="color:#000">a</span><span style="color:#000">=</span><span style="color:#1c01ce">5</span>
</span></span><span style="display:flex;"><span><span style="color:#000">b</span><span style="color:#000">=</span><span style="color:#1c01ce">6</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">result</span><span style="color:#000">=</span>$<span style="color:#000">[</span>a+b<span style="color:#000">]</span> <span style="color:#177500"># 注意等号两边不能有空格</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;result 为： </span><span style="color:#000">$result</span><span style="color:#c41a16">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>result 为： <span style="color:#1c01ce">11</span>
</span></span></code></pre></div><h3 id="字符串测试">字符串测试</h3>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">=</td>
<td style="text-align:left">等于则为真</td>
</tr>
<tr>
<td style="text-align:left">!=</td>
<td style="text-align:left">不相等则为真</td>
</tr>
<tr>
<td style="text-align:left">-z 字符串</td>
<td style="text-align:left">字符串的长度为零则为真</td>
</tr>
<tr>
<td style="text-align:left">-n 字符串</td>
<td style="text-align:left">字符串的长度不为零则为真</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">num1</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;ru1noob&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#000">num2</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;runoob&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#a90d91">test</span> <span style="color:#000">$num1</span> <span style="color:#000">=</span> <span style="color:#000">$num2</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#39;两个字符串相等!&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#39;两个字符串不相等!&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>两个字符串不相等!
</span></span></code></pre></div><h3 id="文件测试">文件测试</h3>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-e 文件名</td>
<td style="text-align:left">如果文件存在则为真</td>
</tr>
<tr>
<td style="text-align:left">-r 文件名</td>
<td style="text-align:left">如果文件存在且可读则为真</td>
</tr>
<tr>
<td style="text-align:left">-w 文件名</td>
<td style="text-align:left">如果文件存在且可写则为真</td>
</tr>
<tr>
<td style="text-align:left">-x 文件名</td>
<td style="text-align:left">如果文件存在且可执行则为真</td>
</tr>
<tr>
<td style="text-align:left">-s 文件名</td>
<td style="text-align:left">如果文件存在且至少有一个字符则为真</td>
</tr>
<tr>
<td style="text-align:left">-d 文件名</td>
<td style="text-align:left">如果文件存在且为目录则为真</td>
</tr>
<tr>
<td style="text-align:left">-f 文件名</td>
<td style="text-align:left">如果文件存在且为普通文件则为真</td>
</tr>
<tr>
<td style="text-align:left">-c 文件名</td>
<td style="text-align:left">如果文件存在且为字符型特殊文件则为真</td>
</tr>
<tr>
<td style="text-align:left">-b 文件名</td>
<td style="text-align:left">如果文件存在且为块特殊文件则为真</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#a90d91">cd</span> /bin
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#a90d91">test</span> -e ./bash
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#39;文件已存在!&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#39;文件不存在!&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>文件已存在!
</span></span></code></pre></div><p>Shell 还提供了与( -a )、或( -o )、非( ! )三个逻辑操作符用于将测试条件连接起来，其优先级为： <strong>!</strong> 最高， <strong>-a</strong> 次之， <strong>-o</strong> 最低</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#a90d91">cd</span> /bin
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#a90d91">test</span> -e ./notFile -o -e ./bash
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#39;至少有一个文件存在!&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#39;两个文件都不存在&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>至少有一个文件存在!
</span></span></code></pre></div><h2 id="shell注释">shell注释</h2>
<p>以<code>#</code>开头的就是注释，行注释</p>
<p>多行注释</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>:<span style="color:#c41a16">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#c41a16">注释内容...
</span></span></span><span style="display:flex;"><span><span style="color:#c41a16">注释内容...
</span></span></span><span style="display:flex;"><span><span style="color:#c41a16">注释内容...
</span></span></span><span style="display:flex;"><span><span style="color:#c41a16">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># EOF 也可以使用其他符号 </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>:&lt;&lt;<span style="color:#c41a16">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#c41a16">注释内容...
</span></span></span><span style="display:flex;"><span><span style="color:#c41a16">注释内容...
</span></span></span><span style="display:flex;"><span><span style="color:#c41a16">注释内容...
</span></span></span><span style="display:flex;"><span><span style="color:#c41a16">&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>:&lt;&lt;!
</span></span><span style="display:flex;"><span>注释内容...
</span></span><span style="display:flex;"><span>注释内容...
</span></span><span style="display:flex;"><span>注释内容...
</span></span><span style="display:flex;"><span>!
</span></span></code></pre></div><h2 id="shell的传递参数">shell的传递参数</h2>
<p>我们可以在执行 Shell 脚本时，向脚本传递参数，脚本内获取参数的格式为：<strong>$n</strong>。<strong>n</strong> 代表一个数字，1 为执行脚本的第一个参数，2 为执行脚本的第二个参数，以此类推……</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span><span style="color:#177500"># 我们向脚本传递三个参数，并分别输出，其中 $0 为执行的文件名（包含文件路径）</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;Shell 传递参数实例！&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;执行的文件名：</span><span style="color:#000">$0</span><span style="color:#c41a16">&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;第一个参数为：</span><span style="color:#000">$1</span><span style="color:#c41a16">&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;第二个参数为：</span><span style="color:#000">$2</span><span style="color:#c41a16">&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;第三个参数为：</span><span style="color:#000">$3</span><span style="color:#c41a16">&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">#输出</span>
</span></span><span style="display:flex;"><span>$ chmod +x test.sh 
</span></span><span style="display:flex;"><span>$ ./test.sh <span style="color:#1c01ce">1</span> <span style="color:#1c01ce">2</span> <span style="color:#1c01ce">3</span>
</span></span><span style="display:flex;"><span>Shell 传递参数实例！
</span></span><span style="display:flex;"><span>执行的文件名：./test.sh
</span></span><span style="display:flex;"><span>第一个参数为：1
</span></span><span style="display:flex;"><span>第二个参数为：2
</span></span><span style="display:flex;"><span>第三个参数为：3
</span></span></code></pre></div><table>
<thead>
<tr>
<th style="text-align:left"><strong class=chinese>参数处理</strong></th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">$#</td>
<td>传递到脚本的参数个数</td>
</tr>
<tr>
<td style="text-align:left">==$*==</td>
<td>以一个单字符串显示所有向脚本传递的参数。如&rdquo;$*&ldquo;用「&quot;」括起来的情况、以&rdquo;$1 $2 … $n&quot;的形式输出所有参数。</td>
</tr>
<tr>
<td style="text-align:left">$$</td>
<td>脚本运行的当前进程ID号</td>
</tr>
<tr>
<td style="text-align:left">$!</td>
<td>后台运行的最后一个进程的ID号</td>
</tr>
<tr>
<td style="text-align:left">==$@==</td>
<td>与$*相同，但是使用时加引号，并在引号中返回每个参数。如&quot;$@&ldquo;用「&quot;」括起来的情况、以&rdquo;$1&quot; &ldquo;$2&rdquo; … &ldquo;$n&rdquo; 的形式输出所有参数。</td>
</tr>
<tr>
<td style="text-align:left">$-</td>
<td>显示Shell使用的当前选项，与<a href="https://www.runoob.com/linux/linux-comm-set.html">set命令</a>功能相同。</td>
</tr>
<tr>
<td style="text-align:left">$?</td>
<td>显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;Shell 传递参数实例！&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;第一个参数为：</span><span style="color:#000">$1</span><span style="color:#c41a16">&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;参数个数为：</span><span style="color:#000">$#</span><span style="color:#c41a16">&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;传递的参数作为一个字符串显示：</span><span style="color:#000">$*</span><span style="color:#c41a16">&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 输出</span>
</span></span><span style="display:flex;"><span>$ chmod +x test.sh 
</span></span><span style="display:flex;"><span>$ ./test.sh <span style="color:#1c01ce">1</span> <span style="color:#1c01ce">2</span> <span style="color:#1c01ce">3</span>
</span></span><span style="display:flex;"><span>Shell 传递参数实例！
</span></span><span style="display:flex;"><span>第一个参数为：1
</span></span><span style="display:flex;"><span>参数个数为：3
</span></span><span style="display:flex;"><span>传递的参数作为一个字符串显示：1 <span style="color:#1c01ce">2</span> <span style="color:#1c01ce">3</span>
</span></span></code></pre></div><p><code>$*</code>和<code>$@</code>的区别</p>
<ul>
<li>相同：都是引用所有的参数</li>
<li>不同：只有在双引号中体现出来。假设在脚本运行时写了三个参数 1、2、3，则 &quot; * &quot; 等价于 &ldquo;1 2 3&rdquo;（传递了一个参数），而 &ldquo;@&rdquo; 等价于 &ldquo;1&rdquo; &ldquo;2&rdquo; &ldquo;3&rdquo;（传递了三个参数）</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;-- \$* 演示 ---&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">for</span> i in <span style="color:#c41a16">&#34;</span><span style="color:#000">$*</span><span style="color:#c41a16">&#34;</span>; <span style="color:#a90d91">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#000">$i</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">done</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;-- \$@ 演示 ---&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">for</span> i in <span style="color:#c41a16">&#34;</span><span style="color:#000">$@</span><span style="color:#c41a16">&#34;</span>; <span style="color:#a90d91">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#000">$i</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">done</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 输出</span>
</span></span><span style="display:flex;"><span>$ chmod +x test.sh 
</span></span><span style="display:flex;"><span>$ ./test.sh <span style="color:#1c01ce">1</span> <span style="color:#1c01ce">2</span> <span style="color:#1c01ce">3</span>
</span></span><span style="display:flex;"><span>-- <span style="color:#000">$*</span> 演示 ---
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">1</span> <span style="color:#1c01ce">2</span> <span style="color:#1c01ce">3</span>
</span></span><span style="display:flex;"><span>-- <span style="color:#000">$@</span> 演示 ---
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">1</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">2</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">3</span>
</span></span></code></pre></div><h2 id="shell流程控制">shell流程控制</h2>
<p>和 Java、PHP 等语言不一样，sh 的流程控制不可为空，如(以下为 PHP 流程控制写法)</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#000">&lt;?</span><span style="color:#000">php</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> (<span style="color:#000">isset</span>(<span style="color:#000">$_GET</span>[<span style="color:#c41a16">&#34;q&#34;</span>])) {
</span></span><span style="display:flex;"><span>    <span style="color:#000">search</span>(<span style="color:#000">q</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// 不做任何事情
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>}
</span></span></code></pre></div><blockquote>
<p>在 sh/bash 里可不能这么写，如果 else 分支没有语句执行，就不要写这个 else</p>
</blockquote>
<h3 id="if-then-elif-else-fi">if then elif else fi</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#a90d91">if</span> condition1
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>    command1
</span></span><span style="display:flex;"><span><span style="color:#a90d91">elif</span> condition2  <span style="color:#177500"># elif可以没有</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span> 
</span></span><span style="display:flex;"><span>    command2
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>          	 <span style="color:#177500"># else可以没有</span>
</span></span><span style="display:flex;"><span>    commandN
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 写成一行（适用于终端命令提示符）</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> <span style="color:#a90d91">$(</span>ps -ef | grep -c <span style="color:#c41a16">&#34;ssh&#34;</span><span style="color:#a90d91">)</span> -gt <span style="color:#1c01ce">1</span> <span style="color:#000">]</span>; <span style="color:#a90d91">then</span> <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;true&#34;</span>; <span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># if else 的 [...] 判断语句中大于使用 -gt，小于使用 -lt。</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$a</span><span style="color:#c41a16">&#34;</span> -gt <span style="color:#c41a16">&#34;</span><span style="color:#000">$b</span><span style="color:#c41a16">&#34;</span> <span style="color:#000">]</span>; <span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 如果使用 ((...)) 作为判断语句，大于和小于可以直接使用 &gt; 和 &lt;。</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">((</span> a &gt; b <span style="color:#000">))</span>; <span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># []和()的 条件表达式的区别</span>
</span></span><span style="display:flex;"><span><span style="color:#000">[]</span>之间的运算符和变量常量都要有空格
</span></span><span style="display:flex;"><span><span style="color:#000">()</span>之间的运算符和变量常量不能有空格 和<span style="color:#000">()</span>之间可以有也可以没有
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 使用[]</span>
</span></span><span style="display:flex;"><span><span style="color:#000">a</span><span style="color:#000">=</span><span style="color:#1c01ce">10</span>
</span></span><span style="display:flex;"><span><span style="color:#000">b</span><span style="color:#000">=</span><span style="color:#1c01ce">20</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">[</span> <span style="color:#000">$a</span> <span style="color:#000">==</span> <span style="color:#000">$b</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;a 等于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">elif</span> <span style="color:#000">[</span> <span style="color:#000">$a</span> -gt <span style="color:#000">$b</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;a 大于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">elif</span> <span style="color:#000">[</span> <span style="color:#000">$a</span> -lt <span style="color:#000">$b</span> <span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;a 小于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;没有符合的条件&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>a 小于 b
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 使用()</span>
</span></span><span style="display:flex;"><span><span style="color:#000">a</span><span style="color:#000">=</span><span style="color:#1c01ce">10</span>
</span></span><span style="display:flex;"><span><span style="color:#000">b</span><span style="color:#000">=</span><span style="color:#1c01ce">20</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#000">((</span> <span style="color:#000">$a</span> <span style="color:#000">==</span> <span style="color:#000">$b</span> <span style="color:#000">))</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;a 等于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">elif</span> <span style="color:#000">((</span> <span style="color:#000">$a</span> &gt; <span style="color:#000">$b</span> <span style="color:#000">))</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;a 大于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">elif</span> <span style="color:#000">((</span> <span style="color:#000">$a</span> &lt; <span style="color:#000">$b</span> <span style="color:#000">))</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;a 小于 b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;没有符合的条件&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>a 小于 b
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># if else 语句经常与 test 命令结合使用</span>
</span></span><span style="display:flex;"><span><span style="color:#000">num1</span><span style="color:#000">=</span>$<span style="color:#000">[</span>2*3<span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#000">num2</span><span style="color:#000">=</span>$<span style="color:#000">[</span>1+5<span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">if</span> <span style="color:#a90d91">test</span> $<span style="color:#000">[</span>num1<span style="color:#000">]</span> -eq $<span style="color:#000">[</span>num2<span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">then</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#39;两个数字相等!&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">else</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#39;两个数字不相等!&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>两个数字相等!
</span></span></code></pre></div><h3 id="for循环">for循环</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 一般格式</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">for</span> var in item1 item2 ... itemN
</span></span><span style="display:flex;"><span><span style="color:#a90d91">do</span>
</span></span><span style="display:flex;"><span>    command1
</span></span><span style="display:flex;"><span>    command2
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    commandN
</span></span><span style="display:flex;"><span><span style="color:#a90d91">done</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 写成一行</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">for</span> var in item1 item2 ... itemN; <span style="color:#a90d91">do</span> command1; command2… <span style="color:#a90d91">done</span>;
</span></span></code></pre></div><blockquote>
<p>当变量值在列表里，for 循环即执行一次所有命令，使用变量名获取列表中的当前取值。命令可为任何有效的 shell 命令和语句。in 列表可以包含替换、字符串和文件名。</p>
<p>in列表是可选的，如果不用它，for循环使用命令行的位置参数</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 循环赋值整数</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">for</span> loop in <span style="color:#1c01ce">1</span> <span style="color:#1c01ce">2</span> <span style="color:#1c01ce">3</span> <span style="color:#1c01ce">4</span> <span style="color:#1c01ce">5</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;The value is: </span><span style="color:#000">$loop</span><span style="color:#c41a16">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">done</span>
</span></span><span style="display:flex;"><span><span style="color:#177500">#output</span>
</span></span><span style="display:flex;"><span>The value is: <span style="color:#1c01ce">1</span>
</span></span><span style="display:flex;"><span>The value is: <span style="color:#1c01ce">2</span>
</span></span><span style="display:flex;"><span>The value is: <span style="color:#1c01ce">3</span>
</span></span><span style="display:flex;"><span>The value is: <span style="color:#1c01ce">4</span>
</span></span><span style="display:flex;"><span>The value is: <span style="color:#1c01ce">5</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 循环赋值字符串</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">for</span> str in This is a string <span style="color:#177500"># 这里不能有“”包含 不然当成一个元素</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#000">$str</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">done</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>This
</span></span><span style="display:flex;"><span>is
</span></span><span style="display:flex;"><span>a
</span></span><span style="display:flex;"><span>string
</span></span></code></pre></div><h3 id="while语句">while语句</h3>
<p>while 循环用于不断执行一系列命令，也用于从输入文件中读取数据</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 一般格式</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">while</span> condition
</span></span><span style="display:flex;"><span><span style="color:#a90d91">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">command</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">done</span>
</span></span></code></pre></div><p>以下是一个基本的 while 循环，测试条件是：如果 int 小于等于 5，那么条件返回真。int 从 1 开始，每次循环处理时，int 加 1。运行上述脚本，返回数字 1 到 5，然后终止。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span><span style="color:#000">int</span><span style="color:#000">=</span><span style="color:#1c01ce">1</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">while</span><span style="color:#000">((</span> <span style="color:#000">$int</span>&lt;<span style="color:#000">=</span><span style="color:#1c01ce">5</span> <span style="color:#000">))</span> <span style="color:#177500"># 和while可以没有空格 这里可以写成 [ $int -le 5 ] 但是之间有空格</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#000">$int</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">let</span> <span style="color:#c41a16">&#34;int++&#34;</span>    <span style="color:#177500"># 这里可以写成 int=`expr $int + 1`</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">done</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">1</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">2</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">3</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">4</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">5</span>
</span></span></code></pre></div><p>let命令，用于执行一个或多个表达式，变量计算中不需要加上 $ 来表示变量</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># let语法</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">let</span> arg <span style="color:#000">[</span>arg ...<span style="color:#000">]</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># arg：要执行的表达式</span>
</span></span></code></pre></div><p>自加操作：<strong>let no++</strong></p>
<p>自减操作：<strong>let no&ndash;</strong></p>
<p>简写形式 <strong>let no+=10，let no-=20</strong>，分别等同于 <strong>let no=no+10，let no=no-20</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">let</span> <span style="color:#000">a</span><span style="color:#000">=</span>5+4
</span></span><span style="display:flex;"><span><span style="color:#a90d91">let</span> <span style="color:#000">b</span><span style="color:#000">=</span>9-3 
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#000">$a</span> <span style="color:#000">$b</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">9</span> <span style="color:#1c01ce">6</span>
</span></span></code></pre></div><p>while循环可用于读取键盘信息。下面的例子中，输入信息被设置为变量FILM，按<Ctrl-D>结束循环</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#39;按下 &lt;CTRL-D&gt; 退出&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> -n <span style="color:#c41a16">&#39;输入你最喜欢的网站名: &#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">while</span> <span style="color:#a90d91">read</span> FILM
</span></span><span style="display:flex;"><span><span style="color:#a90d91">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;是的！</span><span style="color:#000">$FILM</span><span style="color:#c41a16"> 是一个好网站&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">done</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 输出</span>
</span></span><span style="display:flex;"><span>按下 &lt;CTRL-D&gt; 退出
</span></span><span style="display:flex;"><span>输入你最喜欢的网站名:菜鸟教程
</span></span><span style="display:flex;"><span>是的！菜鸟教程 是一个好网站
</span></span><span style="display:flex;"><span>………………
</span></span></code></pre></div><p>无限循环</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#a90d91">while</span> :
</span></span><span style="display:flex;"><span><span style="color:#a90d91">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">command</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">done</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 或者</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">while</span> <span style="color:#a90d91">true</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">command</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">done</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 或者</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">for</span> <span style="color:#000">((</span> ; ; <span style="color:#000">))</span>
</span></span></code></pre></div><h3 id="until循环">until循环</h3>
<p>until 循环执行一系列命令直至条件为 true 时停止。</p>
<p>until 循环与 while 循环在处理方式上刚好==相反==。</p>
<p>一般 while 循环优于 until 循环，但在某些时候—也只是极少数情况下，until 循环更加有用</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 一般格式</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">until</span> condition
</span></span><span style="display:flex;"><span><span style="color:#a90d91">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">command</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">done</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># condition 一般为条件表达式，如果返回值为 false，则继续执行循环体内的语句，否则跳出循环</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span>
</span></span><span style="display:flex;"><span><span style="color:#000">a</span><span style="color:#000">=</span><span style="color:#1c01ce">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">until</span> <span style="color:#000">[</span> ! <span style="color:#000">$a</span> -lt <span style="color:#1c01ce">10</span> <span style="color:#000">]</span> <span style="color:#177500"># !作用于整体</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">do</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">echo</span> <span style="color:#000">$a</span>
</span></span><span style="display:flex;"><span>   <span style="color:#000">a</span><span style="color:#000">=</span><span style="color:#c41a16">`</span>expr <span style="color:#000">$a</span> + 1<span style="color:#c41a16">`</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">done</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">0</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">1</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">2</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">3</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">4</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">5</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">6</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">7</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">8</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">9</span>
</span></span></code></pre></div><h3 id="caseesac">case&hellip;esac</h3>
<p><strong>case &hellip; esac</strong> 为多选择语句，与其他语言中的 switch &hellip; case 语句类似，是一种多分支选择结构，每个 case 分支用右圆括号开始，用两个分号 <strong>;;</strong> 表示 break，即执行结束，跳出整个 case &hellip; esac 语句，esac（就是 case 反过来）作为结束标记。</p>
<p>可以用 case 语句匹配一个值与一个模式，如果匹配成功，执行相匹配的命令。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#a90d91">case</span> 值 in
</span></span><span style="display:flex;"><span>模式1<span style="color:#000">)</span>
</span></span><span style="display:flex;"><span>    command1
</span></span><span style="display:flex;"><span>    command2
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    commandN
</span></span><span style="display:flex;"><span>    ;;
</span></span><span style="display:flex;"><span>模式2<span style="color:#000">)</span>
</span></span><span style="display:flex;"><span>    command1
</span></span><span style="display:flex;"><span>    command2
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    commandN
</span></span><span style="display:flex;"><span>    ;;
</span></span><span style="display:flex;"><span><span style="color:#a90d91">esac</span>
</span></span></code></pre></div><p>case 工作方式如上所示，取值后面必须为单词 <strong>in</strong>，每一模式必须以右括号结束。取值可以为变量或常数，匹配发现取值符合某一模式后，其间所有命令开始执行直至 <strong>;;</strong>。</p>
<p>取值将检测匹配的每一个模式。一旦模式匹配，则执行完匹配模式相应命令后不再继续其他模式。如果无一匹配模式，使用星号 * 捕获该值，再执行后面的命令。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#39;输入 1 到 4 之间的数字:&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#39;你输入的数字为:&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">read</span> aNum
</span></span><span style="display:flex;"><span><span style="color:#a90d91">case</span> <span style="color:#000">$aNum</span> in
</span></span><span style="display:flex;"><span>    1<span style="color:#000">)</span>  <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#39;你选择了 1&#39;</span>
</span></span><span style="display:flex;"><span>    ;;
</span></span><span style="display:flex;"><span>    2<span style="color:#000">)</span>  <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#39;你选择了 2&#39;</span>
</span></span><span style="display:flex;"><span>    ;;
</span></span><span style="display:flex;"><span>    3<span style="color:#000">)</span>  <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#39;你选择了 3&#39;</span>
</span></span><span style="display:flex;"><span>    ;;
</span></span><span style="display:flex;"><span>    4<span style="color:#000">)</span>  <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#39;你选择了 4&#39;</span>
</span></span><span style="display:flex;"><span>    ;;
</span></span><span style="display:flex;"><span>    *<span style="color:#000">)</span>  <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#39;你没有输入 1 到 4 之间的数字&#39;</span>
</span></span><span style="display:flex;"><span>    ;;
</span></span><span style="display:flex;"><span><span style="color:#a90d91">esac</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>输入 <span style="color:#1c01ce">1</span> 到 <span style="color:#1c01ce">4</span> 之间的数字:
</span></span><span style="display:flex;"><span>你输入的数字为:
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">3</span>
</span></span><span style="display:flex;"><span>你选择了 <span style="color:#1c01ce">3</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/sh
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span>
</span></span><span style="display:flex;"><span><span style="color:#000">site</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;runoob&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">case</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$site</span><span style="color:#c41a16">&#34;</span> in
</span></span><span style="display:flex;"><span>   <span style="color:#c41a16">&#34;runoob&#34;</span><span style="color:#000">)</span> <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;菜鸟教程&#34;</span> 
</span></span><span style="display:flex;"><span>   ;;
</span></span><span style="display:flex;"><span>   <span style="color:#c41a16">&#34;google&#34;</span><span style="color:#000">)</span> <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;Google 搜索&#34;</span> 
</span></span><span style="display:flex;"><span>   ;;
</span></span><span style="display:flex;"><span>   <span style="color:#c41a16">&#34;taobao&#34;</span><span style="color:#000">)</span> <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;淘宝网&#34;</span> 
</span></span><span style="display:flex;"><span>   ;;
</span></span><span style="display:flex;"><span><span style="color:#a90d91">esac</span>
</span></span></code></pre></div><h3 id="跳出循环">跳出循环</h3>
<p>在循环过程中，有时候需要在未达到循环结束条件时强制跳出循环，Shell 使用两个命令来实现该功能：<strong>break</strong> 和 <strong>continue</strong>。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># break 命令</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># break 命令允许跳出所有循环（终止执行后面的所有循环）</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 下面的例子中，脚本进入死循环直至用户输入数字大于5。要跳出这个循环，返回到shell提示符下，需要使用break命令。</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">#!/bin/bash</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">while</span> :
</span></span><span style="display:flex;"><span><span style="color:#a90d91">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> -n <span style="color:#c41a16">&#34;输入 1 到 5 之间的数字:&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">read</span> aNum
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">case</span> <span style="color:#000">$aNum</span> in
</span></span><span style="display:flex;"><span>        1|2|3|4|5<span style="color:#000">)</span> <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;你输入的数字为 </span><span style="color:#000">$aNum</span><span style="color:#c41a16">!&#34;</span>
</span></span><span style="display:flex;"><span>        ;;
</span></span><span style="display:flex;"><span>        *<span style="color:#000">)</span> <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;你输入的数字不是 1 到 5 之间的! 游戏结束&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a90d91">break</span>
</span></span><span style="display:flex;"><span>        ;;
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">esac</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">done</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>输入 <span style="color:#1c01ce">1</span> 到 <span style="color:#1c01ce">5</span> 之间的数字:3
</span></span><span style="display:flex;"><span>你输入的数字为 3!
</span></span><span style="display:flex;"><span>输入 <span style="color:#1c01ce">1</span> 到 <span style="color:#1c01ce">5</span> 之间的数字:7
</span></span><span style="display:flex;"><span>你输入的数字不是 <span style="color:#1c01ce">1</span> 到 <span style="color:#1c01ce">5</span> 之间的! 游戏结束
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># continue命令</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># continue 命令与 break 命令类似，只有一点差别，它不会跳出所有循环，仅仅跳出当前循环。</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">#!/bin/bash</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">while</span> :
</span></span><span style="display:flex;"><span><span style="color:#a90d91">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> -n <span style="color:#c41a16">&#34;输入 1 到 5 之间的数字: &#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">read</span> aNum
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">case</span> <span style="color:#000">$aNum</span> in
</span></span><span style="display:flex;"><span>        1|2|3|4|5<span style="color:#000">)</span> <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;你输入的数字为 </span><span style="color:#000">$aNum</span><span style="color:#c41a16">!&#34;</span>
</span></span><span style="display:flex;"><span>        ;;
</span></span><span style="display:flex;"><span>        *<span style="color:#000">)</span> <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;你输入的数字不是 1 到 5 之间的!&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a90d91">continue</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;游戏结束&#34;</span>
</span></span><span style="display:flex;"><span>        ;;
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">esac</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">done</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 游戏结束永远不会执行</span>
</span></span></code></pre></div><h2 id="shell函数">shell函数</h2>
<p>linux shell 可以用户定义函数，然后在shell脚本中可以随便调用</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 函数的定义</span>
</span></span><span style="display:flex;"><span><span style="color:#000">[</span> <span style="color:#a90d91">function</span> <span style="color:#000">]</span> funname <span style="color:#000">[()]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    action;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">[</span><span style="color:#a90d91">return</span> int;<span style="color:#000">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div><p>==PS==:</p>
<ul>
<li>1、可以带function fun() 定义，也可以直接fun() 定义,不带任何参数。</li>
<li>2、参数返回，可以显示加：return 返回，如果不加，将以最后一条命令运行结果，作为返回值。 return后跟数值n(0-255</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span>
</span></span><span style="display:flex;"><span>demoFun<span style="color:#000">(){</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;这是我的第一个 shell 函数!&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;-----函数开始执行-----&#34;</span>
</span></span><span style="display:flex;"><span>demoFun
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;-----函数执行完毕-----&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>-----函数开始执行-----
</span></span><span style="display:flex;"><span>这是我的第一个 shell 函数!
</span></span><span style="display:flex;"><span>-----函数执行完毕-----
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 带return的函数</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">#!/bin/bash</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>funWithReturn<span style="color:#000">(){</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;这个函数会对输入的两个数字进行相加运算...&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;输入第一个数字: &#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">read</span> aNum
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;输入第二个数字: &#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">read</span> anotherNum
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;两个数字分别为 </span><span style="color:#000">$aNum</span><span style="color:#c41a16"> 和 </span><span style="color:#000">$anotherNum</span><span style="color:#c41a16"> !&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">return</span> <span style="color:#a90d91">$((</span><span style="color:#000">$aNum</span><span style="color:#000">+</span><span style="color:#000">$anotherNum</span><span style="color:#a90d91">))</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>funWithReturn
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;输入的两个数字之和为 </span><span style="color:#000">$?</span><span style="color:#c41a16"> !&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>这个函数会对输入的两个数字进行相加运算...
</span></span><span style="display:flex;"><span>输入第一个数字: 
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">1</span>
</span></span><span style="display:flex;"><span>输入第二个数字: 
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">2</span>
</span></span><span style="display:flex;"><span>两个数字分别为 <span style="color:#1c01ce">1</span> 和 <span style="color:#1c01ce">2</span> !
</span></span><span style="display:flex;"><span>输入的两个数字之和为 <span style="color:#1c01ce">3</span> !
</span></span></code></pre></div><p>函数返回值在调用该函数后通过==$?==来获得。</p>
<p>==注意==：所有函数在使用前必须定义。这意味着必须将函数放在脚本开始部分，直至shell解释器首次发现它时，才可以使用。调用函数仅使用其函数名即可</p>
<h3 id="函数的参数">函数的参数</h3>
<p>在Shell中，调用函数时可以向其传递参数。在函数体内部，通过 $n 的形式来获取参数的值，例如，$1表示第一个参数，$2表示第二个参数&hellip;</p>
<blockquote>
<p>==函数的参数传递和shell的参数传递基本上是一样的==</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span>
</span></span><span style="display:flex;"><span>funWithParam<span style="color:#000">(){</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;第一个参数为 </span><span style="color:#000">$1</span><span style="color:#c41a16"> !&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;第二个参数为 </span><span style="color:#000">$2</span><span style="color:#c41a16"> !&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;第十个参数为 </span><span style="color:#000">$10</span><span style="color:#c41a16"> !&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;第十个参数为 </span><span style="color:#c41a16">${</span><span style="color:#000">10</span><span style="color:#c41a16">}</span><span style="color:#c41a16"> !&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;第十一个参数为 </span><span style="color:#c41a16">${</span><span style="color:#000">11</span><span style="color:#c41a16">}</span><span style="color:#c41a16"> !&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;参数总数有 </span><span style="color:#000">$#</span><span style="color:#c41a16"> 个!&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;作为一个字符串输出所有参数 </span><span style="color:#000">$*</span><span style="color:#c41a16"> !&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>funWithParam <span style="color:#1c01ce">1</span> <span style="color:#1c01ce">2</span> <span style="color:#1c01ce">3</span> <span style="color:#1c01ce">4</span> <span style="color:#1c01ce">5</span> <span style="color:#1c01ce">6</span> <span style="color:#1c01ce">7</span> <span style="color:#1c01ce">8</span> <span style="color:#1c01ce">9</span> <span style="color:#1c01ce">34</span> <span style="color:#1c01ce">73</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>第一个参数为 <span style="color:#1c01ce">1</span> !
</span></span><span style="display:flex;"><span>第二个参数为 <span style="color:#1c01ce">2</span> !
</span></span><span style="display:flex;"><span>第十个参数为 <span style="color:#1c01ce">10</span> !
</span></span><span style="display:flex;"><span>第十个参数为 <span style="color:#1c01ce">34</span> !
</span></span><span style="display:flex;"><span>第十一个参数为 <span style="color:#1c01ce">73</span> !
</span></span><span style="display:flex;"><span>参数总数有 <span style="color:#1c01ce">11</span> 个!
</span></span><span style="display:flex;"><span>作为一个字符串输出所有参数 <span style="color:#1c01ce">1</span> <span style="color:#1c01ce">2</span> <span style="color:#1c01ce">3</span> <span style="color:#1c01ce">4</span> <span style="color:#1c01ce">5</span> <span style="color:#1c01ce">6</span> <span style="color:#1c01ce">7</span> <span style="color:#1c01ce">8</span> <span style="color:#1c01ce">9</span> <span style="color:#1c01ce">34</span> <span style="color:#1c01ce">73</span> !
</span></span></code></pre></div><p>==注意== $10 不能获取第十个参数，（这个的意思是第一个参数加上0）获取第十个参数需要${10}。当n&gt;=10时，需要使用${n}来获取参数。</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数处理</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">$#</td>
<td style="text-align:left">传递到脚本或函数的参数个数</td>
</tr>
<tr>
<td style="text-align:left">$*</td>
<td style="text-align:left">以一个单字符串显示所有向脚本传递的参数</td>
</tr>
<tr>
<td style="text-align:left">$$</td>
<td style="text-align:left">脚本运行的当前进程ID号</td>
</tr>
<tr>
<td style="text-align:left">$!</td>
<td style="text-align:left">后台运行的最后一个进程的ID号</td>
</tr>
<tr>
<td style="text-align:left">$@</td>
<td style="text-align:left">与$*相同，但是使用时加引号，并在引号中返回每个参数。</td>
</tr>
<tr>
<td style="text-align:left">$-</td>
<td style="text-align:left">显示Shell使用的当前选项，与set命令功能相同。</td>
</tr>
<tr>
<td style="text-align:left">$?</td>
<td style="text-align:left">显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。</td>
</tr>
</tbody>
</table>
<h2 id="输入输出重定向">输入输出重定向</h2>
<p>大多数 UNIX 系统命令从你的终端接受输入并将所产生的输出发送回到您的终端。一个命令通常从一个叫标准输入的地方读取输入，默认情况下，这恰好是你的终端。同样，一个命令通常将其输出写入到标准输出，默认情况下，这也是你的终端。</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>command &gt; file</td>
<td>将输出重定向到 file。</td>
</tr>
<tr>
<td>command &lt; file</td>
<td>将输入重定向到 file。</td>
</tr>
<tr>
<td>command &raquo; file</td>
<td>将输出以追加的方式重定向到 file。</td>
</tr>
<tr>
<td>n &gt; file</td>
<td>将文件描述符为 n 的文件重定向到 file。</td>
</tr>
<tr>
<td>n &raquo; file</td>
<td>将文件描述符为 n 的文件以追加的方式重定向到 file。</td>
</tr>
<tr>
<td>n &gt;&amp; m</td>
<td>将输出文件 m 和 n 合并。</td>
</tr>
<tr>
<td>n &lt;&amp; m</td>
<td>将输入文件 m 和 n 合并。</td>
</tr>
<tr>
<td>&laquo; tag</td>
<td>将开始标记 tag 和结束标记 tag 之间的内容作为输入。</td>
</tr>
</tbody>
</table>
<blockquote>
<p><em>需要注意的是文件描述符 0 通常是标准输入（STDIN），1 是标准输出（STDOUT），2 是标准错误输出（STDERR）。</em></p>
</blockquote>
<h3 id="输出重定向">输出重定向</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#177500"># 执行command1然后将输出的内容存入file1</span>
</span></span><span style="display:flex;"><span>command1 &gt; file1 <span style="color:#000">(</span>覆盖写<span style="color:#000">)</span>
</span></span><span style="display:flex;"><span>command1 &gt;&gt; file1 <span style="color:#000">(</span>追加写<span style="color:#000">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 实例</span>
</span></span><span style="display:flex;"><span>$ who &gt; users
</span></span><span style="display:flex;"><span><span style="color:#177500"># 执行后，并没有在终端输出信息，这是因为输出已被从默认的标准输出设备（终端）重定向到指定的文件</span>
</span></span><span style="display:flex;"><span>$ cat users
</span></span><span style="display:flex;"><span>_mbsetupuser console  Oct <span style="color:#1c01ce">31</span> 17:35 
</span></span><span style="display:flex;"><span>tianqixin    console  Oct <span style="color:#1c01ce">31</span> 17:35 
</span></span><span style="display:flex;"><span>tianqixin    ttys000  Dec  <span style="color:#1c01ce">1</span> 11:33 
</span></span><span style="display:flex;"><span><span style="color:#177500"># 输出重定向会覆盖文件内容</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;菜鸟教程：www.runoob.com&#34;</span> &gt; users
</span></span><span style="display:flex;"><span>$ cat users
</span></span><span style="display:flex;"><span>菜鸟教程：www.runoob.com
</span></span><span style="display:flex;"><span>$
</span></span><span style="display:flex;"><span><span style="color:#177500"># 如果不希望文件内容被覆盖，可以使用 &gt;&gt; 追加到文件末尾</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;菜鸟教程：www.runoob.com&#34;</span> &gt;&gt; users
</span></span><span style="display:flex;"><span>$ cat users
</span></span><span style="display:flex;"><span>菜鸟教程：www.runoob.com
</span></span><span style="display:flex;"><span>菜鸟教程：www.runoob.com
</span></span><span style="display:flex;"><span>$
</span></span></code></pre></div><h3 id="输入重定向">输入重定向</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 本来需要从键盘获取输入的命令会转移到文件读取内容</span>
</span></span><span style="display:flex;"><span>command1 &lt; file1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 以下两个命令都是在shell.txt查找flag字段</span>
</span></span><span style="display:flex;"><span>grep flag &lt; shell.txt
</span></span><span style="display:flex;"><span>cat shell.txt | grep flag
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 实例</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 统计 users 文件的行数</span>
</span></span><span style="display:flex;"><span>$ wc -l users
</span></span><span style="display:flex;"><span>       <span style="color:#1c01ce">2</span> users
</span></span><span style="display:flex;"><span><span style="color:#177500"># 也可以将输入重定向到 users 文件</span>
</span></span><span style="display:flex;"><span>$  wc -l &lt; users
</span></span><span style="display:flex;"><span>       <span style="color:#1c01ce">2</span> 
</span></span><span style="display:flex;"><span><span style="color:#177500"># 注意：上面两个例子的结果不同：第一个例子，会输出文件名；第二个不会，因为它仅仅知道从标准输入读取内容</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>command1 &lt; infile &gt; outfile
</span></span><span style="display:flex;"><span><span style="color:#177500"># 同时替换输入和输出，执行command1，从文件infile读取内容，然后将输出写入到outfile中</span>
</span></span></code></pre></div><h3 id="重定向深入理解">重定向深入理解</h3>
<p>一般情况下，每个 Unix/Linux 命令运行时都会打开三个文件：</p>
<ul>
<li>标准输入文件(stdin)：stdin的文件描述符为0，Unix程序默认从stdin读取数据。</li>
<li>标准输出文件(stdout)：stdout 的文件描述符为1，Unix程序默认向stdout输出数据。</li>
<li>标准错误文件(stderr)：stderr的文件描述符为2，Unix程序会向stderr流中写入错误信息。</li>
</ul>
<p>默认情况下，command &gt; file 将 stdout 重定向到 file，command &lt; file 将stdin 重定向到 file。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 如果希望 stderr 重定向到 file，可以这样写</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#a90d91">command</span> 2&gt;file
</span></span><span style="display:flex;"><span><span style="color:#177500"># 如果希望 stderr 追加到 file 文件末尾，可以这样写</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#a90d91">command</span> 2&gt;&gt;file
</span></span><span style="display:flex;"><span><span style="color:#177500"># 2 表示标准错误文件(stderr)</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 如果希望将 stdout 和 stderr 合并后重定向到 file，可以这样写</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#a90d91">command</span> &gt; file 2&gt;&amp;<span style="color:#1c01ce">1</span>
</span></span><span style="display:flex;"><span>或者
</span></span><span style="display:flex;"><span>$ <span style="color:#a90d91">command</span> &gt;&gt; file 2&gt;&amp;<span style="color:#1c01ce">1</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 如果希望对 stdin 和 stdout 都重定向，可以这样写</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#a90d91">command</span> &lt; file1 &gt;file2
</span></span><span style="display:flex;"><span><span style="color:#177500"># command 命令将 stdin 重定向到 file1，将 stdout 重定向到 file2</span>
</span></span></code></pre></div><h3 id="here-document">Here Document</h3>
<p>Here Document 是 Shell 中的一种特殊的重定向方式，用来将输入重定向到一个交互式 Shell 脚本或程序</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#a90d91">command</span> <span style="color:#c41a16">&lt;&lt; delimiter
</span></span></span><span style="display:flex;"><span><span style="color:#c41a16">    document
</span></span></span><span style="display:flex;"><span><span style="color:#c41a16">delimiter</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 它的作用是将两个 delimiter 之间的内容(document) 作为输入传递给 command</span>
</span></span></code></pre></div><p>注意：</p>
<ul>
<li>结尾的delimiter 一定要顶格写，前面不能有任何字符，后面也不能有任何字符，包括空格和 tab 缩进。</li>
<li>开始的delimiter前后的空格会被忽略掉。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># 在命令行中通过 wc -l 命令计算 Here Document 的行数</span>
</span></span><span style="display:flex;"><span>$ wc -l <span style="color:#c41a16">&lt;&lt; EOF
</span></span></span><span style="display:flex;"><span><span style="color:#c41a16">    欢迎来到
</span></span></span><span style="display:flex;"><span><span style="color:#c41a16">    菜鸟教程
</span></span></span><span style="display:flex;"><span><span style="color:#c41a16">    www.runoob.com
</span></span></span><span style="display:flex;"><span><span style="color:#c41a16">EOF</span>
</span></span><span style="display:flex;"><span><span style="color:#1c01ce">3</span>          <span style="color:#177500"># 输出结果为 3 行</span>
</span></span><span style="display:flex;"><span>$
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 我们也可以将 Here Document 用在脚本中</span>
</span></span><span style="display:flex;"><span><span style="color:#177500">#!/bin/bash</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cat <span style="color:#c41a16">&lt;&lt; EOF
</span></span></span><span style="display:flex;"><span><span style="color:#c41a16">欢迎来到
</span></span></span><span style="display:flex;"><span><span style="color:#c41a16">菜鸟教程
</span></span></span><span style="display:flex;"><span><span style="color:#c41a16">www.runoob.com
</span></span></span><span style="display:flex;"><span><span style="color:#c41a16">EOF</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># output</span>
</span></span><span style="display:flex;"><span>欢迎来到
</span></span><span style="display:flex;"><span>菜鸟教程
</span></span><span style="display:flex;"><span>www.runoob.com
</span></span></code></pre></div><h3 id="devnull-文件">/dev/null 文件</h3>
<p>如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到 /dev/null</p>
<p><code>command &gt; /dev/null</code></p>
<p>dev/null 是一个特殊的文件，写入到它的内容都会被丢弃；如果尝试从该文件读取内容，那么什么也读不到。但是 /dev/null 文件非常有用，将命令的输出重定向到它，会起到&quot;禁止输出&quot;的效果</p>
<p>如果希望屏蔽 stdout 和 stderr，可以这样写</p>
<p><code>command &gt; /dev/null 2&gt;&amp;1</code></p>
<p>**注意：**0 是标准输入（STDIN），1 是标准输出（STDOUT），2 是标准错误输出（STDERR）。</p>
<p>这里的 <strong>2</strong> 和 <strong>&gt;</strong> 之间不可以有空格，<strong>2&gt;</strong> 是一体的时候才表示错误输出。</p>
<h2 id="shell文件包含">shell文件包含</h2>
<p>和其他语言一样，Shell 也可以包含外部脚本。这样可以很方便的封装一些公用的代码作为一个独立的文件</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#177500"># Shell 文件包含的语法格式</span>
</span></span><span style="display:flex;"><span>. filename   <span style="color:#177500"># 注意点号(.)和文件名中间有一空格</span>
</span></span><span style="display:flex;"><span>或
</span></span><span style="display:flex;"><span><span style="color:#a90d91">source</span> filename
</span></span></code></pre></div><p>创建两个 shell 脚本文件</p>
<p>test1.sh 代码如下</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span>
</span></span><span style="display:flex;"><span><span style="color:#000">url</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;http://www.runoob.com&#34;</span>
</span></span></code></pre></div><p>test2.sh 代码如下</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#633820">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#633820"></span>
</span></span><span style="display:flex;"><span><span style="color:#177500">#使用 . 号来引用test1.sh 文件</span>
</span></span><span style="display:flex;"><span>. ./test1.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># 或者使用以下包含文件代码 !!sh中没有 source 命令!!</span>
</span></span><span style="display:flex;"><span><span style="color:#177500"># source ./test1.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;</span><span style="color:#000">$url</span><span style="color:#c41a16">&#34;</span>
</span></span></code></pre></div><p>执行test2.sh</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ chmod +x test2.sh 
</span></span><span style="display:flex;"><span>$ ./test2.sh 
</span></span><span style="display:flex;"><span>http://www.runoob.com
</span></span></code></pre></div>
    
  </article>
  <div class="paginator">
    
    <a class="link" href="https://blog.pi3.fun/post/learning_map/web%E5%AE%89%E5%85%A8%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/">← prev</a>
    
    
    <a class="link" href="https://blog.pi3.fun/post/2023/11/neo4j%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/">next →</a>
    
  </div>
  <div class="comment">
    
    
    
    
      <script src="https://giscus.app/client.js"
        data-repo="Pi3-l22/Pi3-l22.github.io"
        data-repo-id="R_kgDOMx7kWw"
        data-category="Announcements"
        data-category-id="DIC_kwDOMx7kW84CjHMe"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="light_tritanopia"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>

    
    
    
  </div>
  
</main>

    <footer id="footer">
  <div>
    <span style="display: flex;align-items: center;">© 2021 - 2024<img src="https://p.sda1.dev/19/68796ec343c7a7eecbe99de4a9df6c66/rainbow.gif" width=20>By LiuChao</span>
  </div>
  
  

  

  <div class="footnote">
    <span><a class=link href=/index.xml><img src="https://p.sda1.dev/19/1e10e3069ca0e5e1bbc881b6a5fb2732/RSS.png" width=12></a>  |  <a class=link href=https://github.com/Pi3-l22 Target=_ blank><img src="https://p.sda1.dev/19/cfb4a6be80dfeb1851a07d065a83dbcc/GitHub.png" width=40></a>  |  <a class=link href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel=noopener><img src="https://p.sda1.dev/19/93838c15ff88af806c9fd7302cced9fa/Cc_by-nc-nd.svg.png" width=48></a>
</span>
  </div>
</footer>

  </div>

  
  

  
  

  
  
  
    
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-WE6L6RF96W"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-WE6L6RF96W');
        }
      </script>
    
  



</body>

</html>
