<!doctype html><html lang=zh-cn><head><script>(function(){const e=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",e)})()</script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=author content="LiuChao"><meta name=description content="在Windows10下安装和使用带有Magisk或者KernelSU的WSA(Windows安卓子系统)"><link rel=icon href=https://blog.pi3.fun/favicon.ico><meta name=keywords content=" study  latex  life  academic "><meta property="og:url" content="https://blog.pi3.fun/post/2023/12/windows10%E4%B8%8B%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8wsa/"><meta property="og:site_name" content="Pi3's Notes"><meta property="og:title" content="Windows10下安装使用WSA"><meta property="og:description" content="在Windows10下安装和使用带有Magisk或者KernelSU的WSA(Windows安卓子系统)"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-12-22T00:00:00+00:00"><meta property="article:modified_time" content="2023-12-22T00:00:00+00:00"><meta property="article:tag" content="技术"><meta property="article:tag" content="Windows"><meta property="article:tag" content="WSA"><link rel=canonical href=https://blog.pi3.fun/post/2023/12/windows10%E4%B8%8B%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8wsa/><meta itemprop=name content="Windows10下安装使用WSA"><meta itemprop=description content="在Windows10下安装和使用带有Magisk或者KernelSU的WSA(Windows安卓子系统)"><meta itemprop=datePublished content="2023-12-22T00:00:00+00:00"><meta itemprop=dateModified content="2023-12-22T00:00:00+00:00"><meta itemprop=wordCount content="960"><meta itemprop=keywords content="技术,Windows,WSA"><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/common.css><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/content.css><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/theme.css><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/iconfont/iconfont.css><link rel=stylesheet href=https://blog.pi3.fun/css/syntax/xcode.css data-theme-style=light media="(prefers-color-scheme: light)"><link rel=stylesheet href=https://blog.pi3.fun/css/syntax/catppuccin-mocha.css data-theme-style=dark media="not all"><title>Windows10下安装使用WSA - Pi3's Notes</title>
<link rel=stylesheet href=https://blog.pi3.fun/css/single.css><link href=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-100-y/KaTeX/0.15.2/katex.min.css rel=stylesheet><script defer src=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-100-y/KaTeX/0.15.2/katex.min.js></script><script defer src=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-100-y/KaTeX/0.15.2/contrib/auto-render.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}],ignoredTags:["script","noscript","style","textarea","pre","code","option"],throwOnError:!1})})</script></head><body><div id=wrapper><header id=header><h1><a href=https://blog.pi3.fun/>Pi3's Notes</a></h1><nav><span class=nav-bar-item><a class=link href=/>文章</a>
</span><span class=nav-bar-item><a class=link href=/post/>归档</a>
</span><span class=nav-bar-item><a class=link href=/about/>关于</a>
</span><span class=nav-bar-item><a class=link href=/links/>友链</a>
</span><span class=nav-bar-item><a class="link theme-toggle" href=javascript:void(0);>黑暗</a></span></nav></header><main id=main class=post><h1>Windows10下安装使用WSA</h1><div><b>Keywords: </b><a class=link href=https://blog.pi3.fun/tags/%E6%8A%80%E6%9C%AF>#技术</a>
<a class=link href=https://blog.pi3.fun/tags/windows>#Windows</a>
<a class=link href=https://blog.pi3.fun/tags/wsa>#WSA</a></div><details><summary><b>Table of Contents</b></summary><div class=toc><nav id=TableOfContents><ul><li><a href=#下载安装>下载安装</a></li><li><a href=#使用adb命令>使用ADB命令</a></li><li><a href=#安装应用程序>安装应用程序</a></li><li><a href=#配置网络>配置网络</a></li><li><a href=#卸载删除>卸载删除</a></li></ul></nav></div></details><article class=content><p>如何在Windows10中使用带有Magisk的安卓子系统</p><p>需要系统版本高于Windows10 22H2</p><p><a href=https://learn.microsoft.com/zh-cn/windows/android/wsa/>适用于 Android™️ 的 Windows 子系统 | Microsoft Learn</a></p><h2 id=下载安装>下载安装</h2><p>首先在Github上找到 <a href=https://github.com/MustardChef/WSABuilds/releases>MustardChef/WSABuilds</a>，下载相应的安装包，Magisk和KernelSU都可以</p><p><img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222212033.png alt=WSA不同版本的安装包></p><p>下载解压完成之后进入文件夹，运行 <code>run.bat</code> 就可以进行安装。安装过程中会自动启动安卓子系统，同时可以修补Magisk镜像</p><p><img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222212306.png alt=运行run.bat>
<img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222212736.png alt=启动WSA>
<img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222212433.png alt=WSA界面>
<img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222214229.png alt=Magisk></p><h2 id=使用adb命令>使用ADB命令</h2><p>安装完成之后，还需要打开系统的开发者选项，方便用adb命令连接和操作安卓子系统</p><p><img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222212637.png alt=打开开发者选项>
<img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222212805.png alt=确保开发者选项已经打开></p><p>打开开发者选择就可以使用电脑上的ADB进行连接操作</p><p><img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222212957.png alt=adb连接>
<img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/2023-12-22_20-54-15.png alt=弹出连接窗口></p><p>连接时如果出现，不能连接的情况，需要重启电脑或者多试几次</p><p><img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222213301.png alt=连接不上的情况></p><p>连接上就可以使用ADB命令操作手机，安装APP，传输文件等功能，当然也可以使用微软商店中的WSA工具箱等软件，更加方便管理安卓子系统</p><p><a href=https://blog.csdn.net/lb245557472/article/details/84068519>ADB 操作命令详解及用法大全</a></p><p>如：</p><p>查看所有应用</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>adb</span> <span class=n>shell</span> <span class=n>pm</span> <span class=n>list</span> <span class=n>packages</span>
</span></span></code></pre></div><p>查看第三方应用</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>adb</span> <span class=n>shell</span> <span class=n>pm</span> <span class=n>list</span> <span class=n>packages</span> <span class=mf>-3</span>
</span></span></code></pre></div><p>安装APK</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>adb</span> <span class=n>install</span> <span class=n>包名</span>
</span></span></code></pre></div><p>卸载软件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>adb</span> <span class=n>uninstall</span> <span class=n>包名</span>
</span></span></code></pre></div><p>打开WSA设置</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>adb</span> <span class=n>shell</span> <span class=n>am</span> <span class=nb>start </span><span class=n>-n</span> <span class=n>com</span><span class=p>.</span><span class=py>android</span><span class=p>.</span><span class=n>settings</span><span class=p>/.</span><span class=n>Settings</span><span class=p>\</span><span class=nv>$WifiSettingsActivity</span>
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222225746.png alt=设置界面></p><p>文件操作</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>下载文件到电脑</span>
</span></span><span class=line><span class=cl><span class=n>adb</span> <span class=n>pull</span> <span class=p>&lt;</span><span class=n>remote</span><span class=p>&gt;</span> <span class=p>[</span><span class=no>local</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>上传文件至手机</span>
</span></span><span class=line><span class=cl><span class=n>adb</span> <span class=n>push</span> <span class=p>&lt;</span><span class=n>local</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=n>remote</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>列出目录内容</span>
</span></span><span class=line><span class=cl><span class=n>adb</span> <span class=n>shell</span> <span class=nb>ls </span><span class=p>[</span><span class=no>options</span><span class=p>]</span> <span class=p>&lt;</span><span class=n>directory</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>切换目录</span>
</span></span><span class=line><span class=cl><span class=n>adb</span> <span class=n>shell</span> <span class=nb>cd </span><span class=p>&lt;</span><span class=n>directory</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>删除文件或目录</span>
</span></span><span class=line><span class=cl><span class=n>adb</span> <span class=n>shell</span> <span class=nb>rm </span><span class=p>[</span><span class=no>options</span><span class=p>]</span> <span class=p>&lt;</span><span class=n>files</span> <span class=n>or</span> <span class=n>directory</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>创建目录</span>
</span></span><span class=line><span class=cl><span class=n>adb</span> <span class=n>shell</span> <span class=n>mkdir</span> <span class=p>[</span><span class=no>options</span><span class=p>]</span> <span class=p>&lt;</span><span class=nb>directory-name</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>………………</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>都是Linux上的命令前加上adb</span> <span class=n>shell</span>
</span></span></code></pre></div><h2 id=安装应用程序>安装应用程序</h2><p>我们可以使用文件操作命令为WSA安装应用程序</p><p>比如我电脑桌面上有一个apk安装包，可以先将文件上传至手机目录</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>adb</span> <span class=n>push</span> <span class=n>C:</span><span class=p>\</span><span class=n>desktop</span><span class=p>\</span><span class=n>kuan</span><span class=p>.</span><span class=py>apk</span> <span class=p>/</span><span class=n>storage</span><span class=p>/</span><span class=n>emulated</span><span class=p>/</span><span class=mf>0</span><span class=p>/</span><span class=n>Download</span>
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222214717.png alt=上传文件></p><p>然后在WSA中对应的文件夹中就可以看见apk安装包</p><p><img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222214810.png alt=上传成功的安装包></p><p>接着点击就可以安装，或者也可以使用ADB命令进行安装</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>adb</span> <span class=n>install</span> <span class=p>/</span><span class=n>storage</span><span class=p>/</span><span class=n>emulated</span><span class=p>/</span><span class=mf>0</span><span class=p>/</span><span class=n>Download</span><span class=p>/</span><span class=n>kuan</span><span class=p>.</span><span class=py>apk</span>
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222215038.png alt=安装APP>
可以直接在电脑桌面打开手机应用程序</p><p><img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222220529.png alt=桌面的APP></p><h2 id=配置网络>配置网络</h2><p>WSA一开始好像是无网络不能上网的，所以还需要配置一下网络环境</p><p>同样使用ADB命令完成</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>adb</span> <span class=n>shell</span> <span class=n>settings</span> <span class=n>put</span> <span class=n>global</span> <span class=n>http_proxy</span> <span class=mf>172.24</span><span class=p>.</span><span class=py>128</span><span class=p>.</span><span class=mf>1</span><span class=err>:</span><span class=mf>12345</span>
</span></span></code></pre></div><p>IP是在电脑终端输入 <code>ipconfig</code> 找到本机在WSL中的IP</p><p>端口是本机的代理端口</p><p><img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222224919.png alt=查看本机在WSL中的IP>
这样之后就可以上网，并且已经挂上代理</p><p><img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222225110.png alt=Google商店>
<img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222230453.png alt=酷安></p><blockquote><p>在配置网络的时候，可能遇到WSA获取不到IP的情况
确保在<strong>启动或关闭Windows功能</strong>中的Hyper-V及其包括的全部选项、虚拟化已经打开
并且BIOS中已经启设备的虚拟化
如果上面都已完成，还是不能获取到IP
最好的办法就是卸载删除后重新安装</p></blockquote><p>正常情况，在WSA的网络设置中，可以看见一个虚拟WIFI</p><p><img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222230044.png alt=虚拟WIFI></p><h2 id=卸载删除>卸载删除</h2><p>只需要在Windows设置中卸载 <em>适用于Android的Windows子系统</em> 程序，然后直接删除原先下载解压出来的文件夹即可</p><p><img src=https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222225018.png alt=卸载WSA></p></article><div class=paginator><a class=link href=https://blog.pi3.fun/post/2023/12/%E4%B8%8D%E5%90%8C%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8B%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%9C%8D%E5%8A%A1%E5%8D%8F%E8%AE%AE%E8%AE%BE%E8%AE%A1/>← prev</a>
<a class=link href=https://blog.pi3.fun/post/2024/01/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/>next →</a></div><div class=comment><div id=tcomment></div><script src=https://registry.npmmirror.com/twikoo/1.6.39/files/dist/twikoo.min.js></script><script async>twikoo.init({envId:"https://twikoo.pi3.fun/.netlify/functions/twikoo",el:"#tcomment",lang:"zh-CN"})</script></div></main><footer id=footer><div><span style=display:flex;align-items:center><span style=margin-right:.5rem>© 2021 - 2024</span><img src=https://p.sda1.dev/20/9c62fc28131254c408b5ad8667a69140/rainbow.gif loading=lazy width=20 alt=rainbow><span style=margin-left:.5rem>By Liu Chao</span></span></div><div class=footnote><span><a class=link href=/index.xml><span class="iconfont icon-RSS"></span></a> | <a class=link href=https://github.com/Pi3-l22 target=_ blank><span class="iconfont icon-GitHub"></span></a> | <a class=link href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel=noopener><span class="iconfont icon-creative-commons-fill"></span></a></span></div><div class=blog-icon></div></footer></div><script>document.addEventListener("DOMContentLoaded",function(){const n=localStorage.getItem("theme")||"light",e=document.querySelector('link[data-theme-style="light"]'),t=document.querySelector('link[data-theme-style="dark"]'),i=window.matchMedia("(prefers-color-scheme: dark)");i.addListener(function(n){if(!localStorage.getItem("theme")){const s=n.matches?"dark":"light";document.documentElement.setAttribute("data-theme",s),localStorage.setItem("theme",s),s==="light"?(e.media="all",t.media="not all"):(e.media="not all",t.media="all");const o=document.querySelector("iframe.giscus-frame");if(o){const e=s==="light"?"light_tritanopia":"dark_tritanopia";o.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}}}),n==="light"?(e.media="all",t.media="not all"):(e.media="not all",t.media="all");function o(){const e=document.querySelector("iframe.giscus-frame");if(e){const t=n==="light"?"light_tritanopia":"dark_tritanopia";e.contentWindow.postMessage({giscus:{setConfig:{theme:t}}},"https://giscus.app")}else setTimeout(o,1e3)}o();const s=document.querySelector(".theme-toggle");s&&(s.textContent=n==="light"?"黑暗":"明亮",s.addEventListener("click",function(){const o=document.documentElement.getAttribute("data-theme"),n=o==="light"?"dark":"light";document.documentElement.setAttribute("data-theme",n),localStorage.setItem("theme",n),n==="light"?(e.media="all",t.media="not all"):(e.media="not all",t.media="all");const s=document.querySelector("iframe.giscus-frame");if(s){const e=n==="light"?"light_tritanopia":"dark_tritanopia";s.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}this.textContent=n==="light"?"黑暗":"明亮"}))})</script></body></html>