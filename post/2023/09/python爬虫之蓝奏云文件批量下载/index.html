<!DOCTYPE html>
<html lang="zh-cn">

<head>
  
  <script>
    (function() {
      const currentTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', currentTheme);
    })();
  </script>

  <meta charset="UTF-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  
  <meta name="author" content="LiuChao">

  
  
  <meta name="description" content="Pythonçˆ¬è™«ä¹‹è“å¥äº‘æ–‡ä»¶æ‰¹é‡ä¸‹è½½">
  

  
  <link rel="icon" href="https://blog.pi3.fun/favicon.ico">

  
  
  <meta name="keywords" content=" study  latex  life  academic ">
  

  
  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css"
  integrity="sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
  integrity="sha384-0fdwu/T/EQMsQlrHCCHoH10pkPLlKA1jL5dFyUOvB3lfeT2540/2g6YgSi2BL14p" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/auto-render.min.js"
  integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    renderMathInElement(document.body, {
      delimiters: [
        { left: '$$', right: '$$', display: true },
        { left: '\\[', right: '\\]', display: true },
        { left: '$', right: '$', display: false },
        { left: '\\(', right: '\\)', display: false }
      ],
      ignoredTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code', 'option'],
      throwOnError: false
    });
  });
</script>


  

  
  <meta property="og:url" content="https://blog.pi3.fun/post/2023/09/python%E7%88%AC%E8%99%AB%E4%B9%8B%E8%93%9D%E5%A5%8F%E4%BA%91%E6%96%87%E4%BB%B6%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD/">
  <meta property="og:site_name" content="Pi3&#39;s Notes">
  <meta property="og:title" content="Pythonçˆ¬è™«ä¹‹è“å¥äº‘æ–‡ä»¶æ‰¹é‡ä¸‹è½½">
  <meta property="og:description" content="Pythonçˆ¬è™«ä¹‹è“å¥äº‘æ–‡ä»¶æ‰¹é‡ä¸‹è½½">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2023-09-07T00:00:00+00:00">
    <meta property="article:modified_time" content="2023-09-07T00:00:00+00:00">
    <meta property="article:tag" content="æŠ€æœ¯">
    <meta property="article:tag" content="Python">


  
  <link rel="canonical" href="https://blog.pi3.fun/post/2023/09/python%E7%88%AC%E8%99%AB%E4%B9%8B%E8%93%9D%E5%A5%8F%E4%BA%91%E6%96%87%E4%BB%B6%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD/">

  
  
  
  <meta itemprop="name" content="Pythonçˆ¬è™«ä¹‹è“å¥äº‘æ–‡ä»¶æ‰¹é‡ä¸‹è½½">
  <meta itemprop="description" content="Pythonçˆ¬è™«ä¹‹è“å¥äº‘æ–‡ä»¶æ‰¹é‡ä¸‹è½½">
  <meta itemprop="datePublished" content="2023-09-07T00:00:00+00:00">
  <meta itemprop="dateModified" content="2023-09-07T00:00:00+00:00">
  <meta itemprop="wordCount" content="3143">
  <meta itemprop="keywords" content="æŠ€æœ¯,Python">

  
  <link media="screen" rel="stylesheet" href='https://blog.pi3.fun/css/common.css'>
  <link media="screen" rel="stylesheet" href='https://blog.pi3.fun/css/content.css'>
  
  <link media="screen" rel="stylesheet" href='https://blog.pi3.fun/css/theme.css'>
  
  <link media="screen" rel="stylesheet" href='https://blog.pi3.fun/css/iconfont/iconfont.css'>
  
  <link rel="stylesheet" href='https://blog.pi3.fun/css/syntax/xcode.css' 
    data-theme-style="light" 
    media="(prefers-color-scheme: light)">
  <link rel="stylesheet" href='https://blog.pi3.fun/css/syntax/catppuccin-mocha.css' 
    data-theme-style="dark" 
    media="not all">

  
  
  <title>Pythonçˆ¬è™«ä¹‹è“å¥äº‘æ–‡ä»¶æ‰¹é‡ä¸‹è½½ - Pi3&#39;s Notes</title>
  

  
  

  
<link rel="stylesheet" href='https://blog.pi3.fun/css/single.css'>

</head>

<body>
  <div id="wrapper">
    <header id="header">
  <h1>
    <a href="https://blog.pi3.fun/">Pi3&#39;s Notes</a>
  </h1>

  <nav>
    
    <span class="nav-bar-item">
      <a class="link" href="/">ä¸»é¡µ</a>
    </span>
    
    <span class="nav-bar-item">
      <a class="link" href="/post/">å½’æ¡£</a>
    </span>
    
    <span class="nav-bar-item">
      <a class="link" href="/about/">å…³äº</a>
    </span>
    
    <span class="nav-bar-item">
      <a class="link theme-toggle" href="javascript:void(0);">é»‘æš—</a>
    </span>
  </nav>
</header>

    
<main id="main" class="post">
  
  
  <h1>Pythonçˆ¬è™«ä¹‹è“å¥äº‘æ–‡ä»¶æ‰¹é‡ä¸‹è½½</h1>
  
  <div>
    <b>Keywords: </b>
    
    <a class="link" href='https://blog.pi3.fun/tags/%E6%8A%80%E6%9C%AF'>#æŠ€æœ¯</a>
    
    <a class="link" href='https://blog.pi3.fun/tags/python'>#Python</a>
    
  </div>
  
  
  
  
  <article class="content">
    
    <h1 id="èµ·æº">èµ·æº</h1>
<p>æœ€è¿‘åˆšå¥½å…¥é—¨äº†Pythonçˆ¬è™«ï¼Œåœ¨æ­¤ä¹‹å‰ç³»ç»Ÿå®Œæ•´çš„å­¦äº†Pythonçš„åŸºç¡€å…¥é—¨çŸ¥è¯†ï¼Œå­¦ä¹ çˆ¬è™«é¡ºä¾¿ä¹Ÿå¯ä»¥å·©å›ºä¹‹å‰å­¦ä¹ çš„PythonåŸºç¡€çŸ¥è¯†ã€‚</p>
<p>å­¦ä¹ Pythonçˆ¬è™«ï¼Œå…ˆå»çœ‹äº†<a href="https://www.bilibili.com/video/BV1d54y1g7db/?spm_id_from=333.999.0.0&amp;vd_source=30a68d7597f750b905825950d4412d50">Bç«™çš„ä»‹ç»è§†é¢‘</a>ï¼Œå¾ˆçŸ­ï¼Œåªæœ‰4ä¸ªå°æ—¶ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰åšç¬”è®°ï¼Œå°±ç›´æ¥2ä¸ªå°æ—¶çœ‹å®Œï¼Œå­¦ä¼šäº†Pythonçš„requestè¯·æ±‚ï¼Œç½‘é¡µçš„çŸ¥è¯†ä¹‹å‰åœ¨HTMLå’ŒCSSå­¦ä¹ è¿‡äº†ã€‚æ‰€ä»¥æ„Ÿè§‰è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œè·Ÿç€è§†é¢‘åšäº†<a href="L:%5CPython_file%5CPython%E5%AD%A6%E4%B9%A0%5C03_Python%E7%88%AC%E8%99%AB%5C%E7%88%AC%E5%8F%96%E8%B1%86%E7%93%A3TOP250.py"><strong>çˆ¬å–è±†ç“£TOP250ç”µå½±åçš„å°é¡¹ç›®</strong></a>ã€‚å…¶ä»–çš„å°±ä¸€ç‚¹éƒ½æ²¡å­¦è¿‡ã€‚</p>
<p>æ¥ç€æˆ‘å°±é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘æƒ³è¦æ‰¹é‡ä¸‹è½½Bç«™UPä¸»åˆ†äº«åœ¨è“å¥äº‘ä¸Šçš„æ–‡ä»¶ï¼Œèµ„æºå¾ˆä¸°å¯Œï¼Œæ–‡ä»¶èµ„æ–™å¾ˆå¤šï¼Œä¸€ä¸ªä¸ªä¸‹è½½å°±å¾ˆæ…¢å¾ˆè´¹åŠ²ï¼Œæˆ‘å°±æƒ³ç€èƒ½ä¸èƒ½ç”¨Pythonçˆ¬è™«å®Œæˆè¿™ä¸ªå°é¡¹ç›®
<a href="https://github.com/Pi3-l22/lanzou_download">é¡¹ç›®æ–‡ä»¶åœ°å€</a></p>
<h1 id="è¿‡ç¨‹">è¿‡ç¨‹</h1>
<p>æˆ‘å…ˆæŠŠéœ€è¦çš„5ä¸ªé“¾æ¥å’Œå¯¹åº”çš„å¯†ç ï¼Œå¤åˆ¶ä¿å­˜åˆ°æœ¬åœ°çš„æ–‡æœ¬é‡Œã€‚å¦‚ä½•é€šè¿‡Pythonè¿›è¡Œæ•´ç†å’Œæ ¼å¼åŒ–ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">MIUIè§£blé”å’Œåˆ·æœºç›¸å…³å·¥å…·ï¼š  
</span></span><span class="line"><span class="cl">https://wwvd.lanzoul.com/b030ok9yb  
</span></span><span class="line"><span class="cl">å¯†ç :9cj9  
</span></span><span class="line"><span class="cl">Rootç›¸å…³æ–‡ä»¶ï¼š  
</span></span><span class="line"><span class="cl">https://wwvd.lanzoul.com/b030q0gef  
</span></span><span class="line"><span class="cl">å¯†ç :hktq  
</span></span><span class="line"><span class="cl">é¢å…·æ¨¡å—ï¼ˆæŒç»­æ›´æ–°ingï¼‰ï¼š  
</span></span><span class="line"><span class="cl">https://wwvd.lanzoul.com/b030q3egd  
</span></span><span class="line"><span class="cl">å¯†ç :hf8n  
</span></span><span class="line"><span class="cl">lspæ¨¡å—ï¼ˆæŒç»­æ›´æ–°ingï¼‰ï¼š  
</span></span><span class="line"><span class="cl">https://wwvd.lanzoul.com/b0312jcmf  
</span></span><span class="line"><span class="cl">å¯†ç :9d18  
</span></span><span class="line"><span class="cl">å„ç§ä¼˜åŒ–è½¯ä»¶ï¼ˆå·¥å…·è½¯ä»¶ï¼‰ï¼š  
</span></span><span class="line"><span class="cl">https://wwr.lanzoui.com/b030oka5i  
</span></span><span class="line"><span class="cl">å¯†ç :fwjr
</span></span></code></pre></div><p>æå–å…¶ä¸­çš„æ ‡é¢˜ä½œä¸ºæ–‡ä»¶å¤¹åï¼Œé“¾æ¥å’Œå¯†ç ï¼Œåˆ†åˆ«å­˜åœ¨ä¸¤ä¸ªåˆ—è¡¨ä¸­ï¼Œç´¢å¼•ä¸€ä¸€å¯¹åº”ï¼Œæ–¹ä¾¿åç»­çš„æ“ä½œã€‚å¹¶æŠŠè¿™ä¸€æ­¥æ“ä½œåˆ†è£…æˆä¸€ä¸ªå‡½æ•°ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># æ•´ç†é“¾æ¥åœ°å€  </span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">get_url_data</span><span class="p">():</span>  
</span></span><span class="line"><span class="cl">    <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;è“å¥äº‘æ–‡ä»¶é“¾æ¥åœ°å€.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl">    <span class="n">lines</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>  
</span></span><span class="line"><span class="cl">    <span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  
</span></span><span class="line"><span class="cl">    <span class="n">url</span> <span class="o">=</span> <span class="p">[]</span>  
</span></span><span class="line"><span class="cl">    <span class="n">password</span> <span class="o">=</span> <span class="p">[]</span>  
</span></span><span class="line"><span class="cl">    <span class="n">dir_name</span> <span class="o">=</span> <span class="p">[]</span>  
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>  
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;h&#39;</span><span class="p">:</span>  
</span></span><span class="line"><span class="cl">            <span class="n">url</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>  <span class="c1"># å»é™¤ç»“å°¾æ¢è¡Œç¬¦  </span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;å¯†ç &#39;</span><span class="p">):</span>  
</span></span><span class="line"><span class="cl">            <span class="n">password</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()[</span><span class="mi">3</span><span class="p">:])</span>  
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>  
</span></span><span class="line"><span class="cl">            <span class="n">dir_name</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>  
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">url</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">dir_name</span>
</span></span></code></pre></div><p>æ¥ç€å°±æ˜¯å˜é‡è¿™ä¸¤ä¸ªåˆ—è¡¨ï¼Œåˆ†åˆ«è®¿é—®å¯¹åº”çš„åˆ†äº«æ–‡ä»¶é“¾æ¥ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„åˆ†äº«é“¾æ¥ï¼Œé‡Œé¢è¿˜æœ‰å¾ˆå¤šçš„æ–‡ä»¶ã€‚</p>
<p>å…ˆç”¨<code>request</code>è¯·æ±‚é“¾æ¥ï¼Œè¿™é‡Œé‡åˆ°äº†æˆ‘ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æˆ‘ä»¬åº”æ€ä¹ˆæŠŠå¯†ç è¾“å…¥è¿›å»ã€‚æŸ¥çœ‹æºç ï¼Œå‘ç°æ˜¯ä¸€ä¸ªè¾“å…¥æ¡†inputæ¥æ”¶å¯†ç ï¼Œä½†æ˜¯æˆ‘æ˜¯åº”è¯¥ç›´æ¥æŠŠå¯†ç å†™åœ¨è¿™ä¸ªæ–‡æœ¬æ¡†ä¸­è¿˜æ˜¯ç›´æ¥getæˆ–è€…postè¯·æ±‚ã€‚</p>
<p>æºç çœ‹ç€çœ‹ç€ï¼Œæˆ‘æ‰¾åˆ°äº†ç­”æ¡ˆã€‚è¿™é‡Œç½‘é¡µç”¨äº†<code>ajax</code>çš„postè¯·æ±‚ï¼ŒæŠŠä¸€å †å‚æ•°ï¼ˆæˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ä»€ä¹ˆï¼‰é‡Œé¢åŒ…å«pwdï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¾“å…¥çš„å¯†ç ï¼Œä¸€èµ·æäº¤ä¸Šå»ã€‚æ‰€ä»¥æˆ‘çš„æ–¹å‘å°±æ˜¯ï¼Œç”¨requestçš„postæ–¹æ³•è¿›è¡Œè¯·æ±‚ã€‚å‡†å¤‡dataå’Œheadersçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°è¿™ä¸ªdataé‡Œé¢çš„å…¶ä»–å‚æ•°ä¹Ÿå˜åŠ¨çš„ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¸ä¸€æ ·ï¼Œé‚£æˆ‘è¯¥æ€ä¹ˆå†™è¿™ä¸ªå‚æ•°ã€‚äºæ˜¯æˆ‘åˆå»çœ‹JavaScriptçš„ä»£ç ï¼Œå‘ç°é‡Œé¢ç«Ÿç„¶æœ‰è¿™äº›å‚æ•°ï¼Œè¿™äº›å‚æ•°å…¨éƒ¨éƒ½æ˜¯é€šè¿‡jsä»£ç ä¸­çš„ajaxè¯·æ±‚ä¸Šå»ï¼Œå‚æ•°çš„å€¼ä¹Ÿéƒ½å†™åœ¨ä¸Šé¢ï¼Œé‚£ä¹ˆæˆ‘çš„æ€è·¯å°±æ˜¯å…ˆè¯·æ±‚å½“å‰è¿™ä¸ªç½‘é¡µï¼Œä»ç½‘é¡µä¸­æ‹¿åˆ°jsä¸­çš„å‚æ•°ã€‚</p>
<p>ä½†æ˜¯åœ¨æ“ä½œçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°Pythonä¸­çš„requestæ ¹æœ¬è¯·æ±‚ä¸åˆ°jsä»£ç ï¼Œåªæœ‰jsçš„é“¾æ¥åœ°å€ï¼Œè·Ÿç½‘é¡µçš„å…ƒç´ æŸ¥çœ‹å™¨æ˜¾ç¤ºçš„ä¸ä¸€æ ·ã€‚ä¸Šç½‘æœç´¢å‘ç°ï¼Œrequestè¯·æ±‚çš„æ˜¯ç½‘é¡µæ¸²æŸ“ä¹‹å‰çš„ä»£ç ï¼Œå½“ç„¶ä¸å¯èƒ½æœ‰jsä»£ç ï¼Œè¿™å°±æ˜¯æˆ‘é‡åˆ°çš„ç¬¬äºŒä¸ªé—®é¢˜ã€‚</p>
<p>è¿™ä¸ªé—®é¢˜æˆ‘æƒ³çš„æœ‰ç‚¹ä¹…ï¼Œæœ€åæˆ‘æƒ³åˆ°çš„æ˜¯ï¼Œå¯ä»¥ä¸å¯ä»¥é€šè¿‡è·å–scriptæ ‡ç­¾ä¸Šé¢çš„divæ ‡ç­¾ï¼Œåœ¨é€šè¿‡divçš„ä¸‹ä¸€ä¸ªå…„å¼Ÿæ ‡ç­¾æ¥è·å–scriptæ ‡ç­¾ï¼Œå› ä¸ºdivæ ‡ç­¾æ˜¯åœ¨ç½‘é¡µæ¸²æŸ“å‰å°±å·²ç»å­˜åœ¨äº†ï¼Œè€Œä¸”è¿™æ ·çš„æ–¹æ³•åœ¨JavaScriptçš„ä»£ç ä¸­ç»å¸¸ä¼šç”¨åˆ°ã€‚</p>
<p>äºæ˜¯æˆ‘è¯•ç€å»æ“ä½œä¸€ä¸‹ï¼Œå‘ç°æ˜¯çœŸçš„å¯è¡Œçš„ï¼Œ==ä¸è¿‡ä¹Ÿä¸çŸ¥é“å…¶ä¸­çš„åŸç†æ˜¯ä»€ä¹ˆã€‚== æ‹¿åˆ°äº†scriptæ ‡ç­¾ä¸­çš„å†…å®¹ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æå–æˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯ï¼Œè¿™é‡Œå°±æ˜¯è€ƒå¯Ÿæˆ‘å¯¹å­—ç¬¦ä¸²çš„å„ç§æ“ä½œçš„ç†Ÿæ‚‰ç¨‹åº¦ï¼Œäºæ˜¯æˆ‘çš„å†™æ³•æ˜¯è¿™æ ·çš„ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">get_key</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>  
</span></span><span class="line"><span class="cl">    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl">    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl">    <span class="n">div</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;info&#39;</span><span class="p">})</span>  <span class="c1"># è·å–åˆ°divæ ‡ç­¾  </span>
</span></span><span class="line"><span class="cl">    <span class="n">script</span> <span class="o">=</span> <span class="n">div</span><span class="o">.</span><span class="n">next_sibling</span><span class="o">.</span><span class="n">next_sibling</span>  
</span></span><span class="line"><span class="cl">    <span class="c1"># è·å–ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ å³script  </span>
</span></span><span class="line"><span class="cl">	<span class="c1"># print(script)    </span>
</span></span><span class="line"><span class="cl">	<span class="c1"># var ibf1fz = &#39;1693922274&#39;;    </span>
</span></span><span class="line"><span class="cl">	<span class="c1"># var _hddhs = &#39;c5010165681fd1c5fd8be8a4bcf20906&#39;;     # è·å–ibf1fzå’Œ_hddhs  </span>
</span></span><span class="line"><span class="cl">    <span class="n">ibf1fz</span> <span class="o">=</span> <span class="n">script</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  
</span></span><span class="line"><span class="cl">    <span class="n">hddhs</span> <span class="o">=</span> <span class="n">script</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)[</span><span class="mi">6</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  
</span></span><span class="line"><span class="cl">    <span class="c1"># fid: 4805955  </span>
</span></span><span class="line"><span class="cl">    <span class="c1"># uid: 2427876    # è·å–fidå’Œuid  </span>
</span></span><span class="line"><span class="cl">    <span class="n">fid</span> <span class="o">=</span> <span class="n">script</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>  
</span></span><span class="line"><span class="cl">    <span class="n">uid</span> <span class="o">=</span> <span class="n">script</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">ibf1fz</span><span class="p">,</span> <span class="n">hddhs</span><span class="p">,</span> <span class="n">fid</span><span class="p">,</span> <span class="n">uid</span>
</span></span></code></pre></div><p>åˆ©ç”¨æ‹¿åˆ°çš„è¿™äº›å‚æ•°ï¼Œæˆ‘å°±å¯ä»¥ç”¨postè¯·æ±‚äº†ï¼Œè¿™é‡Œè¯·æ±‚çš„æºåœ°å€æ˜¯<code>source_url = 'https://wwr.lanzoui.com/filemoreajax.php'</code>
è¿™æ ·æˆ‘å°±æ‹¿åˆ°äº†Ajaxè¿”å›æ¥çš„ä¸€æ•´ä¸ªjsonæ•°æ®ï¼Œæˆ‘è½¬æˆå­—å…¸ï¼Œå‘ç°è¿™é‡Œé¢çš„æ•°æ®å…¨éƒ½æ˜¯è¿™ä¸ªåˆ†äº«é“¾æ¥ä¸‹çš„æ‰€æœ‰æ–‡ä»¶çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ–‡ä»¶åã€æ–‡ä»¶idï¼ˆå¯ä»¥æ‹¼æ¥æˆä¸‹è½½é“¾æ¥ï¼‰ç­‰ç­‰ä¿¡æ¯ã€‚</p>
<p>äºæ˜¯æˆ‘åˆåˆ©ç”¨å­—å…¸çš„çŸ¥è¯†ï¼ŒæŠŠæ•´ä¸ªjsonæ•°æ®ä¸­çš„æ–‡ä»¶åå’Œæ–‡ä»¶idåˆ†åˆ«å­˜åœ¨å„è‡ªçš„åˆ—è¡¨ä¸­ï¼ŒåŒæ ·åˆ†è£…æˆå‡½æ•°ï¼Œå¹¶è¿”å›è¿™ä¸¤ä¸ªåˆ—è¡¨ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">get_download_id</span><span class="p">(</span><span class="n">t</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pwd</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>  
</span></span><span class="line"><span class="cl">    <span class="c1"># è¯·æ±‚è¡¨å•æ•°æ®  </span>
</span></span><span class="line"><span class="cl">    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;lx&#39;</span><span class="p">:</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;fid&#39;</span><span class="p">:</span> <span class="n">f</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;uid&#39;</span><span class="p">:</span> <span class="n">u</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;pg&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;rep&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;t&#39;</span><span class="p">:</span> <span class="n">t</span><span class="p">,</span>  <span class="c1"># å½“å‰æ—¶é—´æˆ³  </span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;k&#39;</span><span class="p">:</span> <span class="n">k</span><span class="p">,</span>  <span class="c1"># æ„Ÿè§‰åº”è¯¥æ˜¯32ä½md5åŠ å¯†åçš„å¯†ç  å¯ä»¥ä»ç½‘é¡µæºç ä¸­æ‰¾åˆ°  </span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;up&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;ls&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;pwd&#39;</span><span class="p">:</span> <span class="n">pwd</span>  
</span></span><span class="line"><span class="cl">    <span class="p">}</span>  
</span></span><span class="line"><span class="cl">    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">source_url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl">    <span class="c1"># print(response.text)  </span>
</span></span><span class="line"><span class="cl">    <span class="c1"># è¿”å›æ•°æ®ä¸ºjsonæ ¼å¼ï¼Œæˆ‘ä»¬è¦æå–é‡Œé¢idçš„å€¼  </span>
</span></span><span class="line"><span class="cl">    <span class="c1"># print(response.json())  </span>
</span></span><span class="line"><span class="cl">    <span class="n">download_id</span> <span class="o">=</span> <span class="p">[]</span>  
</span></span><span class="line"><span class="cl">    <span class="n">file_name_all</span> <span class="o">=</span> <span class="p">[]</span>  
</span></span><span class="line"><span class="cl">    <span class="n">download_id_lists</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span>  
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">data_dict</span> <span class="ow">in</span> <span class="n">download_id_lists</span><span class="p">:</span>  
</span></span><span class="line"><span class="cl">        <span class="n">download_id</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>  
</span></span><span class="line"><span class="cl">        <span class="n">file_name_all</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;name_all&#39;</span><span class="p">])</span>  
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">download_id</span><span class="p">,</span> <span class="n">file_name_all</span>
</span></span></code></pre></div><p>æ¥ä¸‹æ¥ï¼Œå°±æ˜¯æ ¹æ®æ‹¼æ¥æˆçš„æ–‡ä»¶ä¸‹è½½é“¾æ¥ï¼Œè¿›è¡Œä¸‹è½½ã€‚è¿™é‡Œé‡åˆ°äº†ç¬¬ä¸‰ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬ç”¨æµè§ˆå™¨è®¿é—®ä¸‹è½½é“¾æ¥ï¼Œå‘ç°äº†è¿™ä¸ªé¡µé¢åˆä¸‰ä¸ªä¸‹è½½æŒ‰é’®ï¼Œåˆ†åˆ«æ˜¯è”é€šä¸‹è½½ã€ç”µä¿¡ä¸‹è½½ã€æ™®é€šä¸‹è½½ï¼Œè¿™ä¸‰ä¸ªæ ‡ç­¾å¥—åœ¨åŒä¸€ä¸ªaæ ‡ç­¾ä¸­ğŸ˜„ï¼Œç„¶åè¿™ä¸‰ä¸ªæŒ‰é’®åˆæ˜¯å±äºå¦å¤–ä¸€ä¸ªHTMLé¡µé¢ï¼Œé€šè¿‡é“¾æ¥æ˜¾ç¤ºåœ¨è¿™ä¸ªé¡µé¢ä¸­ï¼Œäºæ˜¯æˆ‘ç›´æ¥è¯·æ±‚é‚£ä¸‰ä¸ªæŒ‰é’®çš„é¡µé¢ï¼Œè¿›è¡Œæ“ä½œã€‚</p>
<p>æœ‰è¶£çš„æ˜¯ï¼Œè¿™é‡Œçš„ä¸‹è½½æŒ‰é’®åŒæ ·æ˜¯ç”¨Ajaxè¯·æ±‚çš„ï¼Œæˆ‘åŒæ ·æŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•ï¼Œå…ˆæ‰¾åˆ°divæ ‡ç­¾ï¼Œå†ç”¨ä¸‹ä¸€ä¸ªå…„å¼Ÿçš„ä¸‹ä¸€ä¸ªå…„å¼Ÿè·å–åˆ°äº†scriptä¸­çš„å†…å®¹ï¼Œè¿™ä¸ªå†…å®¹é‡Œé¢æœ‰æˆ‘æ‰€éœ€è¦çš„dataå‚æ•°çš„å€¼ï¼ŒåŒæ ·å­—ç¬¦ä¸²æ“ä½œè·å¾—äº†å€¼ï¼Œå¹¶å°è£…æˆå‡½æ•°è¿”å›è¿™äº›å‚æ•°ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">get_ajaxdata</span><span class="p">(</span><span class="n">download_url</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>  
</span></span><span class="line"><span class="cl">    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">download_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl">    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl">    <span class="n">download_btn_url</span> <span class="o">=</span> <span class="n">lanzou_url</span> <span class="o">+</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;iframe&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;ifr2&#39;</span><span class="p">})[</span><span class="s1">&#39;src&#39;</span><span class="p">]</span>  
</span></span><span class="line"><span class="cl"><span class="c1"># print(download_btn_url)  </span>
</span></span><span class="line"><span class="cl"><span class="c1"># TODO ç”¨requestè¯·æ±‚è¿”å›æµè§ˆå™¨æ¸²æŸ“ä¹‹å‰çš„ç½‘é¡µæºç ï¼Œæ²¡æœ‰åŒ…å«æ–‡ä»¶ä¸‹è½½åœ°å€  </span>
</span></span><span class="line"><span class="cl"><span class="c1"># TODO ç”¨seleniumæ¨¡æ‹Ÿæµè§ˆå™¨è¯·æ±‚ï¼Œä½†æ˜¯é€Ÿåº¦å¤ªæ…¢äº†ï¼Œè€Œä¸”è¿˜è¦å®‰è£…chromedriver.exe  </span>
</span></span><span class="line"><span class="cl"><span class="c1"># TODO å¯ä»¥ç›´æ¥è¯·æ±‚ ajaxm.php æ–‡ä»¶ï¼Œé‡Œé¢è¿”å›äº†æ–‡ä»¶ä¸‹è½½åœ°å€  </span>
</span></span><span class="line"><span class="cl">    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">download_btn_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl">    <span class="n">response</span><span class="o">.</span><span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-8&#39;</span>  <span class="c1"># é˜²æ­¢ä¸­æ–‡ä¹±ç   </span>
</span></span><span class="line"><span class="cl">    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl">    <span class="c1"># print(soup)  </span>
</span></span><span class="line"><span class="cl">    <span class="n">script</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;load&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">nextSibling</span><span class="o">.</span><span class="n">nextSibling</span><span class="o">.</span><span class="n">nextSibling</span><span class="o">.</span><span class="n">nextSibling</span>  
</span></span><span class="line"><span class="cl"><span class="c1"># print(script)  </span>
</span></span><span class="line"><span class="cl"><span class="c1"># wsk_sign = &#39;c20230818&#39;;    </span>
</span></span><span class="line"><span class="cl"><span class="c1"># aihidcms = &#39;19Yt&#39;;    </span>
</span></span><span class="line"><span class="cl"><span class="c1"># iucccjdsd = &#39;&#39;;    </span>
</span></span><span class="line"><span class="cl"><span class="c1"># ws_sign = &#39;c20230818&#39;;    </span>
</span></span><span class="line"><span class="cl"><span class="c1"># sasign = &#39;sA2UHOV5vUGFSW1FuBjZTb1Y9V2EHbQMzBDZUZgZrVGZVYQBxASgDagdgC2sBbFxpAWsHMlM6VmADNQE0Sv2_c&#39;;    </span>
</span></span><span class="line"><span class="cl"><span class="c1"># ajaxdata = &#39;?ctdf&#39;;    # è·å–å„ä¸ªå…ƒç´ çš„å€¼  </span>
</span></span><span class="line"><span class="cl">    <span class="n">wsk_sign</span> <span class="o">=</span> <span class="n">script</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  
</span></span><span class="line"><span class="cl">    <span class="n">aihidcms</span> <span class="o">=</span> <span class="n">script</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  
</span></span><span class="line"><span class="cl">    <span class="n">iucccjdsd</span> <span class="o">=</span> <span class="n">script</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  
</span></span><span class="line"><span class="cl">    <span class="n">ws_sign</span> <span class="o">=</span> <span class="n">script</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  
</span></span><span class="line"><span class="cl">    <span class="n">sasign</span> <span class="o">=</span> <span class="n">script</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  
</span></span><span class="line"><span class="cl">    <span class="n">ajaxdata</span> <span class="o">=</span> <span class="n">script</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  
</span></span><span class="line"><span class="cl">    <span class="c1"># print(wsk_sign, aihidcms, iucccjdsd, ws_sign, sasign, ajaxdata)  </span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">aihidcms</span><span class="p">,</span> <span class="n">iucccjdsd</span><span class="p">,</span> <span class="n">sasign</span><span class="p">,</span> <span class="n">ajaxdata</span>
</span></span></code></pre></div><p>ç”¨ä¸Šé¢å¾—åˆ°çš„å‚æ•°è¿›è¡Œpostè¯·æ±‚ï¼Œå°±å¯ä»¥å¾—åˆ°Ajaxè¿”å›çš„ä¸€ä¸ªjsonæ•°æ®ï¼Œè¿›è¡Œæ•°æ®åˆ†æï¼Œè¿™é‡Œæˆ‘ä»¬å°±å¾—åˆ°äº†æ–‡ä»¶ä¸‹è½½çš„ç›´é“¾äº†ï¼Œåªè¦ç‚¹å‡»è¿™ä¸ªé“¾æ¥ï¼Œæµè§ˆå™¨å°±å¯ä»¥å¼€å§‹è‡ªåŠ¨ä¸‹è½½ã€‚</p>
<p>æ¥ä¸‹æ¥çš„äº‹æƒ…å°±ç®€å•äº†ï¼Œåªè¦getè¯·æ±‚è¿™äº›é“¾æ¥ï¼ŒæŠŠè¿”å›å€¼å†™å…¥æ–‡ä»¶ä¸­ã€‚è¿™é‡Œæˆ‘ç”¨æ ‡é¢˜åˆ›å»ºäº†æ–‡ä»¶å¤¹ï¼ŒæŠŠæ¯ä¸ªæ–‡ä»¶å‘½åä¸ºä¹‹å‰è¿”å›çš„æ–‡ä»¶åï¼Œè¿™æ ·ä¸€åˆ‡å°±å®Œç¾äº†ã€‚ä½†æ˜¯åœ¨è¿™é‡Œæˆ‘é‡åˆ°äº†æœ€å›°éš¾çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯å¡çš„æ—¶é—´æœ€ä¹…çš„ä¸€æ¬¡ã€‚</p>
<p>å°±æ˜¯æŒ‰ç…§æˆ‘çš„æƒ³æ³•è¿™æ ·æ“ä½œï¼Œæ ¹æœ¬è¡Œä¸é€šï¼Œä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶éƒ½æ˜¯5kbï¼Œè€Œä¸”æ‰“ä¸å¼€ï¼Œæ ¹æœ¬å°±ä¸æ˜¯æˆ‘æƒ³è¦çš„æ–‡ä»¶ã€‚äºæ˜¯æˆ‘å¼€å§‹åˆ†æï¼Œå…ˆæŠŠè¿”å›å€¼æ‰“å°å‡ºæ¥ï¼Œå‘ç°æ˜¯ä¸€ä¸ªhtmlæ ¼å¼çš„æ–‡æœ¬ï¼Œéš¾æ€ªä¸å¯¹ã€‚æˆ‘å½“æ—¶å°±åœ¨æƒ³éš¾é“æˆ‘è¿™ä¸ªé“¾æ¥ä¸æ˜¯æ–‡ä»¶çš„ç›´é“¾ï¼Ÿä½†æ˜¯æµè§ˆå™¨ä¸€æ‰“å¼€å°±å¯ä»¥ä¸‹è½½ï¼Œä¹Ÿä¸å¯¹å•Šã€‚äºæ˜¯æˆ‘è®¤ä¸ºæ˜¯å¤§æ–‡ä»¶æ²¡æœ‰åˆ†æ‰¹ä¸‹è½½ï¼Œäºæ˜¯æˆ‘æŠŠå†™å…¥æ–‡ä»¶ä»£ç æ”¹æˆ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">dir_name</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">file_name_all</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>  
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="mi">102400</span><span class="p">):</span>  
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="n">chunk</span><span class="p">:</span>  
</span></span><span class="line"><span class="cl">		<span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</span></span></code></pre></div><p>ä½†æ˜¯è¿˜æ˜¯ä¸è¡Œï¼Œä¹‹åæˆ‘åˆå°è¯•äº†å¾ˆå¤šæ–¹æ³•ï¼Œéƒ½ä¸è¡Œï¼Œä¸Šç½‘æœç´¢äº†å¾ˆå¤šPythonè¯·æ±‚æ–‡ä»¶çš„æ–¹æ³•ï¼Œä¹Ÿéƒ½ä¸è¡Œã€‚æœ€åæˆ‘å‡ ä¹éƒ½è®¤å®šæˆ‘å¾—åˆ°çš„è¿™ä¸ªé“¾æ¥ä¸æ˜¯æ–‡ä»¶çš„ç›´é“¾ï¼Œæˆ‘ç”¨Firefoxæµè§ˆå™¨æ‰“å¼€ï¼Œè·³å‡ºæ¥ä¸€ä¸ªé¡µé¢ï¼Œæœ‰ä¸€ä¸ªä¸‹è½½æŒ‰é’®ï¼Œäºæ˜¯æˆ‘åˆå¼€å§‹åƒå‰é¢çš„æ“ä½œä¸€æ ·åˆ†æä»£ç ï¼Œä½†æ˜¯æˆ‘åˆè¢«å¡ä½äº†ï¼Œæ˜æ˜ç”¨æ­£ç¡®çš„dataå´è¯·æ±‚ä¸åˆ°æ•°æ®ã€‚</p>
<p>æœ€åæˆ‘ä¸Šç½‘æœç´¢åˆ°äº†åˆ«äººå†™çš„è“å¥äº‘ä¸‹è½½çš„çˆ¬è™«ï¼Œæˆ‘å‘ç°é“¾æ¥ç¡®å®æ˜¯ç›´é“¾ï¼Œå› ä¸ºåˆ«äººä¹Ÿæ˜¯ç”¨è¿™ä¸ªé“¾æ¥ä¸‹è½½çš„ï¼Œå”¯ä¸€çš„ä¸åŒå°±æ˜¯ï¼Œä¸‹è½½æ—¶çš„è¯·æ±‚ä¸åŒï¼Œè¿˜æœ‰å†™äº†ä¸€å †è¯·æ±‚å¤´ã€‚é—®é¢˜å°±è¿™æ ·è§£å†³äº†
<img src="https://cdn.jsdelivr.net/gh/Pi3-l22/pico_rep/img/20231222211143.png" alt="è¯·æ±‚å¤´"></p>
<p>æœ€åæ ¹æ®ç½‘ä¸Šçš„æ–¹æ³•ï¼Œæˆ‘ä¹ŸæˆåŠŸæŠŠæ–‡ä»¶ä¸‹è½½ä¸‹æ¥ã€‚</p>
<h1 id="åæ€">åæ€</h1>
<p>æˆ‘è¿™ä¸ªç¨‹åºï¼Œå†™çš„çœ‹èµ·æ¥å°±åƒå±å±±ï¼Œä»¥åå†å›æ¥è¯´ä¸å®šå°±è¯»ä¸æ‡‚äº†ã€‚æ‰€ä»¥å…»æˆè‰¯å¥½çš„ç¼–ç ä¹ æƒ¯è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚å¯ä»¥å¤šå‚è€ƒåˆ«äººå†™çš„å¥½çš„ä»£ç æ ¼å¼ï¼Œä¹Ÿå¯ä»¥çœ‹Pythonçš„ç¼–ç è§„èŒƒã€‚</p>
<p>è¿™é‡Œé¢çš„ä»£ç ï¼Œè¿˜æœ‰å¾ˆå¤šçš„åŸç†é—®é¢˜éœ€è¦è§£å†³å’Œæ€è€ƒ</p>
<ol>
<li>æœ€åé—®é¢˜çš„è§£å†³ï¼ŒåŸç†åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>Pythonè¯·æ±‚é“¾æ¥ä¸‹è½½æ–‡ä»¶çš„æ–¹æ³•æœ‰å¤šå°‘ç§ï¼Ÿ</li>
<li>è·å–scriptæ ‡ç­¾çš„æ“ä½œè‚¯å®šä¸æ˜¯æ ‡å‡†çš„å†™æ³•ï¼Œä½†æ˜¯è¿™æ ·èƒ½æˆåŠŸçš„åŸç†æ˜¯ä»€ä¹ˆï¼ŸPythonçˆ¬è™«é‡åˆ°è¿™ç§æƒ…å†µï¼Œè§„èŒƒæ­£ç¡®çš„è§£å†³æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>â€¦â€¦</li>
</ol>
<p>è¿™æ ·é—®é¢˜åº”è¯¥å¯ä»¥åœ¨æˆ‘ç³»ç»Ÿå­¦ä¹ äº†Pythonçˆ¬è™«ä¹‹åå¾—åˆ°è§£å†³ã€‚</p>
    
  </article>
  <div class="paginator">
    
    <a></a>
    
    
    <a class="link" href="https://blog.pi3.fun/post/2023/10/%E8%8E%B7%E5%8F%96%E5%B9%B6%E6%8E%A8%E9%80%81%E8%AF%AD%E9%9F%B3%E5%8C%85%E5%88%B0%E6%89%8B%E6%9C%BA%E5%BE%AE%E4%BF%A1/">next â†’</a>
    
  </div>
  <div class="comment">
    
    
    
    
    
    
    
    
      <br>
<div id="tcomment"></div>
<script src="https://cdn.jsdelivr.net/npm/twikoo@1.6.39/dist/twikoo.min.js"></script>
<script>
twikoo.init({
  envId: 'https://pi3-twikoo.netlify.app/.netlify/functions/twikoo',
  el: '#tcomment',
  lang: 'zh-CN', 
})
</script>

    
      
  </div>
  
</main>

    <footer id="footer">
  <div>
    <span style="display: flex;align-items: center;">Â© 2021 - 2024<img src="https://p.sda1.dev/19/68796ec343c7a7eecbe99de4a9df6c66/rainbow.gif" width=20>By LiuChao</span>
  </div>
  
  

  

  <div class="footnote">
    <span><a class=link href=/index.xml><span class="iconfont icon-RSS"></span></a>  |  <a class=link href=https://github.com/Pi3-l22 Target=_ blank><span class="iconfont icon-GitHub"></span></a>  |  <a class=link href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel=noopener><span class="iconfont icon-creative-commons-fill"></span></a>
</span>
  </div>
</footer>

  </div>

  
  

  
  

  
  
  
    
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-WE6L6RF96W"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-WE6L6RF96W');
        }
      </script>
    
  




  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const currentTheme = localStorage.getItem('theme') || 'light';
      

      const lightStyle = document.querySelector('link[data-theme-style="light"]');
      const darkStyle = document.querySelector('link[data-theme-style="dark"]');
      
      
      const systemThemeMedia = window.matchMedia('(prefers-color-scheme: dark)');
      systemThemeMedia.addListener(function(e) {
        
        if (!localStorage.getItem('theme')) {
          const newTheme = e.matches ? 'dark' : 'light';
          document.documentElement.setAttribute('data-theme', newTheme);
          localStorage.setItem('theme', newTheme);
          
          
          if (newTheme === 'light') {
            lightStyle.media = 'all';
            darkStyle.media = 'not all';
          } else {
            lightStyle.media = 'not all';
            darkStyle.media = 'all';
          }
          
          
          const giscusFrame = document.querySelector('iframe.giscus-frame');
          if (giscusFrame) {
            const giscusTheme = newTheme === 'light' ? 'light_tritanopia' : 'dark_tritanopia';
            giscusFrame.contentWindow.postMessage(
              { giscus: { setConfig: { theme: giscusTheme } } },
              'https://giscus.app'
            );
          }
        }
      });

      
      if (currentTheme === 'light') {
        lightStyle.media = 'all';
        darkStyle.media = 'not all';
      } else {
        lightStyle.media = 'not all';
        darkStyle.media = 'all';
      }

      
      function updateGiscusTheme() {
        const giscusFrame = document.querySelector('iframe.giscus-frame');
        if (giscusFrame) {
          const giscusTheme = currentTheme === 'light' ? 'light_tritanopia' : 'dark_tritanopia';
          giscusFrame.contentWindow.postMessage(
            { giscus: { setConfig: { theme: giscusTheme } } },
            'https://giscus.app'
          );
        } else {
          
          setTimeout(updateGiscusTheme, 1000);
        }
      }
      
      
      updateGiscusTheme();

      const themeToggle = document.querySelector('.theme-toggle');
      if (themeToggle) {
        themeToggle.textContent = currentTheme === 'light' ? 'é»‘æš—' : 'æ˜äº®';
        
        themeToggle.addEventListener('click', function() {
          const currentTheme = document.documentElement.getAttribute('data-theme');
          const newTheme = currentTheme === 'light' ? 'dark' : 'light';
          
          document.documentElement.setAttribute('data-theme', newTheme);
          localStorage.setItem('theme', newTheme);
          
          
          if (newTheme === 'light') {
            lightStyle.media = 'all';
            darkStyle.media = 'not all';
          } else {
            lightStyle.media = 'not all';
            darkStyle.media = 'all';
          }
          
          
          const giscusFrame = document.querySelector('iframe.giscus-frame');
          if (giscusFrame) {
            const giscusTheme = newTheme === 'light' ? 'light_tritanopia' : 'dark_tritanopia';
            giscusFrame.contentWindow.postMessage(
              { giscus: { setConfig: { theme: giscusTheme } } },
              'https://giscus.app'
            );
          }
          
          this.textContent = newTheme === 'light' ? 'é»‘æš—' : 'æ˜äº®';
        });
      }
    });
  </script>

</body>

</html>
