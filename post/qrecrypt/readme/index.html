<!doctype html><html lang=zh-cn><head><script>(function(){const e=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",e)})()</script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=author content="LiuChao"><meta name=description content="QREcrypt 是一个基于 Go 语言开发的文件加密和管理工具，提供了安全可靠的文件加密和管理功能。本工具采用现代加密算法，结合双重认证机制，为用户提供了一个安全的文件加密解决方案。"><link rel=icon href=https://blog.pi3.fun/favicon.ico><meta name=keywords content=" study  latex  life  academic "><meta property="og:url" content="https://blog.pi3.fun/post/qrecrypt/readme/"><meta property="og:site_name" content="Pi3's Notes"><meta property="og:title" content="QREcrypt安全文件加密工具"><meta property="og:description" content="QREcrypt 是一个基于 Go 语言开发的文件加密和管理工具，提供了安全可靠的文件加密和管理功能。本工具采用现代加密算法，结合双重认证机制，为用户提供了一个安全的文件加密解决方案。"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-11-24T00:00:00+00:00"><meta property="article:modified_time" content="2024-11-24T00:00:00+00:00"><meta property="article:tag" content="技术"><meta property="article:tag" content="Golang"><meta property="article:tag" content="QREcrypt"><link rel=canonical href=https://blog.pi3.fun/post/qrecrypt/readme/><meta itemprop=name content="QREcrypt安全文件加密工具"><meta itemprop=description content="QREcrypt 是一个基于 Go 语言开发的文件加密和管理工具，提供了安全可靠的文件加密和管理功能。本工具采用现代加密算法，结合双重认证机制，为用户提供了一个安全的文件加密解决方案。"><meta itemprop=datePublished content="2024-11-24T00:00:00+00:00"><meta itemprop=dateModified content="2024-11-24T00:00:00+00:00"><meta itemprop=wordCount content="5213"><meta itemprop=keywords content="技术,Golang,QREcrypt"><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/common.css><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/content.css><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/theme.css><link media=screen rel=stylesheet href=https://blog.pi3.fun/css/iconfont/iconfont.css><link rel=stylesheet href=https://blog.pi3.fun/css/syntax/xcode.css data-theme-style=light media="(prefers-color-scheme: light)"><link rel=stylesheet href=https://blog.pi3.fun/css/syntax/catppuccin-mocha.css data-theme-style=dark media="not all"><title>QREcrypt安全文件加密工具 - Pi3's Notes</title>
<link rel=stylesheet href=https://blog.pi3.fun/css/single.css><link href=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-100-y/KaTeX/0.15.2/katex.min.css rel=stylesheet><script defer src=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-100-y/KaTeX/0.15.2/katex.min.js></script><script defer src=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-100-y/KaTeX/0.15.2/contrib/auto-render.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}],ignoredTags:["script","noscript","style","textarea","pre","code","option"],throwOnError:!1})})</script></head><body><div id=wrapper><header id=header><h1><a href=https://blog.pi3.fun/>Pi3's Notes</a></h1><nav><span class=nav-bar-item><a class=link href=/>文章</a>
</span><span class=nav-bar-item><a class=link href=/post/>归档</a>
</span><span class=nav-bar-item><a class=link href=/about/>关于</a>
</span><span class=nav-bar-item><a class=link href=/links/>友链</a>
</span><span class=nav-bar-item><a class="link theme-toggle" href=javascript:void(0);>黑暗</a></span></nav></header><main id=main class=post><h1>QREcrypt安全文件加密工具</h1><div><b>Keywords: </b><a class=link href=https://blog.pi3.fun/tags/%E6%8A%80%E6%9C%AF>#技术</a>
<a class=link href=https://blog.pi3.fun/tags/golang>#Golang</a>
<a class=link href=https://blog.pi3.fun/tags/qrecrypt>#QREcrypt</a></div><div><b>Release Date: </b><span>2024-11-24</span></div><details><summary><b>Table of Contents</b></summary><div class=toc><nav id=TableOfContents><ul><li><a href=#主要特性>主要特性</a></li><li><a href=#安装说明>安装说明</a></li><li><a href=#使用指南>使用指南</a><ul><li><a href=#用户注册>用户注册</a></li><li><a href=#用户登录>用户登录</a></li><li><a href=#主界面>主界面</a></li><li><a href=#加密设置>加密设置</a></li><li><a href=#文件加密>文件加密</a></li><li><a href=#文件解密>文件解密</a></li><li><a href=#云端同步>云端同步</a></li><li><a href=#其他功能>其他功能</a></li></ul></li><li><a href=#使用场景>使用场景</a></li><li><a href=#软件原理>软件原理</a><ul><li><a href=#底层数据结构>底层数据结构</a></li><li><a href=#加密算法>加密算法</a></li><li><a href=#运行流程>运行流程</a></li><li><a href=#安全性说明>安全性说明</a></li></ul></li><li><a href=#常见问题>常见问题</a></li><li><a href=#许可证>许可证</a></li><li><a href=#联系方式>联系方式</a></li></ul></nav></div></details><article class=content><p>QREcrypt 是一个基于 Go 语言开发的文件加密和管理工具，提供了安全可靠的文件加密和管理功能。本工具采用现代加密算法，结合双重认证机制，为用户提供了一个安全的文件加密解决方案。</p><p><img src=https://cdn.pi3.fun/blog/banner1.png alt=banner1></p><h2 id=主要特性>主要特性</h2><ul><li>单一可执行文件，无依赖，小巧安全，方便携带</li><li>支持多种高强度加密算法（QChaCha 20、XChaCha 20、ChaCha 20、AES-256 等）</li><li>集成双重认证（2 FA）机制，提供额外的安全保障</li><li>直观的图形用户界面，支持列表和网格两种文件视图模式</li><li>文件完整性验证，确保加密和解密过程的可靠性</li><li>支持文件搜索功能，方便管理大量加密文件</li><li>自动生成强密钥功能，帮助用户创建高强度密码</li><li>支持用户数据导出和导入，方便用户迁移数据</li><li>支持用户数据云端同步，方便用户在不同设备间迁移数据</li></ul><h2 id=安装说明>安装说明</h2><ol><li><a href=http://pi3.fun/qrecrypt/QREcrypt-windows-amd64.exe>点击下载最新版本</a></li><li>解压下载的文件</li><li>运行 <code>QREcrypt.exe</code> 可执行文件</li></ol><h2 id=使用指南>使用指南</h2><h3 id=用户注册>用户注册</h3><p><img src=https://cdn.pi3.fun/blog/image-20241122000320788.png alt=image-20241122000320788></p><ol><li>启动程序，点击<strong class=chinese>注册用户</strong>按钮</li><li>填写以下信息：<ul><li><strong class=chinese>用户名</strong>：设置您的账户名称</li><li><strong class=chinese>主密钥</strong>：用于登录系统的主要密码</li><li><strong class=chinese>副密钥</strong>：用于加密/解密文件的密码</li></ul></li><li>点击<strong class=chinese>生成强密钥</strong>可自动生成安全的随机密码</li><li>点击<strong class=chinese>绑定认证码</strong>，使用 Google Authenticator 等 2 FA 应用扫描显示的二维码</li><li>输入 2 FA 应用显示的 6 位验证码</li><li>点击<strong class=chinese>注册用户</strong>完成注册</li></ol><h3 id=用户登录>用户登录</h3><p><img src=https://cdn.pi3.fun/blog/image-20241123233520084.png alt=image-20241123233520084></p><ol><li>如果用户从旧设备迁移数据，请先点击<strong class=chinese>导入用户</strong>按钮，导入之前导出的用户数据</li><li>输入<strong class=chinese>用户名</strong>和主密钥</li><li>输入 2 FA 应用当前显示的 6 位验证码</li><li>点击<strong class=chinese>登录用户</strong></li></ol><h3 id=主界面>主界面</h3><p>QREcrypt 的主界面有两种文件展示样式：<strong class=chinese>树形列表样式</strong>与<strong class=chinese>卡片网格样式</strong>。树形列表样式可以展示加密文件各种详细的信息，如文件大小、路径、加密时间以及加密算法等等。而卡片网格样式可以通过点击右键来展示加密文件的详细信息。</p><p><img src=https://cdn.pi3.fun/blog/image-20241123234406995.png alt=image-20241123234406995></p><p><img src=https://cdn.pi3.fun/blog/image-20241123234426682.png alt=image-20241123234426682></p><p><img src=https://cdn.pi3.fun/blog/image-20241123234522496.png alt=image-20241123234522496></p><p>无论是<strong class=chinese>树形列表样式</strong>还是<strong class=chinese>卡片网格样式</strong>都可以通过鼠标<strong class=chinese>左键单击</strong>选中该文件，以此来对该文件执行<strong class=chinese>删除</strong>或是<strong class=chinese>解密</strong>操作。</p><h3 id=加密设置>加密设置</h3><p><img src=https://cdn.pi3.fun/blog/image-20241123234904129.png alt=image-20241123234904129></p><ol><li>点击工具栏的<strong class=chinese>加密设置</strong>按钮</li><li>选择不同的<strong class=chinese>文件加密算法</strong>，用于加密文件</li><li>选择不同的<strong class=chinese>密钥派生算法</strong>，用于生成加密密钥</li><li>点击保存按钮</li></ol><h3 id=文件加密>文件加密</h3><p><img src=https://cdn.pi3.fun/blog/image-20241123234933891.png alt=image-20241123234933891></p><ol><li>点击工具栏的<strong class=chinese>加密文件</strong>按钮</li><li>输入<strong class=chinese>副密钥</strong>进行验证</li><li>选择需要加密的文件</li><li>等待加密完成</li></ol><h3 id=文件解密>文件解密</h3><p><img src=https://cdn.pi3.fun/blog/image-20241123234949969.png alt=image-20241123234949969></p><ol><li>在文件列表中选择要解密的文件</li><li>点击工具栏的<strong class=chinese>解密文件</strong>按钮</li><li>输入<strong class=chinese>副密钥</strong>进行验证</li><li>选择解密文件的<strong class=chinese>保存位置</strong></li><li>等待解密完成</li></ol><h3 id=云端同步>云端同步</h3><p>QREcrypt 支持<strong class=chinese>云端同步</strong>功能，通过用户自己的云端服务器，将数据同步到云端，当用户<strong class=chinese>切换新设备</strong>时，可以使用云端同步无缝将配置信息同步过来。同时也能保证数据的<strong class=chinese>安全性</strong>和<strong class=chinese>私密性</strong>，不会将数据上传到<strong class=chinese>第三方服务器</strong>。</p><p>该功能的<strong class=chinese>文件上传</strong>和<strong class=chinese>下载</strong>的<strong class=chinese>请求和鉴权</strong>过程全部由<strong class=chinese>软件与服务器</strong>之间进行，用户只需配置好<strong class=chinese>服务器环境</strong>并在软件提供<strong class=chinese>正确的服务器地址</strong>即可。👉 <a href=/post/qrecrypt/fileserver/>了解详细流程</a> 👈</p><p>下载 QREcrypt 的服务端程序：</p><ol><li><a href=http://pi3.fun/qrecrypt/QREcryptServer-windows-amd64.exe>QREcryptServer-windows-amd64.exe</a></li><li><a href=http://pi3.fun/qrecrypt/QREcryptServer-linux-amd64>QREcryptServer-linux-amd64</a></li></ol><p>在自己的服务器中运行服务端程序：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>./QREcryptServer -username QREcrypt用户名 -password QREcrypt主密钥 -port 服务运行端口
</span></span></code></pre></div><p>服务端启动后，会输出以下信息，请确保服务器防火墙已放行该端口。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=o>[</span>GIN-debug<span class=o>]</span> POST   /login                    --&gt; main.loginHandler <span class=o>(</span><span class=m>3</span> handlers<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>[</span>GIN-debug<span class=o>]</span> POST   /upload                   --&gt; main.uploadHandler <span class=o>(</span><span class=m>4</span> handlers<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>[</span>GIN-debug<span class=o>]</span> GET    /download/:filename       --&gt; main.downloadHandler <span class=o>(</span><span class=m>4</span> handlers<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>服务器启动在 <span class=o>[</span>51122<span class=o>]</span> <span class=nv>端口</span> <span class=o>===</span>&gt; 请确保防火墙已放行该端口
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>GIN-debug<span class=o>]</span> <span class=o>[</span>WARNING<span class=o>]</span> You trusted all proxies, this is NOT safe. We recommend you to <span class=nb>set</span> a value.
</span></span><span class=line><span class=cl>Please check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies <span class=k>for</span> details.
</span></span><span class=line><span class=cl><span class=o>[</span>GIN-debug<span class=o>]</span> Listening and serving HTTP on :51122
</span></span></code></pre></div><p>配置好服务端后，就可以在 QREcrypt 中使用云端同步功能了。QREcrypt 的云端同步功能有<strong class=chinese>两处入口</strong>：</p><ol><li><strong class=chinese>登录界面</strong>左下角<strong class=chinese>导入用户</strong>功能中的<strong class=chinese>云端导入</strong>。</li><li><strong class=chinese>管理主界面</strong>上方按钮中的<strong class=chinese>云端同步</strong>按钮。</li></ol><p><img src=https://cdn.pi3.fun/blog/image-20241124000449577.png alt=image-20241124000449577></p><p>在<strong class=chinese>登录界面</strong>中的<strong class=chinese>云端导入</strong>功能，是用于用户<strong class=chinese>第一次</strong>迁移到新设备时，这时新设备中并没有用户的信息，此时可以使用云端导入功能，将之前旧设备同步到云端的数据导入到新设备中。</p><p>此时需要输入<strong class=chinese>用户名</strong>、<strong class=chinese>主密钥</strong>以及云端服务器的<strong class=chinese>地址和端口</strong>，然后点击<strong class=chinese>导入数据</strong>按钮，软件会从云端服务器中拉取该用户的数据，并解密保存到本地。接着用户就可以正常通过用户登录进入<strong class=chinese>软件管理主界面</strong>。</p><p><img src=https://cdn.pi3.fun/blog/image-20241123235108186.png alt=image-20241123235108186></p><p>之后的每次同步都可以使用<strong class=chinese>管理主界面</strong>中的<strong class=chinese>云端同步</strong>功能，只需输入一次云端服务器的地址，软件就会保存该地址，用户可以随时将本地的数据推送到云端，也可以随时从云端拉取数据到本地。如果用户需要切换云端服务器地址，只需重新填写地址，软件会覆盖原有的地址信息，只保留最新的服务器地址。</p><p>这样的场景适合用户在<strong class=chinese>不同设备间来回切换</strong>。比如用户有两个设备：<strong class=chinese>家庭设备</strong>和<strong class=chinese>办公设备</strong>，用户在使用办公设备时加密了新的数据，如果需要在家庭设备也访问到此数据，则只需使用<strong class=chinese>云端同步</strong>将数据推送到服务器，回到家庭设备后再使用<strong class=chinese>云端同步</strong>将数据从服务器拉取到本地，完成<strong class=chinese>数据跨设备同步</strong>。</p><blockquote><p>需要注意的是，QREcrypt 的云端同步功能为了防止云端数据管理的困难，只能在云端存储<strong class=chinese>一份用户数据文件</strong>，新推动的数据会覆盖旧的数据，并且在本地也<strong class=chinese>只保留一份用户数据文件</strong>，所以用户在不同设备间来回切换时，需要备份重要的文件，以免造成数据覆盖丢失。</p></blockquote><p>在服务器端，程序会打印每次的请求信息，如果需要保存这些日志信息，可以使用<strong>nohup</strong>命令，将<strong class=chinese>日志信息输出到文件</strong>中，并<strong class=chinese>持久化程序运行</strong>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>nohup ./QREcryptServer -username admin -password admin -port <span class=m>51122</span> &gt; output.log 2&gt;<span class=p>&amp;</span><span class=m>1</span> <span class=p>&amp;</span>
</span></span></code></pre></div><p><img src=https://cdn.pi3.fun/blog/image-20241124001013034.png alt=image-20241124001013034></p><h3 id=其他功能>其他功能</h3><p><img src=https://cdn.pi3.fun/blog/202503031430930.png alt=image.png></p><ul><li><strong class=chinese>帮助</strong>：打开在线帮助文档</li><li><strong class=chinese>主题</strong>：切换软件明暗主题</li><li><strong class=chinese>网格视图</strong>：以网格形式显示文件</li><li><strong class=chinese>列表视图</strong>：以树形列表显示文件</li><li><strong class=chinese>删除</strong>：删除选中的加密文件</li><li><strong class=chinese>导出</strong>：导出用户的所有数据，用于迁移数据到新设备</li><li><strong class=chinese>导入</strong>：导入用户的所有数据，用于从旧设备迁移数据</li><li><strong class=chinese>锁定</strong>：临时锁定界面，需要输入 2 FA 码解锁</li><li><strong class=chinese>注销</strong>：退出当前用户</li></ul><h2 id=使用场景>使用场景</h2><ol><li><strong class=chinese>个人隐私数据保护</strong>：在本地电脑中，对需要保密的文件通过 QREcrypt 进行加密处理，即使是电脑被<strong class=chinese>盗取</strong>、<strong class=chinese>攻击</strong>或者<strong class=chinese>破解</strong>，也无法获取用户的隐私数据。同时，QREcrypt 是一个单一的可执行文件，小巧安全，方便携带。用户可以使用<strong>U 盘</strong>或者<strong class=chinese>移动硬盘</strong>携带<strong>QREcrypt</strong>和导出后的<strong class=chinese>文件数据</strong>，随时随地到任何一台电脑上解密使用。兼顾了<strong class=chinese>安全性</strong>，<strong class=chinese>便携性</strong>，<strong class=chinese>易用性</strong>。</li><li><strong class=chinese>云存储数据安全</strong>：如今云存储服务越来越普及，用户在享受云存储带来的便利的同时，也需要考虑数据的安全性。QREcrypt 可以用来加密上传到云存储的文件，确保即使云服务提供商遭受<strong class=chinese>数据泄露</strong>，存储的数据也是安全的，无法获取用户的<strong class=chinese>隐私数据</strong>。并且 QREcrypt 支持<strong class=chinese>云端同步</strong>功能，用户可以随时随地使用不同设备<strong class=chinese>同步信息</strong>，<strong class=chinese>加解密文件</strong>。</li><li><strong class=chinese>不安全的环境中传输数据</strong>：在网吧，图书馆，咖啡厅等公共场所使用公共网络时，用户可以提前使用 QREcrypt 加密自己需要发送的隐私数据，这样即使是遭遇了<strong class=chinese>中间人攻击</strong>，<strong class=chinese>数据包嗅探</strong>，<strong class=chinese>数据包篡改</strong>，也无法获取用户传输的<strong class=chinese>隐私数据</strong>。</li></ol><h2 id=软件原理>软件原理</h2><h3 id=底层数据结构>底层数据结构</h3><p>QREcrypt 使用一个主文件夹 (<code>.QREcrypt</code>) 来存储用户的所有数据，并为每个用户维护一个用户主文件夹 (<code>.QREcrypt/用户名</code>)。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>.QREcrypt
</span></span><span class=line><span class=cl>├── 用户名
</span></span><span class=line><span class=cl>│   ├── .用户名_config.enc
</span></span><span class=line><span class=cl>│   ├── 加密文件1.enc
</span></span><span class=line><span class=cl>│   ├── 加密文件2.enc
</span></span><span class=line><span class=cl>│   └── ...
</span></span><span class=line><span class=cl>└── ...
</span></span></code></pre></div><p>每一个用户都拥有一个用户配置文件 (<code>.QREcrypt/用户名/.用户名_config.enc</code>)，其中存放用户的所有数据信息，使用<strong>json</strong>格式。其中<strong class=chinese>主密钥</strong>和<strong class=chinese>副密钥</strong>使用 Bcrypt 哈希，<strong>Google Authenticator 私钥</strong>使用 AES-256 加密，密钥为软件信息+用户信息使用 Argon 2 算法进行密钥派生，<strong class=chinese>文件名称</strong>和<strong class=chinese>文件内容</strong>使用 SHA-256 进行哈希。整个用户配置文件再次使用 XChaCha 20 算法进行加密，密钥为用户主密钥使用 Argon 2 算法进行密钥派生。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>- 用户名
</span></span><span class=line><span class=cl>- 主密钥<span class=o>(</span>Bcrypt<span class=o>)</span>
</span></span><span class=line><span class=cl>- 副密钥<span class=o>(</span>Bcrypt<span class=o>)</span>
</span></span><span class=line><span class=cl>- 2FA私钥<span class=o>(</span>AES-256加密<span class=o>)</span>
</span></span><span class=line><span class=cl>- 文件信息
</span></span><span class=line><span class=cl>  - 原始文件名称
</span></span><span class=line><span class=cl>  - 原始文件大小
</span></span><span class=line><span class=cl>  - 原始文件路径
</span></span><span class=line><span class=cl>  - 加密文件路径
</span></span><span class=line><span class=cl>  - 文件加密时间
</span></span><span class=line><span class=cl>  - 文件名称哈希<span class=o>(</span>SHA-256<span class=o>)</span>
</span></span><span class=line><span class=cl>  - 文件内容哈希<span class=o>(</span>SHA-256<span class=o>)</span>
</span></span><span class=line><span class=cl>  - 文件加密算法
</span></span><span class=line><span class=cl>  - 密钥派生算法
</span></span><span class=line><span class=cl>  - 文件加密盐值
</span></span></code></pre></div><h3 id=加密算法>加密算法</h3><p>用户所有加密的文件是根据用户选择的<strong class=chinese>文件加密算法</strong>进行加密，<strong class=chinese>加密密钥</strong>使用用户<strong class=chinese>副密钥</strong>通过用户选择的<strong class=chinese>密钥派生算法</strong>产生。</p><ul><li>支持的加密算法：<ul><li>QChaCha 20 (推荐)</li><li>XChaCha 20</li><li>ChaCha 20</li><li>AES-256</li><li>QChaCha 12</li><li>QChaCha 8</li></ul></li></ul><blockquote><p><strong>QChaCha 8/12/20</strong> 使用 32 字节密钥，12 字节随机数，分别采用 64/96/160 字节量子随机数，迭代 8/12/20 轮</p><p><strong>XChaCha 20</strong> 使用 32 字节密钥，24 字节随机数，迭代 20 轮</p><p><strong>ChaCha 20</strong> 使用 32 字节密钥，12 字节随机数，迭代 20 轮</p><p><strong>AES-256</strong> 使用 32 字节密钥，16 字节随机数，迭代 14 轮</p></blockquote><ul><li>支持的密钥派生算法：<ul><li>Argon 2 (推荐)</li><li>Scrypt</li><li>PBKDF 2</li></ul></li></ul><blockquote><p><strong>Argon 2</strong> 使用 16 字节盐值，迭代 10 次，内存占用 64 MB，线程数 4</p><p><strong>Scrypt</strong> 使用 16 字节盐值，CPU 内存成本 32768，块大小 8 (1024 字节) ，线程数 4</p><p><strong>PBKDF 2</strong> 使用 16 字节盐值，SHA 3-256 作为伪随机函数，迭代 100000 次</p></blockquote><ul><li>密钥存储算法: Bcrypt</li></ul><blockquote><p><strong>Bcrypt</strong> 迭代 12 轮，自动生成盐值并验证</p></blockquote><h3 id=运行流程>运行流程</h3><p><strong class=chinese>注册流程</strong>：当用户第一次运行软件时，软件会检查主文件夹是否存在，如果不存在，则创建主文件夹。接着用户进入注册流程，输入用户名和主密钥副密钥 (可使用软件自动生成强密钥)，然后需绑定 2 FA 认证码，软件随机生成一个 Google Authenticator 私钥和二维码，用户使用 2 FA 应用扫描二维码并输入 2 FA 应用显示的 6 位验证码，完成绑定。软件将用户信息进行部分加密写入用户配置文件，并再次加密保存。</p><p><strong class=chinese>登录流程</strong>：用户输入用户名和主密钥，然后输入 2 FA 应用当前显示的 6 位验证码，点击登录用户按钮，软件验证用户名和主密钥，解密并验证 2 FA 验证码，验证成功后，软件显示用户界面。如果用户从旧设备迁移数据，请先点击<strong class=chinese>导入用户</strong>按钮，导入之前导出的数据，然后才可以进行登录操作，否则软件会提示用户没有注册。</p><p><strong class=chinese>加密设置流程</strong>：用户点击加密设置按钮，软件弹出加密设置窗口，用户选择加密算法和密钥派生算法，点击保存按钮，软件后续的加密文件行为都将使用这种加密方式。如果用户没有设置加密算法，软件默认使用 QChaCha 20 与 Argon 2 的算法组合，此算法组合拥有理论上最高的加密强度，但需要牺牲一定的加密速度。</p><p><strong class=chinese>文件加密流程</strong>：用户选择需要加密的文件，输入副密钥进行验证，软件根据用户选择的加密算法和密钥派生算法，使用副密钥+随机盐值通过密钥派生算法生成加密密钥，并加密文件，同时将加密后的文件移动到用户主文件夹下，将所有文件信息写入用户配置文件。</p><p><strong class=chinese>文件解密流程</strong>：用户选择需要解密的文件，输入副密钥进行验证，软件根据用户配置文件中记录的加密算法和密钥派生算法，使用副密钥+盐值生成解密密钥，解密文件，这时软件并不会删除该加密文件，用户依然可以重复解密该文件，如果用户想要删除该加密文件，应当手动选择文件列表点击删除按钮，才能将该加密文件删除。</p><p><strong class=chinese>用户数据导出流程</strong>：用户点击导出数据按钮，软件会将用户主文件夹下的所有文件，即用户配置文件和加密后的文件，全部打包成一个 zip 文件，用户可以自行选择保存位置。该功能用于用户更换设备时，将之前的数据导出到新设备中。</p><p><strong class=chinese>用户数据导入流程</strong>：用户点击导入数据按钮，软件会弹出文件选择窗口，用户选择之前导出的 zip 文件，软件会解压文件到主文件夹下的用户名文件夹中，完成导入。该功能默认会覆盖原有的配置和文件，如有需要请自行手动保存原有文件，以免造成数据丢失。该功能用于用户更换设备时，将之前的数据导入到新设备中。</p><p><strong class=chinese>云端同步流程</strong>：用户可以选择使用软件提供的云端同步功能，将数据同步到云端，用户需要自行准备云端存储服务，用户需要先在自己的服务器上配置好环境，再在软件中设置好云端服务器地址，然后点击推送按钮，软件会将用户主文件夹下的所有文件同步到云端，当用户切换新设备时，可以使用云端同步的拉取数据功能无缝将配置信息同步过来。</p><h3 id=安全性说明>安全性说明</h3><ol><li>软件中所有的<strong class=chinese>加密算法</strong>和<strong class=chinese>密钥派生算法</strong>都使用了完全随机的<strong class=chinese>随机数</strong>和<strong class=chinese>盐值</strong>，所有加密都使用了<strong class=chinese>密钥派生算法</strong>，保证加密的安全性。</li><li>软件中所有文件的加密都遵循<strong class=chinese>一次一密</strong>的原则，使用<strong>副秘钥+盐值</strong>利用密钥派生算法生成完全不同的文件加密密钥。</li><li>软件中的配置信息，尤其是关键的<strong class=chinese>主密钥</strong>和<strong class=chinese>副密钥</strong>都使用了 Bcrypt 哈希，<strong>2 FA 私钥</strong>使用了 AES-256 加密，保证密钥的安全性。整个配置信息使用 XChaCha 20 加密，保证数据的安全性。</li><li>软件中使用了 Google Authenticator 的<strong class=chinese>双重认证机制</strong>，保证账户的安全性。</li><li>软件中所有数据都存储在用户主文件夹中，软件根据用户名自行选择保存位置，软件可以<strong class=chinese>完全离线运行</strong>，可以不将数据上传到任何服务器，也不会在软件中存储用户数据。</li><li>软件运行时在内存中存储的敏感数据，只有在需要使用时才解密。在处理完敏感信息后，立即使用<strong class=chinese>零填充</strong>或其他方法<strong class=chinese>清理内存中的数据</strong>，使用 <code>runtime.GC()</code> 强制垃圾回收机制回收内存。软件尽量将敏感数据封装在<strong class=chinese>局部作用域</strong>中。避免<strong class=chinese>硬编码</strong>直接写在程序中。</li><li>软件使用 GO 语言 <code>-ldflags "-s -w"</code> 选项编译，<strong class=chinese>去除符号表和调试信息</strong>，减少潜在的信息泄漏。使用 <a href=https://github.com/burrowers/garble>garble</a> 工具对程序代码进行<strong class=chinese>混淆编译</strong>，是程序中的字符串文本更加复杂，增加逆向的难度。使用 <a href=https://github.com/upx/upx>UPX</a> 进行<strong class=chinese>压缩加壳</strong>，减小程序体积，并增加反调试的难度，防止内存攻击</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>go build -ldflags <span class=s2>&#34;-s -w -H windowsgui&#34;</span> -o QREcrypt.exe .
</span></span><span class=line><span class=cl>garble -literals build -ldflags <span class=s2>&#34;-s -w -H windowsgui&#34;</span> -o QREcrypt_obfuscated.exe .
</span></span><span class=line><span class=cl>upx --best QREcrypt.exe
</span></span></code></pre></div><h2 id=常见问题>常见问题</h2><ol><li><p><strong>忘记密码怎么办？</strong></p><ul><li>由于安全原因，密码无法找回。请务必保管好您的密码。</li></ul></li><li><p><strong>如何备份加密文件？</strong></p><ul><li>可以使用工具栏中的导出用户数据功能。</li><li>也可以手动备份 <code>.QREcrypt</code> 文件夹中的所有内容。</li><li>如果配置了云端环境，也可以使用软件的云端同步功能。</li></ul></li><li><p><strong>为什么需要两个密码？</strong></p><ul><li>主密钥用于系统登录，副密钥用于文件加密，这种分离设计提供了更好的安全性。</li></ul></li><li><p><strong>支持加密文件夹吗？</strong></p><ul><li>目前版本仅支持单个文件加密，不支持直接加密文件夹。如果您需要加密文件夹，可以将其打包成单个文件 (如 zip) 后加密。</li></ul></li><li><p><strong>支持批量加解密文件吗？</strong></p><ul><li>目前版本仅支持单个文件加解密，不支持批量加解密文件。</li></ul></li></ol><h2 id=许可证>许可证</h2><p>本项目采用 <a href=LICENSE>MIT 许可证</a></p><h2 id=联系方式>联系方式</h2><p>如有问题或建议，请通过以下方式联系：</p><ul><li>项目主页：<a href=https://github.com/Pi3-l22/QREcrypt>GitHub</a></li><li>问题反馈：<a href=https://github.com/Pi3-l22/QREcrypt/issues>Issues</a></li><li>邮箱：<a href=mailto:1310165597@qq.com><a href=mailto:1310165597@qq.com>1310165597@qq.com</a></a></li></ul><p>By LiuChao（Pi3-l22）</p></article><div class=paginator><a class=link href=https://blog.pi3.fun/post/qrecrypt/fileserver/>← prev</a>
<a class=link href=https://blog.pi3.fun/post/2024/go%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/go%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A818%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/>next →</a></div><div class=comment><div id=tcomment></div><script src=https://registry.npmmirror.com/twikoo/1.6.39/files/dist/twikoo.min.js></script><script async>twikoo.init({envId:"https://twikoo.pi3.fun/.netlify/functions/twikoo",el:"#tcomment",lang:"zh-CN"})</script></div></main><footer id=footer><div><span style=display:flex;align-items:center><span style=margin-right:.5rem>© 2021 - 2025</span><img src=https://cdn.pi3.fun/static/rainbow.gif loading=lazy width=20 alt=rainbow><span style=margin-left:.5rem>By Liu Chao</span></span></div><div class=footnote><span><a href=https://www.foreverblog.cn/ target=_blank><img src=https://img.foreverblog.cn/logo_en_default.png style=width:auto;height:16px></a> | <a class=link href=https://blogscn.fun/ target=_blank><img src=https://photo.xiangming.site/img/blogscn.png style=width:auto;height:15px></a><br><a class=link href=/index.xml><span class="iconfont icon-RSS"></span></a> | <a class=link href=https://github.com/Pi3-l22 target=_ blank><span class="iconfont icon-GitHub"></span></a> | <a class=link href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel=noopener><span class="iconfont icon-creative-commons-fill"></span></a></span></div><div class=blog-icon></div></footer></div><script>document.addEventListener("DOMContentLoaded",function(){const n=localStorage.getItem("theme")||"light",e=document.querySelector('link[data-theme-style="light"]'),t=document.querySelector('link[data-theme-style="dark"]'),i=window.matchMedia("(prefers-color-scheme: dark)");i.addListener(function(n){if(!localStorage.getItem("theme")){const s=n.matches?"dark":"light";document.documentElement.setAttribute("data-theme",s),localStorage.setItem("theme",s),s==="light"?(e.media="all",t.media="not all"):(e.media="not all",t.media="all");const o=document.querySelector("iframe.giscus-frame");if(o){const e=s==="light"?"light_tritanopia":"dark_tritanopia";o.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}}}),n==="light"?(e.media="all",t.media="not all"):(e.media="not all",t.media="all");function o(){const e=document.querySelector("iframe.giscus-frame");if(e){const t=n==="light"?"light_tritanopia":"dark_tritanopia";e.contentWindow.postMessage({giscus:{setConfig:{theme:t}}},"https://giscus.app")}else setTimeout(o,1e3)}o();const s=document.querySelector(".theme-toggle");s&&(s.textContent=n==="light"?"黑暗":"明亮",s.addEventListener("click",function(){const o=document.documentElement.getAttribute("data-theme"),n=o==="light"?"dark":"light";document.documentElement.setAttribute("data-theme",n),localStorage.setItem("theme",n),n==="light"?(e.media="all",t.media="not all"):(e.media="not all",t.media="all");const s=document.querySelector("iframe.giscus-frame");if(s){const e=n==="light"?"light_tritanopia":"dark_tritanopia";s.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}this.textContent=n==="light"?"黑暗":"明亮"}))})</script></body></html>